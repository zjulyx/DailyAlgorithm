> é¢˜ç›®éš¾åº¦: ç®€å•

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/zai-pai-xu-shu-zu-zhong-cha-zhao-shu-zi-lcof/)

> ä»Šå¤©ç»§ç»­æ›´æ–°å‰‘æŒ‡ offer ç³»åˆ—, è€æ ·å­**æ™šä¸Š 6 ç‚¹ 45 åˆ†**å‡†æ—¶æ›´æ–°å…¬ä¼—å· **æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜**, å¤§å®¶è®°å¾—å…³æ³¨å“¦~ å¦å¤–åœ¨å…¬ä¼—å·é‡Œå›å¤ **offer** å°±èƒ½çœ‹åˆ°å‰‘æŒ‡ offer ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†

## é¢˜ç›®æè¿°

ç»Ÿè®¡ä¸€ä¸ªæ•°å­—åœ¨æ’åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚

- 0 <= æ•°ç»„é•¿åº¦ <= 50000

## é¢˜ç›®æ ·ä¾‹

### ç¤ºä¾‹

- è¾“å…¥: nums = [5,7,7,8,8,10], target = 8
- è¾“å‡º: 2

- è¾“å…¥: nums = [5,7,7,8,8,10], target = 6
- è¾“å‡º: 0

## é¢˜ç›®æ€è€ƒ

1. å¯ä»¥ç”¨å°äº O(N)çš„æ—¶é—´å¤æ‚åº¦å¾—å‡ºç»“æœå—?
2. å¯ä»¥åšåˆ° O(1) ç©ºé—´å¤æ‚åº¦å—?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„æ€è·¯æ˜¯ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å­—å…¸, éå†ä¸€éæ•°ç»„ç»Ÿè®¡æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°, æœ€åè¿”å› target çš„æ¬¡æ•°. ä½†è¿™æ ·æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯ O(N), ä¹Ÿç”¨ä¸ä¸Šé¢˜ç›®ä¸­æ•°ç»„æ˜¯æ’åºçš„è¿™ä¸€æ¡ä»¶
- å¦‚ä½•åˆ©ç”¨æ’åºè¿™ä¸€æ¡ä»¶ç»Ÿè®¡æ•°å­—å‡ºç°æ¬¡æ•°å‘¢? æˆ‘ä»¬å¯ä»¥å°è¯•äºŒåˆ†æŸ¥æ‰¾çš„æ€è·¯, åˆ†åˆ«æ‰¾åˆ°è¯¥æ•°å­—çš„å·¦å³è¾¹ç•Œå¯¹åº”çš„ä¸‹æ ‡, ç„¶åæ¬¡æ•°å°±æ˜¯`å³è¾¹ç•Œ-å·¦è¾¹ç•Œ+1` (æ•°ç»„å­˜åœ¨è¯¥æ•°å­—çš„æƒ…å†µä¸‹)
  - æŸ¥æ‰¾å·¦è¾¹ç•Œ: å¦‚æœæ‰¾åˆ°ç­‰äº target çš„æ•°æ—¶, éœ€è¦ç»§ç»­å¾€å·¦æ‰¾. è€Œå¦‚æœæ•°ç»„ä¸­æ²¡æœ‰ç­‰äº target çš„æ•°, åˆ™ç›´æ¥è¿”å› None, æ­¤æ—¶å°±çŸ¥é“è¯¥æ•°å­—çš„å‡ºç°æ¬¡æ•°ä¸º 0 äº†, æ— éœ€ç»§ç»­æ‰¾å³è¾¹ç•Œ
  - æŸ¥æ‰¾å³è¾¹ç•Œ: å¦‚æœæ‰¾åˆ°ç­‰äº target çš„æ•°æ—¶, éœ€è¦ç»§ç»­å¾€å³æ‰¾
- æ³¨æ„å¯ä»¥å°†äºŒåˆ†æŸ¥æ‰¾ä»£ç æ•´åˆåˆ°ä¸€ä¸ªæ–¹æ³•ä¸­, ä¼ å…¥ä¸€ä¸ª flag æ ‡è®°å½“å‰æ˜¯æ‰¾å·¦è¾¹ç•Œè¿˜æ˜¯å³è¾¹ç•Œ, ä»¥å‡å°‘ä»£ç å†—ä½™
- ä¸‹é¢ä»£ç å¯¹å¿…è¦çš„æ­¥éª¤æœ‰è¯¦ç»†çš„è§£é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(logN): äºŒåˆ†æŸ¥æ‰¾ä¸¤æ¬¡
- ç©ºé—´å¤æ‚åº¦ O(1): åªå®šä¹‰äº†å‡ ä¸ªå˜é‡

#### ä»£ç 

```python
class Solution:
    def search(self, nums: List[int], target: int) -> int:
        def binarySearch(isleft):
            # ä¼ å…¥flag isleft, æ ‡è®°å½“å‰æ˜¯æŸ¥æ‰¾å·¦è¾¹ç•Œè¿˜æ˜¯å³è¾¹ç•Œ
            s, e = 0, len(nums) - 1
            # åˆå§‹åŒ–ç»“æœä¸ºNone
            res = None
            while s <= e:
                m = (s + e) >> 1
                if nums[m] == target:
                    if isleft:
                        # å½“å‰æŸ¥æ‰¾çš„æ˜¯å·¦è¾¹ç•Œ, æ›´æ–°ç»“æœä¸ºç­‰äºtargetçš„æ›´å°çš„ä¸‹æ ‡, åŒæ—¶å‘å·¦ç»§ç»­æŸ¥æ‰¾
                        res = m if res is None else min(res, m)
                        e = m - 1
                    else:
                        # å½“å‰æŸ¥æ‰¾çš„æ˜¯å³è¾¹ç•Œ, æ›´æ–°ç»“æœä¸ºç­‰äºtargetçš„æ›´å¤§çš„ä¸‹æ ‡, åŒæ—¶å‘å³ç»§ç»­æŸ¥æ‰¾
                        res = m if res is None else max(res, m)
                        s = m + 1
                elif nums[m] < target:
                    s = m + 1
                else:
                    e = m - 1
            return res

        left = binarySearch(True)
        if left is None:
            # å¦‚æœå·¦è¾¹ç•Œä¸å­˜åœ¨, åˆ™è¯´æ˜æ•´ä¸ªæ•°ç»„æ²¡æœ‰target, ç›´æ¥è¿”å›0
            return 0
        right = binarySearch(False)
        # æœ€ç»ˆç»“æœå°±æ˜¯å³è¾¹ç•Œ-å·¦è¾¹ç•Œ+1
        return right - left + 1
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜, æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://mmbiz.qpic.cn/mmbiz_jpg/1KjZicMlYPMgZWmoL4eYcs6UcfmvsetDWME2YJyaCp9oT9z3U573FWENBNhyOByxYI0epew6O37hiaOhdh90QeJg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)
