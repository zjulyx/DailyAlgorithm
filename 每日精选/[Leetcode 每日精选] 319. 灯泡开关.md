> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/bulb-switcher/)

## é¢˜ç›®æè¿°

åˆå§‹æ—¶æœ‰ n ä¸ªç¯æ³¡å…³é—­ã€‚

- ç¬¬ 1 è½®ï¼Œä½ æ‰“å¼€æ‰€æœ‰çš„ç¯æ³¡ã€‚
- ç¬¬ 2 è½®ï¼Œæ¯ä¸¤ä¸ªç¯æ³¡ä½ å…³é—­ä¸€æ¬¡ã€‚
- ç¬¬ 3 è½®ï¼Œæ¯ä¸‰ä¸ªç¯æ³¡åˆ‡æ¢ä¸€æ¬¡å¼€å…³ï¼ˆå¦‚æœå…³é—­åˆ™å¼€å¯ï¼Œå¦‚æœå¼€å¯åˆ™å…³é—­ï¼‰ã€‚
- ç¬¬ i è½®ï¼Œæ¯ i ä¸ªç¯æ³¡åˆ‡æ¢ä¸€æ¬¡å¼€å…³ã€‚
- ç¬¬ n è½®ï¼Œä½ åªåˆ‡æ¢æœ€åä¸€ä¸ªç¯æ³¡çš„å¼€å…³ã€‚

æ‰¾å‡º n è½®åæœ‰å¤šå°‘ä¸ªäº®ç€çš„ç¯æ³¡ã€‚

## é¢˜ç›®æ ·ä¾‹

### ç¤ºä¾‹ 1

#### è¾“å…¥

3

#### è¾“å‡º

1

#### è§£é‡Š

åˆå§‹æ—¶, ç¯æ³¡çŠ¶æ€ [å…³é—­, å…³é—­, å…³é—­].

- ç¬¬ä¸€è½®å, ç¯æ³¡çŠ¶æ€ [å¼€å¯, å¼€å¯, å¼€å¯].
- ç¬¬äºŒè½®å, ç¯æ³¡çŠ¶æ€ [å¼€å¯, å…³é—­, å¼€å¯].
- ç¬¬ä¸‰è½®å, ç¯æ³¡çŠ¶æ€ [å¼€å¯, å…³é—­, å…³é—­].

ä½ åº”è¯¥è¿”å› 1ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªç¯æ³¡è¿˜äº®ç€ã€‚

## é¢˜ç›®æ€è€ƒ

1. å¯¹äºè½®æ¬¡ i è€Œè¨€, å“ªäº›ç¯æ³¡çŠ¶æ€æ”¹å˜å–å†³äºå…¶ä¸‹æ ‡æ˜¯å¦ä¸º i çš„å€æ•°
2. ç”±æ­¤å¯å¾—, æœ€ç»ˆå¼€ç€çš„ç¯æ³¡åº”è¯¥æœ‰å¥‡æ•°ä¸ªå› å­, è¿™æ ·æ‰èƒ½ä¿è¯æœ€ç»ˆçŠ¶æ€æ˜¯å¼€ç€çš„. å› ä¸ºå¦‚æœæœ‰å¶æ•°ä¸ªå› å­çš„è¯, æ¯æ¬¡å¼€å’Œå…³éƒ½å’ŒåŸçŠ¶æ€ä¸€è‡´, è€Œæœ€åˆåˆæ˜¯å…³ç€çš„, é‚£ä¹ˆæœ€ç»ˆä¹Ÿä¼šæ˜¯å…³ç€çš„.
3. è¿›ä¸€æ­¥æ€è€ƒ: ä»€ä¹ˆæ•°çš„å› å­ä¸ªæ•°ä¸ºå¥‡æ•°?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1

#### æ€è·¯

- æœ€ naive çš„æ–¹æ³•, æ ¹æ®ä¸Šé¢æ€è€ƒ, æ±‚æ¯ä¸ªä¸‹æ ‡çš„å› å­ä¸ªæ•°, ç»Ÿè®¡æœ‰å¥‡æ•°å› å­çš„ä¸‹æ ‡å³å¯
- **æ³¨æ„: å› ä¸ºå¤æ‚åº¦è¿‡é«˜, ä¼š TLE, æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆåªæ˜¯ä½œä¸ºæ¨å¯¼ä¸‹é¢æ›´ä¼˜æ–¹æ¡ˆçš„åŸºç¡€...**

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(N\*sqrt(N)): éœ€è¦éå†æ¯ä¸ªä¸‹æ ‡, è€Œæ¯ä¸ªä¸‹æ ‡æ±‚å› å­æ•°éœ€è¦éå†åˆ°å®ƒçš„å¹³æ–¹æ ¹
- ç©ºé—´å¤æ‚åº¦ O(1): åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡

#### ä»£ç 

##### Python 3

```python
class Solution:
    def bulbSwitch(self, n: int) -> int:
        def getFactorCount(num):
            res = 0
            for i in range(1, int(math.sqrt(num)) + 1):
                if num % i == 0:
                    res += 1 if i == num // i else 2
            return res

        res = 0
        for num in range(1, n + 1):
            if getFactorCount(num) & 1:
                res += 1
        return res
```

##### C++

```cpp
class Solution
{
private:
    int getFactorCount(int num)
    {
        int res = 0;
        for (int i = 1; i <= int(sqrt(num)); ++i)
        {
            if (num % i == 0)
            {
                res += i == num / i ? 1 : 2;
            }
        }
        return res;
    }

public:
    int bulbSwitch(int n)
    {
        int res = 0;
        for (int num = 1; num <= n; ++num)
        {
            if (getFactorCount(num) & 1)
            {
                ++res;
            };
        }
        return res;
    }
};
```

### æ–¹æ¡ˆ 2

#### æ€è·¯

- å›é¡¾å› å­æ˜¯æ€ä¹ˆè®¡ç®—çš„: i\*(n/i), é€šå¸¸å› å­éƒ½æ˜¯æˆå¯¹çš„, åªæœ‰å­˜åœ¨ i==n/i æ—¶æ‰ä¼šæ˜¯å•ç‹¬ä¸€ä¸ªå› å­, å³==>å¹³æ–¹æ•°
- å¦‚ä½•å¿«é€Ÿæ±‚å¹³æ–¹æ•°? åªéœ€è¦å°†å¹³æ–¹æ ¹ i ä» 1 å¼€å§‹å¾ªç¯, å½“å…¶å¹³æ–¹å¤§äº n æ—¶é€€å‡ºå³å¯, æ­¤æ—¶çš„ i-1 å³ä¸ºæ‰€æ±‚

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(sqrt(N)): åªéœ€è¦éå† N çš„å¹³æ–¹æ ¹ä¸ªæ•°
- ç©ºé—´å¤æ‚åº¦ O(1): åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡

#### ä»£ç 

##### Python 3

```python
class Solution:
    def bulbSwitch(self, n: int) -> int:
        i = 1
        while i * i <= n:
            i += 1
        return i - 1
```

##### C++

```cpp
class Solution
{
public:
    int bulbSwitch(int n)
    {
        int i = 1;
        while (i * i <= n)
        {
            ++i;
        }
        return i - 1;
    }
};
```

### æ–¹æ¡ˆ 3

#### æ€è·¯

- è¿›ä¸€æ­¥æ€è€ƒ: è§‚å¯Ÿæ–¹æ¡ˆ 2 çš„ä»£ç , æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰?
- æ²¡é”™! æœ€ç»ˆç»“æœå…¶å®å°±æ˜¯ int(sqrt(n))..
- æ‰€ä»¥ä¸€è¡Œä»£ç æå®š

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(M(n)): åªéœ€è¦è°ƒç”¨ sqrt å³å¯, sqrt æ ¹æ®è¯­è¨€/å¹³å°/ç¡¬ä»¶çš„ä¸åŒ, å…¶å¤æ‚åº¦ä¹Ÿä¸ä¸€æ ·, ç®€å•æ¥è¯´å¯è®¤ä¸ºå’Œä¸€æ¬¡é™¤æ³•çš„å¤æ‚åº¦å·®ä¸å¤š..æ„Ÿå…´è¶£çš„è¯å¯å‚è€ƒ[Computational complexity of mathematical operations](https://en.wikipedia.org/wiki/Computational_complexity_of_mathematical_operations)
  - è¿™é‡Œ M æ˜¯æŒ‡ä¹˜æ³•ç®—æ³•çš„å¤æ‚åº¦, M æ ¹æ®å®ç°çš„ä¸åŒ, å…¶å¤æ‚åº¦ä»‹äº nlogn åˆ° n^2 ä¹‹é—´, n æ˜¯æ•°å­—çš„ä½æ•°ä¸æ˜¯æ•°å­—æœ¬èº«..
- ç©ºé—´å¤æ‚åº¦ O(1): åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡

#### ä»£ç 

##### Python 3

```python
class Solution:
    def bulbSwitch(self, n: int) -> int:
        return int(math.sqrt(n))
```

##### C++

```cpp
class Solution
{
public:
    int bulbSwitch(int n)
    {
        return int(sqrt(n));
    }
};
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„ç®€ä¹¦](https://www.jianshu.com/u/3a17f1fdfd67)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜, æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://mmbiz.qpic.cn/mmbiz_jpg/1KjZicMlYPMgZWmoL4eYcs6UcfmvsetDWME2YJyaCp9oT9z3U573FWENBNhyOByxYI0epew6O37hiaOhdh90QeJg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)
