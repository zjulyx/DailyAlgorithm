> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/surrounded-regions/)

> ä»Šå¤©æˆ‘ä»¬æ¥åšæœ¬å‘¨å¹¶æŸ¥é›†ç³»åˆ—çš„æœ€åä¸€é¢˜, è¿™é“é¢˜è·Ÿå›¾æœ‰å…³, åŒæ ·æœ‰å¤šç§æ€è·¯. å¤§å®¶åœ¨æˆ‘çš„å…¬ä¼—å·"æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜"ä¸­çš„èŠå¤©æ¡†ä¸­å›å¤ **å¹¶æŸ¥é›†** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰å·²ç»æ›´æ–°çš„æ–‡ç« äº†

> å¤§å®¶æœ‰ä»€ä¹ˆæƒ³æ³•å»ºè®®å’Œåé¦ˆçš„è¯æ¬¢è¿éšæ—¶äº¤æµ, åŒ…æ‹¬ä½†ä¸é™äºå…¬ä¼—å·èŠå¤©æ¡†/çŸ¥ä¹ç§ä¿¡è¯„è®ºç­‰ç­‰~

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒç»´çš„çŸ©é˜µï¼ŒåŒ…å« 'X' å’Œ 'O'ï¼ˆå­—æ¯ Oï¼‰ã€‚

æ‰¾åˆ°æ‰€æœ‰è¢« 'X' å›´ç»•çš„åŒºåŸŸï¼Œå¹¶å°†è¿™äº›åŒºåŸŸé‡Œæ‰€æœ‰çš„ 'O' ç”¨ 'X' å¡«å……ã€‚

## é¢˜ç›®æ ·ä¾‹

### ç¤ºä¾‹

#### è¾“å…¥

```
X X X X
X O O X
X X O X
X O X X
```

#### è¾“å‡º

è¿è¡Œä½ çš„å‡½æ•°åï¼ŒçŸ©é˜µå˜ä¸ºï¼š

```
X X X X
X X X X
X X X X
X O X X
```

#### è§£é‡Š

è¢«å›´ç»•çš„åŒºé—´ä¸ä¼šå­˜åœ¨äºè¾¹ç•Œä¸Šï¼Œæ¢å¥è¯è¯´ï¼Œä»»ä½•è¾¹ç•Œä¸Šçš„ Â 'O'Â  éƒ½ä¸ä¼šè¢«å¡«å……ä¸º Â 'X'ã€‚ ä»»ä½•ä¸åœ¨è¾¹ç•Œä¸Šï¼Œæˆ–ä¸ä¸è¾¹ç•Œä¸Šçš„ Â 'O'Â  ç›¸è¿çš„ Â 'O'Â  æœ€ç»ˆéƒ½ä¼šè¢«å¡«å……ä¸º Â 'X'ã€‚å¦‚æœä¸¤ä¸ªå…ƒç´ åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘ç›¸é‚»ï¼Œåˆ™ç§°å®ƒä»¬æ˜¯â€œç›¸è¿â€çš„ã€‚

## é¢˜ç›®æ€è€ƒ

1. è¿™ä¸ªé—®é¢˜å¦‚ä½•è½¬åŒ–æˆæ›´ç®€å•çš„é—®é¢˜?
2. å¦‚ä½•åº”ç”¨å¹¶æŸ¥é›†çš„æ€æƒ³?
3. é™¤äº†å¹¶æŸ¥é›†å¤–, è¿˜æœ‰åˆ«çš„æ€è·¯å—?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1

#### æ€è·¯

- **åˆ†æ**
  - æ ¹æ®é¢˜æ„, è¢« X åŒ…å›´çš„åŒºåŸŸ, å°±æ˜¯ä¸å’Œè¾¹ç•Œçš„ O ç›¸è¿çš„åŒºåŸŸ
  - é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€æ¡ä»¶, å°†æ‰€æœ‰è¾¹ç•Œçš„ O ä»¥åŠè¿é€šçš„ O éƒ½åˆå¹¶åœ¨åŒä¸€é›†åˆ, è¿™å°±èƒ½ç”¨åˆ°å¹¶æŸ¥é›†çš„æ€è·¯äº†
  - ç„¶åå†æ¬¡éå†çŸ©é˜µ, å°†ä¸åœ¨è¯¥é›†åˆçš„ O è½¬æ¢æˆ X å³å¯
- **å®ç°**
  - å°†ä¼ ç»Ÿçš„å¹¶æŸ¥é›†æ”¹é€ æˆäºŒå…ƒç»„å³å¯, å­˜å‚¨è¡Œåˆ—ä¸‹æ ‡.
  - å…·ä½“æ­¥éª¤å¦‚ä¸‹:
    - æ³¨æ„æˆ‘ä»¬éœ€è¦äº‹å…ˆè§„å®šä¸€ä¸ªä¸å­˜åœ¨äºçŸ©é˜µçš„ç‚¹, ä½œä¸ºè¾¹ç•Œ O çš„å…±åŒç¥–å…ˆ. ä½¿ç”¨ä¸å­˜åœ¨çš„ç‚¹æ˜¯ä¸ºäº†ä¿é™©èµ·è§, å› ä¸ºå¦‚æœæ˜¯å·²ç»å­˜åœ¨çš„ç‚¹, åˆ™å¯èƒ½ä¼šå› ä¸ºå…¶æœ¬èº«æ˜¯ä¸€ä¸ªè¢«åŒ…å›´çš„ O è€Œå¯¼è‡´åˆå¹¶èŒƒå›´é”™è¯¯æ‰©å¤§
    - ç„¶ååˆå¹¶çš„æ—¶å€™éƒ½å’Œè¿™ä¸ªç‚¹è¿›è¡Œåˆå¹¶å³å¯ä¿è¯å®ƒä»¬åœ¨åŒä¸€é›†åˆä¸­
    - æœ€åå¾ªç¯åˆ¤æ–­çš„æ—¶å€™åªéœ€è¦å¯¹æ¯”å½“å‰ O å’Œè¿™ä¸ªè‡ªå®šä¹‰çš„ç‚¹çš„ç¥–å…ˆæ˜¯å¦ç›¸ç­‰, ä¸ç›¸ç­‰çš„è¯è¯´æ˜ä¸åœ¨åŒä¸€é›†åˆ, å˜æˆ X å³å¯
  - ä¸‹é¢ä»£ç ä¸­å¯¹æ¯ä¸€æ­¥éƒ½æœ‰è¯¦ç»†æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(RClog(RC))`: æ€»å…±éœ€è¦éå†`RC`æ¬¡, å¹¶æŸ¥é›†ä¸­å­˜`RC`æ•°é‡çº§çš„å…ƒç´ , æ¯æ¬¡åˆå¹¶å’ŒæŸ¥è¯¢æ“ä½œéœ€è¦ `O(log(RC))` çš„æ—¶é—´, æ€»æ—¶é—´å¤æ‚åº¦å°±æ˜¯ `O(RClog(RC))`
- ç©ºé—´å¤æ‚åº¦ `O(RC)`: pre å­—å…¸ä¸­å­˜`RC`æ•°é‡çº§çš„å…ƒç´ 

#### ä»£ç 

```python
class Solution:
    def solve(self, board: List[List[str]]) -> None:
        """
        Do not return anything, modify board in-place instead.
        """
        # æ–¹æ³•1: å¹¶æŸ¥é›†
        # å…ˆå°†è¾¹ç•Œçš„Oå½’ä¸ºä¸€ç±», å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸å­˜åœ¨çš„ç‚¹ä½œä¸ºè¿™äº›è¾¹ç•ŒOå­—ç¬¦çš„å…±åŒç¥–å…ˆ
        # ç„¶åéå†éè¾¹ç•Œéƒ¨åˆ†, å°è¯•è¿é€š
        # æœ€ååˆ¤æ–­æ¯ä¸ªOå­—ç¬¦æ˜¯å¦å’Œè¾¹ç•ŒOå­—ç¬¦å¤„äºåŒä¸€é›†åˆå³å¯(ä½¿ç”¨findæ¯”è¾ƒå…¶ç¥–å…ˆæ˜¯å¦ç›¸ç­‰)
        if not board:
            return
        rows, cols = len(board), len(board[0])
        # æ ¸å¿ƒå¹¶æŸ¥é›†éƒ¨åˆ†, ç¨ä½œæ”¹åŠ¨å­˜(r,c)äºŒå…ƒç»„
        pre = {}

        def find(r, c):
            if (r, c) not in pre:
                pre[r, c] = (r, c)
            elif (r, c) != pre[r, c]:
                pr, pc = pre[r, c]
                pre[r, c] = find(pr, pc)
            return pre[r, c]

        def union(r1, c1, r2, c2):
            pr, pc = find(r1, c1)
            pre[pr, pc] = find(r2, c2)

        # å°†è¾¹ç•ŒOå­—ç¬¦å½’ä¸ºä¸€ç±», å³å’ŒåŒä¸€ä¸ªä¸å­˜åœ¨çš„ç‚¹è¿›è¡Œunion
        root = (rows, cols)
        for r in range(rows):
            for c in (0, cols-1):
                if board[r][c] == 'O':
                    # *è¡¨ç¤ºå‚æ•°å±•å¼€, å³æŠŠrootå…ƒç»„å±•å¼€åçš„å‚æ•°ä¾æ¬¡ä¼ å…¥æ–¹æ³•ä¸­, ä¸‹åŒ
                    union(r, c, *root)
        for c in range(cols):
            for r in (0, rows-1):
                if board[r][c] == 'O':
                    union(r, c, *root)

        # éå†å…¶ä»–å­—ç¬¦, å°è¯•è¿é€š
        for r in range(1, rows-1):
            for c in range(1, cols-1):
                if board[r][c] == 'O':
                    for (rr, cc) in ((r-1, c), (r+1, c), (r, c-1), (r, c+1)):
                        # æ‰¾å››ä¸ªæ–¹å‘çš„æœ‰æ•ˆOé‚»å±…, åˆå¹¶å®ƒä»¬
                        if 0 <= rr < rows and 0 <= cc < cols and board[rr][cc] == 'O':
                            union(r, c, rr, cc)
        for r in range(rows):
            for c in range(cols):
                # åªæŠŠæ²¡åœ¨è¾¹ç•ŒOå­—ç¬¦æ‰€åœ¨é›†åˆçš„Oæ”¹æˆX
                # ç‰¹åˆ«æ³¨æ„è¿™é‡Œä¸èƒ½ç›´æ¥å’Œrootæ¯”è¾ƒ! å› ä¸ºåœ¨è·¯å¾„å‹ç¼©æˆ–è€…unionçš„æ—¶å€™å¯èƒ½ä¼šæ›´æ”¹æœ€ç»ˆçš„ç¥–å…ˆ, æ‰€ä»¥ä¹Ÿéœ€è¦find(root)æ‰¾åˆ°æœ€ç»ˆç»Ÿä¸€çš„é‚£ä¸ªç¥–å…ˆ
                if board[r][c] == 'O' and find(r, c) != find(*root):
                    board[r][c] = 'X'
```

### æ–¹æ¡ˆ 2

#### æ€è·¯

- **åˆ†æ**
  - å›é¡¾æ–¹æ¡ˆ 1, æˆ‘ä»¬æ˜¯å°†æ‰€æœ‰è¿é€šçš„å—è¿›è¡Œåˆå¹¶æ¥æ±‚åŒºåŸŸä¸ªæ•°çš„
  - ä½†æˆ‘ä»¬ä¹Ÿå®Œå…¨å¯ä»¥ä»è¾¹ç•Œ O å‡ºå‘, BFS å¾—åˆ°æ‰€æœ‰è¿é€šçš„ O å³å¯, è¿™æ ·ç›¸æ¯”è€Œè¨€æ•ˆç‡æ›´é«˜
  - æˆ‘ä»¬åŒæ ·éœ€è¦ä¸€ä¸ª visit é›†åˆæ¥å­˜å‚¨è¾¹ç•Œæˆ–ä¸è¾¹ç•Œè¿é€šçš„ O, ä¸€æ˜¯ä¸ºäº†é¿å…é‡å¤éå†, äºŒæ˜¯æœ€åå¾ªç¯çš„æ—¶å€™å¯ä»¥æ ¹æ®å½“å‰çš„ O æ˜¯å¦åœ¨è¯¥é›†åˆä¸­åˆ¤æ–­å…¶æ˜¯å¦æ˜¯è¿é€š O
- **å®ç°**
  - ç»å…¸çš„ BFS ç®—æ³•, æ³¨æ„å­˜å‚¨çš„æ˜¯è¡Œåˆ—äºŒå…ƒç»„, ä»¥åŠåˆå§‹åŒ–çš„ q ä¸­å­˜æ‰€æœ‰è¾¹ç•Œ O çš„è¡Œåˆ—ä¸‹æ ‡, éå†é‚»å±…çš„æ—¶å€™åªè€ƒè™‘æœ‰æ•ˆçš„ O é‚»å±…
  - ä¸‹é¢ä»£ç ä¸­å¯¹ BFS éƒ¨åˆ†æœ‰è¯¦ç»†æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(RC): å› ä¸ºæœ‰ visit é›†åˆçš„å­˜åœ¨, æ¯ä¸ªç‚¹ä¸ä¼šè¢«é‡å¤éå†, æ‰€ä»¥æœ€ç»ˆå°±æ˜¯æŠŠæ¯ä¸ªç‚¹éƒ½éå†ä¸€éå°±èƒ½å¾—å‡ºç»“æœ, å¿½ç•¥å¸¸ç³»æ•°åæ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(RC), ç›¸æ¯”å¹¶æŸ¥é›†çš„æ–¹æ¡ˆä¼šå¿«ä¸€äº›
- ç©ºé—´å¤æ‚åº¦ O(RC): visit é›†åˆä¸­å­˜ `RC` ä¸ªå…ƒç´ 

#### ä»£ç 

```python
class Solution:
    def solve(self, board: List[List[str]]) -> None:
        """
        Do not return anything, modify board in-place instead.
        """
        # æ–¹æ³•2: ç»å…¸BFS, ä»¥æ‰€æœ‰è¾¹ç•Œçš„Oä¸ºèµ·ç‚¹, BFSéå†, éœ€è¦visité›†åˆæ¥å­˜å‚¨å·²ç»éå†è¿‡çš„å…ƒç´ 
        # ä¹‹åå¾ªç¯å°±åªæ”¹å˜ä¸åœ¨visité›†åˆçš„O, ä¹Ÿå³ä¸å’Œè¾¹ç•ŒOè¿é€šçš„O
        if not board:
            return
        q = []
        rows, cols = len(board), len(board[0])
        # å°†æ‰€æœ‰è¾¹ç•ŒOæ”¾åˆ°qä¸­
        for r in range(rows):
            for c in (0, cols-1):
                if board[r][c] == 'O':
                    q.append((r, c))
        for c in range(cols):
            for r in (0, rows-1):
                if board[r][c] == 'O':
                    q.append((r, c))
        # visit é›†åˆvåˆ¤æ–­å½“å‰å­—ç¬¦æ˜¯å¦è¢«è®¿é—®è¿‡
        v = set(q)
        for x in q:
            r, c = x
            for rr, cc in ((r+1, c), (r-1, c), (r, c+1), (r, c-1)):
                if 0 <= rr < rows and 0 <= cc < cols and board[rr][cc] == 'O' and (rr, cc) not in v:
                    # æ‰¾åˆ°æœ‰æ•ˆé‚»å±…äº†, åŠ å…¥qå’Œvä¸­
                    v.add((rr, cc))
                    q.append((rr, cc))
        for r in range(rows):
            for c in range(cols):
                # åªæ”¹å˜ä¸åœ¨visité›†åˆçš„å­—ç¬¦(æ„å‘³ç€æ²¡æœ‰å’Œè¾¹ç•ŒOè¿é€š)
                if board[r][c] == 'O' and (r, c) not in v:
                    board[r][c] = 'X'
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜, æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://mmbiz.qpic.cn/mmbiz_jpg/1KjZicMlYPMgZWmoL4eYcs6UcfmvsetDWME2YJyaCp9oT9z3U573FWENBNhyOByxYI0epew6O37hiaOhdh90QeJg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)
