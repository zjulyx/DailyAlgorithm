> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/minimum-cost-for-tickets/)

## é¢˜ç›®æè¿°

åœ¨ä¸€ä¸ªç«è½¦æ—…è¡Œå¾ˆå—æ¬¢è¿çš„å›½åº¦ï¼Œä½ æå‰ä¸€å¹´è®¡åˆ’äº†ä¸€äº›ç«è½¦æ—…è¡Œã€‚åœ¨æ¥ä¸‹æ¥çš„ä¸€å¹´é‡Œï¼Œä½ è¦æ—…è¡Œçš„æ—¥å­å°†ä»¥ä¸€ä¸ªåä¸º Â daysÂ  çš„æ•°ç»„ç»™å‡ºã€‚æ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªä» Â 1Â  åˆ° Â 365Â  çš„æ•´æ•°ã€‚

ç«è½¦ç¥¨æœ‰ä¸‰ç§ä¸åŒçš„é”€å”®æ–¹å¼ï¼š

1. ä¸€å¼ ä¸ºæœŸä¸€å¤©çš„é€šè¡Œè¯å”®ä»·ä¸º costs[0] ç¾å…ƒï¼›
2. ä¸€å¼ ä¸ºæœŸä¸ƒå¤©çš„é€šè¡Œè¯å”®ä»·ä¸º costs[1] ç¾å…ƒï¼›
3. ä¸€å¼ ä¸ºæœŸä¸‰åå¤©çš„é€šè¡Œè¯å”®ä»·ä¸º costs[2] ç¾å…ƒã€‚

é€šè¡Œè¯å…è®¸æ•°å¤©æ— é™åˆ¶çš„æ—…è¡Œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç¬¬ 2 å¤©è·å¾—ä¸€å¼ ä¸ºæœŸ 7 å¤©çš„é€šè¡Œè¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿ç€æ—…è¡Œ 7 å¤©ï¼šç¬¬ 2 å¤©ã€ç¬¬ 3 å¤©ã€ç¬¬ 4 å¤©ã€ç¬¬ 5 å¤©ã€ç¬¬ 6 å¤©ã€ç¬¬ 7 å¤©å’Œç¬¬ 8 å¤©ã€‚

è¿”å›ä½ æƒ³è¦å®Œæˆåœ¨ç»™å®šçš„åˆ—è¡¨ Â daysÂ  ä¸­åˆ—å‡ºçš„æ¯ä¸€å¤©çš„æ—…è¡Œæ‰€éœ€è¦çš„æœ€ä½æ¶ˆè´¹ã€‚

## é¢˜ç›®æ ·ä¾‹

### ç¤ºä¾‹ 1

#### è¾“å…¥

days = [1,4,6,7,8,20], costs = [2,7,15]

#### è¾“å‡º

11

#### è§£é‡Š

ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ç§è´­ä¹°é€šè¡Œè¯çš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ å®Œæˆä½ çš„æ—…è¡Œè®¡åˆ’ï¼š

1. åœ¨ç¬¬ 1 å¤©ï¼Œä½ èŠ±äº† costs[0] = \$2 ä¹°äº†ä¸€å¼ ä¸ºæœŸ 1 å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ 1 å¤©ç”Ÿæ•ˆã€‚
2. åœ¨ç¬¬ 3 å¤©ï¼Œä½ èŠ±äº† costs[1] = \$7 ä¹°äº†ä¸€å¼ ä¸ºæœŸ 7 å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ 3, 4, ..., 9 å¤©ç”Ÿæ•ˆã€‚
3. åœ¨ç¬¬ 20 å¤©ï¼Œä½ èŠ±äº† costs[0] = \$2 ä¹°äº†ä¸€å¼ ä¸ºæœŸ 1 å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ 20 å¤©ç”Ÿæ•ˆã€‚

ä½ æ€»å…±èŠ±äº† \$11ï¼Œå¹¶å®Œæˆäº†ä½ è®¡åˆ’çš„æ¯ä¸€å¤©æ—…è¡Œã€‚

### ç¤ºä¾‹ 2

#### è¾“å…¥

days = [1,2,3,4,5,6,7,8,9,10,30,31], costs = [2,7,15]

#### è¾“å‡º

17

#### è§£é‡Š

ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€ç§è´­ä¹°é€šè¡Œè¯çš„æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ å®Œæˆä½ çš„æ—…è¡Œè®¡åˆ’ï¼š

1. åœ¨ç¬¬ 1 å¤©ï¼Œä½ èŠ±äº† costs[2] = \$15 ä¹°äº†ä¸€å¼ ä¸ºæœŸ 30 å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ 1, 2, ..., 30 å¤©ç”Ÿæ•ˆã€‚
2. åœ¨ç¬¬ 31 å¤©ï¼Œä½ èŠ±äº† costs[0] = \$2 ä¹°äº†ä¸€å¼ ä¸ºæœŸ 1 å¤©çš„é€šè¡Œè¯ï¼Œå®ƒå°†åœ¨ç¬¬ 31 å¤©ç”Ÿæ•ˆã€‚

ä½ æ€»å…±èŠ±äº† \$17ï¼Œå¹¶å®Œæˆäº†ä½ è®¡åˆ’çš„æ¯ä¸€å¤©æ—…è¡Œã€‚

## é¢˜ç›®æ€è€ƒ

1. å¯¹äºæ¯ä¸€ä¸ªæ—…è¡Œæ—¥æœŸ, éƒ½æœ‰ä¸‰ç§æ–¹æ¡ˆå¯é€‰: 1 å¤©/7 å¤©/30 å¤©
2. å…·ä½“é€‰å“ªç§æ–¹æ¡ˆæœ€ä¼˜, åˆ™è¦è€ƒè™‘å‰é¢çš„æ—¥æœŸ, å› ä¸ºå‰é¢æ—¥æœŸå¯èƒ½ä¹°äº†å¤šæ—¥ç¥¨, è¦†ç›–åˆ°å½“å‰æ—¥æœŸçš„è¯, å½“å‰æ—¥æœŸå°±æ— éœ€é¢å¤–ä¹°äº†
3. è¿™ç§å¯¹ä¹‹å‰ç»“æœæœ‰ä¾èµ–çš„é—®é¢˜å¤§éƒ¨åˆ†éƒ½å¯ä»¥é‡‡ç”¨**åŠ¨æ€è§„åˆ’**æ¥è§£å†³

## è§£å†³æ–¹æ¡ˆ

### æ€è·¯

- åŠ¨æ€è§„åˆ’
- dp\[i\]è¡¨ç¤ºç¬¬ i å¤©çš„æœ€ä½ç¥¨ä»·
- é‚£ä¹ˆ dp\[i\] = min(dp\[i-1\]+costs[0], dp\[j\] + costs[1], dp\[k\] + costs[2]) (j å’Œ k åˆ†åˆ«æ˜¯ i ä¹‹å‰çš„æœ€æ¥è¿‘ i çš„æ—¥æœŸ, ä¸”ä¸ i çš„æ—¶é—´é—´éš”å¤§äºç­‰äº 7 å’Œ 30 çš„(è¡¨ç¤ºä¸åœ¨åŒä¸€åŒºé—´))
- ç»“æœå°±æ˜¯æœ€åä¸€ä¸ª dp å€¼å’¯
- (ä»£ç é‡Œæœ‰æ›´åŠ è¯¦ç»†çš„æ³¨é‡Š)

### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(N): éœ€è¦éå†æ¯ä¸€å¤©, ç„¶åä¹˜ä¸Šæœ€å¤§å¸¸ç³»æ•° 30
- ç©ºé—´å¤æ‚åº¦ O(N): éœ€è¦ç”³è¯·ä¸€ä¸ªé•¿åº¦å’Œæ—¥æœŸç›¸åŒçš„ dp æ•°ç»„

### ä»£ç 

#### Python 3

```python
class Solution:
    def mincostTickets(self, days: List[int], costs: List[int]) -> int:
        dp = []
        for i in range(len(days)):
            # å½“å‰æ—¥æœŸä¹°1å¤©ç¥¨çš„æƒ…å†µ
            mncost = costs[0] if i == 0 else dp[-1] + costs[0]
            # å½“å‰æ—¥æœŸä¹°äº†7å¤©æˆ–30å¤©ç¥¨çš„æƒ…å†µ
            # éœ€è¦æ‰¾åˆ°ä¹‹å‰çš„ä¸åœ¨å½“å‰æ—¶é—´çª—å£çš„æ—¥æœŸ
            for ci, duration in ((1, 7), (2, 30)):
                # ciè¡¨ç¤ºå½“å‰durationåœ¨costsæ•°ç»„çš„ä¸‹æ ‡
                for j in range(i)[::-1]:
                    if days[i] - days[j] >= duration:
                        # æ„å‘³ç€åœ¨ç¬¬jä¸ªæ—¥æœŸå’Œå½“å‰æ—¥æœŸä¸åœ¨åŒä¸€ä¸ªæ—¶é—´çª—å£å†…, å¦‚æœå½“å‰æ—¥æœŸæƒ³ä¹°è¿™ä¸ªæ—¶é—´çª—å£ç¥¨çš„è¯, å¿…é¡»åœ¨é‚£ä¸ªæ—¥æœŸåŸºç¡€ä¸ŠåŠ ä¸Šå½“å‰æ—¶é—´çª—å£çš„ä»·æ ¼
                        mncost = min(mncost, dp[j] + costs[ci])
                        break
                else:
                    # è¯´æ˜å‰é¢çš„æ‰€æœ‰æ—¥æœŸå’Œå½“å‰æ—¥æœŸéƒ½åœ¨åŒä¸€æ—¶é—´çª—å£å†…, ç›´æ¥ä¹°ä¸€å¼ ç¥¨å°±èƒ½å…¨éƒ¨è¦†ç›–
                    mncost = min(mncost, costs[ci])
            dp.append(mncost)
        return dp[-1]
```

#### C++

```cpp
classÂ SolutionÂ {
public:
Â Â Â Â intÂ mincostTickets(vector<int>&Â days,Â vector<int>&Â costs)Â {
Â Â Â Â Â Â Â Â intÂ num_daysÂ =Â days.size();
Â Â Â Â Â Â Â Â vector<int>Â dp(num_days,Â 0);
Â Â Â Â Â Â Â Â unordered_map<int,Â int>Â costs_mapÂ =Â {{1,Â 7},Â {2,Â 30}};

Â Â Â Â Â Â Â Â forÂ (intÂ iÂ =Â 0;Â iÂ <Â num_days;Â ++i)Â {
Â Â Â Â Â Â Â Â Â Â Â Â dp[i]Â =Â iÂ >Â 0Â ?Â (dp[i-1]Â +Â costs[0])Â :Â costs[0];

Â Â Â Â Â Â Â Â Â Â Â Â forÂ (auto&Â entryÂ :Â costs_map)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â boolÂ in_rangeÂ =Â true;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â autoÂ indexÂ =Â entry.first;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â autoÂ durationÂ =Â entry.second;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â forÂ (intÂ jÂ =Â i-1;Â jÂ >=Â 0;Â --j)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (days[i]Â -Â days[j]Â >=Â duration)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â dp[i]Â =Â min(dp[i],Â dp[j]Â +Â costs[index]);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â in_rangeÂ =Â false;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â break;
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ifÂ (in_range)Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â dp[i]Â =Â min(dp[i],Â costs[index]);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â returnÂ dp[num_days-1];
Â Â Â Â }
};
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„ç®€ä¹¦](https://www.jianshu.com/u/3a17f1fdfd67)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜, æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://mmbiz.qpic.cn/mmbiz_jpg/1KjZicMlYPMgZWmoL4eYcs6UcfmvsetDWME2YJyaCp9oT9z3U573FWENBNhyOByxYI0epew6O37hiaOhdh90QeJg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)
