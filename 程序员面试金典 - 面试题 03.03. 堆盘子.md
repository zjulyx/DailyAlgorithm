> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/stack-of-plates-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

å †ç›˜å­ã€‚è®¾æƒ³æœ‰ä¸€å †ç›˜å­ï¼Œå †å¤ªé«˜å¯èƒ½ä¼šå€’ä¸‹æ¥ã€‚å› æ­¤ï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼Œç›˜å­å †åˆ°ä¸€å®šé«˜åº¦æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šå¦å¤–å †ä¸€å †ç›˜å­ã€‚è¯·å®ç°æ•°æ®ç»“æ„ SetOfStacksï¼Œæ¨¡æ‹Ÿè¿™ç§è¡Œä¸ºã€‚SetOfStacks åº”è¯¥ç”±å¤šä¸ªæ ˆç»„æˆï¼Œå¹¶ä¸”åœ¨å‰ä¸€ä¸ªæ ˆå¡«æ»¡æ—¶æ–°å»ºä¸€ä¸ªæ ˆã€‚æ­¤å¤–ï¼ŒSetOfStacks.push()å’Œ SetOfStacks.pop()åº”è¯¥ä¸æ™®é€šæ ˆçš„æ“ä½œæ–¹æ³•ç›¸åŒï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œpop()è¿”å›çš„å€¼ï¼Œåº”è¯¥è·Ÿåªæœ‰ä¸€ä¸ªæ ˆæ—¶çš„æƒ…å†µä¸€æ ·ï¼‰ã€‚ è¿›é˜¶ï¼šå®ç°ä¸€ä¸ª popAt(int index)æ–¹æ³•ï¼Œæ ¹æ®æŒ‡å®šçš„å­æ ˆï¼Œæ‰§è¡Œ pop æ“ä½œã€‚

å½“æŸä¸ªæ ˆä¸ºç©ºæ—¶ï¼Œåº”å½“åˆ é™¤è¯¥æ ˆã€‚å½“æ ˆä¸­æ²¡æœ‰å…ƒç´ æˆ–ä¸å­˜åœ¨è¯¥æ ˆæ—¶ï¼Œpopï¼ŒpopAtÂ  åº”è¿”å› -1.

### ç¤ºä¾‹ 1:

- è¾“å…¥ï¼š
  ["StackOfPlates", "push", "push", "popAt", "pop", "pop"]
  [[1], [1], [2], [1], [], []]
- è¾“å‡ºï¼š
  [null, null, null, 2, 1, -1]

### ç¤ºä¾‹ 2:

- è¾“å…¥ï¼š
  ["StackOfPlates", "push", "push", "push", "popAt", "popAt", "popAt"]
  [[2], [1], [2], [3], [0], [0], [0]]
- è¾“å‡ºï¼š
  [null, null, null, null, 2, 1, 3]

## é¢˜ç›®æ€è€ƒ

1. éœ€è¦å­˜å‚¨å“ªäº›ä¿¡æ¯, å¦‚ä½•æ“ä½œ?

## è§£å†³æ–¹æ¡ˆ

### æ€è·¯

- æ ¹æ®é¢˜ç›®æè¿°, æˆ‘ä»¬å¯ä»¥ç›´æ¥æ„é€ å­˜å‚¨å¤šä¸ªæ ˆçš„æ•°ç»„, å¹¶éœ€è¦é¢å¤–ä¿å­˜æ ˆçš„ä¸Šé™
- push æ“ä½œ: å¦‚æœæ•°ç»„ä¸ºç©ºæˆ–æœ€åä¸€ä¸ªæ ˆæ»¡äº†, åˆ™æ–°å¢ä¸€ä¸ªæ ˆå¹¶å­˜å½“å‰å…ƒç´ , å¦åˆ™ç›´æ¥è¿½åŠ åˆ°æœ€åä¸€ä¸ªæ ˆä¸Š
- popAt æ“ä½œ: å…ˆåˆ¤æ–­ä¸‹æ ‡æ˜¯å¦æœ‰æ•ˆ, æ— æ•ˆè¿”å›-1, æœ‰æ•ˆæ—¶åˆ™ pop å¯¹åº”æ ˆçš„æ ˆé¡¶, å¦‚æœ pop åæ ˆä¸ºç©ºåˆ™ä»æ•°ç»„ä¸­ç§»é™¤è¿™ä¸ªæ ˆ
- pop æ“ä½œ: å¯ä»¥ç›´æ¥åˆ©ç”¨ popAt(len-1), ç®€åŒ–ä»£ç 

### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦
  - push å’Œ pop æ˜¾ç„¶æ˜¯ O(1)
  - popAt å¤§éƒ¨åˆ†æƒ…å†µä¹Ÿæ˜¯ O(1), åªæœ‰æ ˆå˜ç©ºåæ‰æ˜¯ O(N)
- ç©ºé—´å¤æ‚åº¦ `O(N)`
  - ä½¿ç”¨äº†è‹¥å¹²ä¸ªæ ˆå­˜ N ä¸ªå…ƒç´ 

### ä»£ç 

```python
class StackOfPlates:
    # ç®€å•æ¨¡æ‹Ÿ
    def __init__(self, cap: int):
        self.cap = cap
        self.stacks = []

    def push(self, val: int) -> None:
        # æ³¨æ„å¦‚æœcapä¸º0åˆ™ä¸èƒ½push
        if self.cap == 0:
            return
        if not self.stacks or len(self.stacks[-1]) == self.cap:
            # æ²¡æœ‰æ ˆæˆ–è€…æœ€åä¸€ä¸ªæ ˆæ»¡äº†æ—¶, éœ€è¦æ–°å¢åŠ ä¸€ä¸ªæ ˆ
            self.stacks.append([val])
        else:
            # æœ€åä¸€ä¸ªæ ˆä¸æ»¡, åˆ™å¯ä»¥ç›´æ¥è¿½åŠ 
            self.stacks[-1].append(val)

    def pop(self) -> int:
        # å¯ä»¥ç›´æ¥è°ƒç”¨popAt(len-1)
        return self.popAt(len(self.stacks) - 1)

    def popAt(self, index: int) -> int:
        if index < 0 or index >= len(self.stacks):
            # ä¸åˆæ³•çš„index, è¿”å›-1
            # æ³¨æ„è¿™é‡Œæ— éœ€åˆ¤æ–­å¯¹åº”indexçš„æ ˆæ˜¯å¦ä¸ºç©º, å› ä¸ºæŸä¸ªæ ˆpopåä¸ºç©ºçš„è¯ä¸€å®šä¼šè¢«åˆ é™¤, ä¸å¯èƒ½å­˜åœ¨ç©ºçš„æ ˆ
            return -1
        res = self.stacks[index].pop()
        if not self.stacks[index]:
            # å¦‚æœpopåæ ˆä¸ºç©ºçš„è¯, éœ€è¦åˆ é™¤è¿™ä¸ªæ ˆ
            del self.stacks[index]
        return res
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: ç®—æ³•ç²¾é€‰, æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://mmbiz.qpic.cn/mmbiz_jpg/1KjZicMlYPMgZWmoL4eYcs6UcfmvsetDWME2YJyaCp9oT9z3U573FWENBNhyOByxYI0epew6O37hiaOhdh90QeJg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)
