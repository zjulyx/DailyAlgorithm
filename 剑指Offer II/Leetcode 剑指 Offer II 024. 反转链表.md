> é¢˜ç›®éš¾åº¦: ç®€å•

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/3u1WK4)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¯·åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚

### ç¤ºä¾‹ 1ï¼š

![](https://assets.leetcode.com/uploads/2021/02/19/rev1ex1.jpg)

- è¾“å…¥ï¼šhead = [1,2,3,4,5]
- è¾“å‡ºï¼š[5,4,3,2,1]

### ç¤ºä¾‹ 2ï¼š

![](https://assets.leetcode.com/uploads/2021/02/19/rev1ex2.jpg)

- è¾“å…¥ï¼šhead = [1,2]
- è¾“å‡ºï¼š[2,1]

### ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼šhead = []
- è¾“å‡ºï¼š[]

### æç¤ºï¼š

- é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´æ˜¯ [0, 5000]
- -5000 <= Node.val <= 5000

## é¢˜ç›®æ€è€ƒ

1. å¦‚æœé™åˆ¶åªèƒ½ç”¨é€’å½’æˆ–è€…è¿­ä»£, å¦‚ä½•è§£å†³?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1

#### æ€è·¯

- é¦–å…ˆè€ƒè™‘è¿­ä»£åšæ³•, è¦åè½¬é“¾è¡¨, æˆ‘ä»¬è‡³å°‘éœ€è¦ä¸¤ä¸ªæŒ‡é’ˆæ‰èƒ½åšåˆ°, å¦åˆ™åè½¬çš„æ—¶å€™ä¸çŸ¥é“åº”è¯¥æŒ‡å‘å“ªé‡Œ
- æ‰€ä»¥ä¿å­˜å‰ä¸€ä¸ªèŠ‚ç‚¹ pre å’Œå½“å‰èŠ‚ç‚¹ cur, å¹¶è®°å½• cur çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ nex, æ¯æ¬¡éƒ½å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹, ç„¶å pre å’Œ cur éƒ½å¾€åç§»åŠ¨ä¸€ä½å³å¯ (å³ pre = cur, cur = nex)
- æ³¨æ„è¾¹ç•Œæ¡ä»¶: æ²¡æœ‰èŠ‚ç‚¹çš„æƒ…å†µ, ä»¥åŠå¯¹ head çš„ next çš„å¤„ç†

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N)`
  - åªéœ€è¦éå†ä¸€éé“¾è¡¨
- ç©ºé—´å¤æ‚åº¦ `O(1)`
  - åªéœ€è¦å¸¸æ•°ä¸ªå˜é‡

#### ä»£ç 

```python
class Solution:
    def reverseList(self, head: ListNode) -> ListNode:
        # æ–¹æ³•1: è¿­ä»£, åŒæŒ‡é’ˆ
        if not head:
            # é“¾è¡¨ä¸ºç©ºçš„è¯ç›´æ¥è¿”å›ç©º
            return head
        pre, cur = head, head.next
        # é¦–å…ˆheadå˜æˆäº†ç¿»è½¬åçš„æœ«å°¾, æ‰€ä»¥å…¶nextè¦ç½®ä¸ºç©º
        head.next = None
        while cur:
            # å…ˆå­˜ä¸‹curçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
            nex = cur.next
            # curçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘pre, å®Œæˆå½“å‰èŠ‚ç‚¹æŒ‡å‘çš„åè½¬
            cur.next = pre
            # æ›´æ–°preå’Œcur, åˆ†åˆ«æŒ‰ç…§åŸé“¾è¡¨é¡ºåºå¾€åç§»åŠ¨ä¸€ä½
            pre, cur = cur, nex
        # æœ€ç»ˆcurå°±æ˜¯ç©º, è€Œpreåˆ™æ˜¯åè½¬åçš„å¼€å¤´èŠ‚ç‚¹
        return pre
```

### æ–¹æ¡ˆ 2

#### æ€è·¯

- æ¥ä¸‹æ¥æˆ‘ä»¬è€ƒè™‘å¦‚ä½•ç”¨é€’å½’æ¥åšè¿™é“é¢˜
- å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå¾—åˆ°å½“å‰èŠ‚ç‚¹ä¹‹åçš„èŠ‚ç‚¹åè½¬åçš„é“¾è¡¨, é‚£ä¹ˆåªéœ€è¦å°†æ–°é“¾è¡¨çš„å°¾æŒ‡å‘å½“å‰èŠ‚ç‚¹, åŒæ—¶å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘ç©º, å°±å®Œæˆäº†å¯¹å½“å‰èŠ‚ç‚¹çš„åè½¬
- æ‰€ä»¥é¢å¤–å®šä¹‰ä¸€ä¸ªæ–¹æ³•, ä¼ å…¥å½“å‰èŠ‚ç‚¹, è¿”å›ä¸€ä¸ªäºŒå…ƒç»„: (åè½¬åçš„é“¾è¡¨å¤´, åè½¬åçš„é“¾è¡¨å°¾), ç„¶åæŒ‰ç…§ä¸Šè¿°æ“ä½œå³å¯

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N)`
  - æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦è®¿é—®ä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦ `O(N)`
  - é€’å½’çš„æ ˆçš„æ¶ˆè€—

#### ä»£ç 

```python
class Solution:
    def reverseList(self, head: ListNode) -> ListNode:
        # æ–¹æ³•2: é€’å½’ç‰ˆæœ¬1 - è¿”å›åè½¬åçš„å¤´å’Œå°¾
        def reverse(head):
            if not head:
                # ç©ºèŠ‚ç‚¹, åè½¬åçš„å¤´å’Œå°¾ä»ä¸ºç©º
                return (None, None)
            if not head.next:
                # åªæœ‰å•ç‹¬ä¸€ä¸ªèŠ‚ç‚¹, åè½¬åçš„å¤´å’Œå°¾ä»ä¸ºè‡ªèº«
                return (head, head)
            nextHead, nextTail = reverse(head.next)
            # å°†nextTailæŒ‡å‘head, headæŒ‡å‘ç©ºå³å¯
            head.next = None
            nextTail.next = head
            # æ–°çš„é“¾è¡¨å¤´ä»ä¸ºåŸæ¥çš„nextHead, å°¾åˆ™å˜äº†, å˜æˆhead
            return (nextHead, head)

        # æœ€åè¿”å›åè½¬é“¾è¡¨çš„å¤´å³å¯
        return reverse(head)[0]
```

### æ–¹æ¡ˆ 3

#### æ€è·¯

- å›é¡¾é€’å½’æ–¹æ¡ˆ 2, æˆ‘ä»¬ä¸ä»…éœ€è¦è¿”å›åè½¬åçš„é“¾è¡¨å¤´, ä¹Ÿéœ€è¦è¿”å›é“¾è¡¨å°¾. å¦‚æœå¯ä»¥åªè¿”å›å¤´, å°±ä¸éœ€è¦é¢å¤–å®šä¹‰æ–°æ–¹æ³•äº†
- æ³¨æ„åè½¬çš„è¿‡ç¨‹, å½“å‰èŠ‚ç‚¹çš„ next åœ¨ä¹‹åèŠ‚ç‚¹åè½¬ç»“æŸåå¯¹åº”çš„å°±æ˜¯åè½¬é“¾è¡¨çš„ç»“å°¾, ä¹Ÿå³æ–¹æ¡ˆ 2 çš„ nextTail, è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸€æ€§è´¨å»æ‰é“¾è¡¨å°¾è¿™ä¸€è¿”å›å€¼äº†
- è¯¥æ–¹æ¡ˆæ˜¯åŸºäºæ–¹æ¡ˆ 2 ä¼˜åŒ–æ¨å¯¼å¾—æ¥çš„, æ²¡æœ‰æ–¹æ¡ˆ 2 ç›´è§‚, ç†è§£èµ·æ¥ä¹Ÿæœ‰ä¸€äº›éš¾åº¦, ä½†èƒœåœ¨ä»£ç æ›´ç®€æ´

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N)`
  - æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦è®¿é—®ä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦ `O(N)`
  - é€’å½’çš„æ ˆçš„æ¶ˆè€—

#### ä»£ç 

```python
class Solution:
    def reverseList(self, head: ListNode) -> ListNode:
        # æ–¹æ³•3: é€’å½’ç‰ˆæœ¬2 - åªéœ€è¦è¿”å›åè½¬åçš„é“¾è¡¨å¤´
        if not head or not head.next:
            # ç©ºèŠ‚ç‚¹æˆ–è€…åªæœ‰è‡ªèº«ä¸€ä¸ªèŠ‚ç‚¹, ç›´æ¥è¿”å›è‡ªèº«å³å¯
            return head
        nextHead = self.reverseList(head.next)
        # head.nextå°±æ˜¯æ–¹æ³•2çš„nextTail
        head.next.next = head
        # æ³¨æ„æ­¤å¤„å¿…é¡»å…ˆåè½¬æŒ‡å‘, å†å°†head.nextç½®ä¸ºç©º
        head.next = None
        # æ–°çš„é“¾è¡¨å¤´ä»ä¸ºåŸæ¥çš„nextHead
        return nextHead
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
