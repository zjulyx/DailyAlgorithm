> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/7p8L0Z/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„æ•´æ•°é›†åˆ nums ï¼ŒæŒ‰ä»»æ„é¡ºåº è¿”å›å®ƒæ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

### ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šnums = [1,1,2]
- è¾“å‡ºï¼š[[1,1,2], [1,2,1], [2,1,1]]

### ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šnums = [1,2,3]
- è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]

### æç¤ºï¼š

- 1 <= nums.length <= 8
- -10 <= nums[i] <= 10

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•ä¿è¯ç»“æœä¸é‡å¤?
2. å¦‚æœé™åˆ¶åªèƒ½ç”¨é€’å½’æˆ–è€…è¿­ä»£, å¦‚ä½•è§£å†³?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1

#### æ€è·¯

- åˆ†æé¢˜ç›®, ä¸éš¾å‘ç°è¿™é“é¢˜å’Œä¸Šä¸€é“é¢˜([å‰‘æŒ‡ Offer II 083.å…¨æ’åˆ—](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484829&idx=1&sn=9b2a98affb9765bbaad4911653ea0337#rd))éå¸¸ç±»ä¼¼, åŒºåˆ«åªæ˜¯æ•°å­—å­˜åœ¨é‡å¤, é‚£èƒ½å¦ç»§ç»­ä½¿ç”¨ä¹‹å‰çš„åšæ³•å‘¢?
- å¯¹äºä¹‹å‰çš„æ–¹æ¡ˆ 1 é€’å½’åšæ³•, ç”±äºç°åœ¨æœ‰äº†é‡å¤æ•°å­—, é‚£ä¹ˆæœ€ç»ˆå½¢æˆçš„æ’åˆ—ä¹Ÿå¯èƒ½é‡å¤
- ä¾‹å¦‚`[1,3,1]`, å‡è®¾ä¸¤ä¸ª 1 åˆ†åˆ«å« a1 å’Œ b1, é‚£ä¹ˆ a1->b1->3 å’Œ b1->a1->3 å½¢æˆçš„æ’åˆ—å°±ä¼šé‡å¤, éƒ½æ˜¯`[1,1,3]`
- æ‰€ä»¥å¦‚æœç»§ç»­ç”¨é€’å½’, é‚£ä¹ˆéœ€è¦å°†å½¢æˆçš„æ’åˆ—è½¬æˆå…ƒç»„ (Python çš„åˆ—è¡¨ä¸èƒ½ä½œä¸ºé›†åˆæˆ–å­—å…¸çš„ key), ç„¶åæ·»åŠ åˆ°é›†åˆä¸­å»é‡, æœ€ç»ˆå†è½¬æˆåˆ—è¡¨è¿”å›, è¿™æ ·ä¼šå¢åŠ ä¸€äº›æ—¶é—´å¤æ‚åº¦, ä¸æ˜¯å¾ˆæ¨è, æœ‰æ²¡æœ‰æ›´å¥½çš„åšæ³•å‘¢?
- æ—¢ç„¶åœ¨ä¸åŒä½ç½®é€‰æ‹©ç›¸åŒçš„æ•°å­—ä¼šå¯¼è‡´é‡å¤, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†ç›¸åŒæ•°å­—èšåˆèµ·æ¥, å¯¹åº”çš„å°±æ˜¯è®¡æ•°å­—å…¸`{key:cnt}`
- ç„¶åé’ˆå¯¹å­—å…¸çš„æ¯ä¸ª key, åªè¦å®ƒçš„è®¡æ•°ä»å¤§äº 0, å°±å¯ä»¥ä½¿ç”¨å®ƒ, æˆ‘ä»¬ä¸å…³å¿ƒä½¿ç”¨çš„æ˜¯å…·ä½“å“ªä¸ªä½ç½®çš„æ•°å­—
- è¿™æ ·å°±è‡ªåŠ¨åšåˆ°äº†å»é‡, é’ˆå¯¹ä¸Šé¢çš„ä¾‹å­, å¦‚æœè¿ç€ç”¨ä¸¤æ¬¡ 1, é‚£ä¹ˆåªä¼šäº§ç”Ÿä¸€ä¸ªæ’åˆ—, å°±æ˜¯`[1,1,3]`
- å…¶ä½™éƒ¨åˆ†å°±å’Œä¸Šä¸€é“é¢˜éå¸¸ç±»ä¼¼äº†, æœ¬è´¨ä¸Šæ¥è¯´, ä¸Šä¸€é“é¢˜ç›¸å½“äºè¿™é“é¢˜çš„ç‰¹ä¾‹, æ¯ä¸ªæ•°å­—éƒ½å½¢æˆäº†è®¡æ•°ä¸º 1 çš„è®¡æ•°å­—å…¸
- æˆ‘ä»¬å¯ä»¥åŸºäºä¸Šè¿°åˆ†æè¿›è¡Œé€’å½’æ±‚è§£, å…·ä½“åšæ³•å¦‚ä¸‹:
  1. å°†åŸå§‹æ•°ç»„è½¬æ¢æˆè®¡æ•°å­—å…¸
  2. é’ˆå¯¹è®¡æ•°å­—å…¸çš„æ¯ä¸ª key, é€ä¸€éå†å®ƒä»¬
  3. å¦‚æœå½“å‰ key çš„è®¡æ•°å¤§äº 0, åˆ™å¯ä»¥ä½¿ç”¨å®ƒ, å°†å…¶è®¡æ•°å‡ 1 å¹¶è¿½åŠ åˆ°å½“å‰æ’åˆ—ä¸­, ç„¶åç»§ç»­é€’å½’
  4. å½“å‰ key çš„é€’å½’ç»“æŸå, éœ€è¦å°†è®¡æ•°åŠ  1, æ¢å¤åˆ°åŸå§‹çŠ¶æ€, ä»£è¡¨è¿™æ¬¡å…ˆä¸ä½¿ç”¨å®ƒ, è€Œæ˜¯ç»§ç»­éå†ä¸‹ä¸€ä¸ª key
  5. æœ€åå½“å¾—åˆ°çš„æ’åˆ—çš„é•¿åº¦ç­‰äºåŸå§‹æ•°ç»„é•¿åº¦æ—¶ç»“æŸé€’å½’, æ­¤æ—¶å°±å½¢æˆäº†ä¸€ä¸ªæœ‰æ•ˆä¸”ä¸é‡å¤çš„æ’åˆ—
- ä¸‹é¢çš„ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N!)`: æœ€å·®æƒ…å†µä¸‹ N ä¸ªæ•°å­—å„ä¸ç›¸åŒ, æ’åˆ—å°±æœ‰ `N!` ç§
- ç©ºé—´å¤æ‚åº¦ `O(N)`: è®¡æ•°å­—å…¸å’Œ key åˆ—è¡¨éœ€è¦å­˜å‚¨æœ€å¤š N ä¸ªå…ƒç´ , è€Œé€’å½’æ ˆåœ¨æœ€å·®æƒ…å†µä¸‹é•¿åº¦åŒæ ·æ˜¯ N

#### ä»£ç 

##### Python 3

```python
class Solution:
    def permuteUnique(self, nums: List[int]) -> List[List[int]]:
        # æ–¹æ³•1: è®¡æ•°å­—å…¸+dfs(perm)
        res = []
        # å°†åŸå§‹æ•°ç»„è½¬æ¢æˆè®¡æ•°å­—å…¸
        cnts = collections.Counter(nums)

        def dfs(perm):
            if len(perm) == len(nums):
                # å½“å‰æ’åˆ—é•¿åº¦ç­‰äºåŸå§‹æ•°ç»„é•¿åº¦, å°†å…¶åŠ å…¥æœ€ç»ˆç»“æœä¸­
                res.append(perm)
                return
            for key in cnts:
                if cnts[key] > 0:
                    # å½“å‰keyçš„è®¡æ•°å¤§äº0, å¯ä»¥è¿½åŠ åˆ°æ’åˆ—ä¸­
                    # å…ˆå°è¯•è¿½åŠ å½“å‰key, å°†å…¶è®¡æ•°å‡1å¹¶è¿½åŠ åˆ°å½“å‰æ’åˆ—ä¸­
                    cnts[key] -= 1
                    dfs(perm + [key])
                    # å°†å…¶è®¡æ•°æ¢å¤, ä»£è¡¨æš‚ä¸è¿½åŠ å½“å‰key
                    cnts[key] += 1

        # åˆå§‹æ’åˆ—æ˜¯ç©ºçš„, åœ¨é€’å½’è¿‡ç¨‹ä¸­ä¼šé€æ­¥å¾€é‡Œé¢åŠ æ•°å­—
        dfs([])
        return res
```

### æ–¹æ¡ˆ 2

#### æ€è·¯

- æ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•ç”¨è¿­ä»£çš„æ€è·¯æ¥è§£å†³, å¯¹äº [å‰‘æŒ‡ Offer II 083.å…¨æ’åˆ—](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484829&idx=1&sn=9b2a98affb9765bbaad4911653ea0337#rd) çš„æ–¹æ¡ˆ 2 è¿­ä»£åšæ³•, ç”±äºæ¯æ¬¡æ–°çš„æ’åˆ—éƒ½æ˜¯å¤§äºå½“å‰æ’åˆ—ä¸”æœ€æ¥è¿‘å®ƒçš„, æ‰€æœ‰æ’åˆ—ä¾æ¬¡é€’å¢, è¿™æ ·å¤©ç„¶åšåˆ°äº†å»é‡, æ‰€ä»¥æˆ‘ä»¬ç›´æ¥å¯ä»¥å¤ç”¨å®ƒ
- è¿™é‡Œæˆ‘æŠŠç›¸åŒçš„æ€è·¯è´´è¿‡æ¥äº†, æ–¹ä¾¿å¤§å®¶å‚è€ƒ
- æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæ–¹æ³•, æ¥æ±‚æŒ‰é¡ºåºçš„ä¸‹ä¸€ä¸ªæ’åˆ—, ä¾‹å¦‚`[1,2,3]->[1,3,2]->[2,1,3]->[2,3,1]->[3,1,2]->[3,2,1]`, è¿™æ ·å°±èƒ½ä¿è¯å¾—åˆ°æ¯ä¸ªä¸é‡å¤çš„æ’åˆ—
- å…ˆå°†ç»™å®šæ•°ç»„æŒ‰å‡åºæ’åº, ç„¶åå½“éå†åˆ°çš„æ’åˆ—å˜æˆé™åºæ’åºçš„æ—¶å€™, å°±è¯´æ˜æ‰€æœ‰æ’åˆ—éƒ½è¢«æ‰¾åˆ°äº†
- æ‰€ä»¥ç®—æ³•çš„æ ¸å¿ƒå°±æ˜¯å¦‚ä½•é€šè¿‡ä¸€ä¸ªæ’åˆ—æ‰¾å®ƒæŒ‰é¡ºåºçš„ä¸‹ä¸€ä¸ªæ’åˆ—
- ä¸‹ä¸€ä¸ªæ’åˆ—ä¸€å®šæ˜¯æ‰€æœ‰æ’åˆ—ä¸­å¤§äºå½“å‰æ’åˆ—ä¸”æœ€æ¥è¿‘å®ƒçš„, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è´ªå¿ƒç®—æ³•, å…·ä½“æ­¥éª¤å¦‚ä¸‹:
  1. ä»åå‘å‰æ‰¾ç¬¬ä¸€ä¸ª**å°äºåä¸€ä¸ªæ•°å­—**çš„ä¸‹æ ‡ i (å› ä¸ºå¦‚æœå¤§äºç­‰äºåä¸€ä¸ªæ•°å­—çš„è¯, å°±æ²¡æ³•ä¸åé¢çš„æ•°å­—äº¤æ¢æ¥ä½¿å¾—æ•´ä½“æ’åˆ—æ›´å¤§äº†)
  2. æ‰¾åˆšæ‰éå†çš„éƒ¨åˆ†çš„å¤§äºä¸”æœ€æ¥è¿‘ä¸‹æ ‡ i å¯¹åº”æ•°å­—çš„ä¸‹æ ‡ j
  3. å°†å®ƒä»¬ä¸¤ä¸ªäº’æ¢
  4. ç„¶å i å¾€åçš„éƒ¨åˆ†éƒ½æŒ‰å‡åºæ’åˆ—, ä¹Ÿå³å°†è¿™éƒ¨åˆ†é€†åº (å› ä¸ºç°åœ¨è¿™éƒ¨åˆ†æ˜¯é™åºæ’åºçš„)
- è¿™æ ·å°±ä¿è¯äº†æ–°çš„æ’åˆ—ä¸€å®šæ˜¯å¤§äºå½“å‰æ’åˆ—ä¸”æœ€æ¥è¿‘å®ƒçš„, ä¸å¯èƒ½æœ‰æ›´å°çš„äº†
- ä¸‹é¢çš„ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N*N!)`: N ä¸ªæ•°å­—å„ä¸ç›¸åŒ, æ’åˆ—å°±æœ‰ `N!` ç§, ä»å½“å‰æ’åˆ—è½¬å…¥ä¸‹ä¸€ä¸ªæ’åˆ—éœ€è¦ `O(N)` æ—¶é—´
- ç©ºé—´å¤æ‚åº¦ `O(1)`: åªä½¿ç”¨äº†å‡ ä¸ªå¸¸æ•°ç©ºé—´çš„å˜é‡ (ä¸è€ƒè™‘è¾“å‡ºç»“æœé›†)

#### ä»£ç 

##### Python 3

```python
class Solution:
    def permuteUnique(self, nums: List[int]) -> List[List[int]]:
        # æ–¹æ³•2: è¿­ä»£getNext
        res = []
        n = len(nums)

        def getNext(nums):
            for i in range(n - 1)[::-1]:
                # ä»åå‘å‰æŸ¥æ‰¾
                if nums[i] < nums[i + 1]:
                    # æ‰¾åˆ°ç›®æ ‡æ•°å­—äº†, æ¥ä¸‹æ¥æ‰¾åé¢éƒ¨åˆ†ä¸­å¤§äºnums[i]ä¸”æœ€æ¥è¿‘å®ƒçš„æ•°å­—
                    j = i + 1
                    while j < n and nums[j] > nums[i]:
                        j += 1
                    # æ­¤æ—¶nums[j]<=nums[i], å°†å®ƒå‡1åçš„nums[j]å°±æ˜¯åé¢éƒ¨åˆ†ä¸­å¤§äºnums[i]ä¸”æœ€æ¥è¿‘å®ƒçš„æ•°å­—, å®ƒéœ€è¦å’Œnums[i]äº’æ¢
                    j -= 1
                    # å•ç‹¬æ‹¿å‡ºæ–°çš„å³è¾¹éƒ¨åˆ†(å·²ç»å°†ä¸‹æ ‡iå’Œjäº’æ¢äº†), è‚¯å®šä¸¥æ ¼æŒ‰ç…§é™åºæ’åˆ—
                    right = nums[i + 1 : j] + [nums[i]] + nums[j + 1 :]
                    # å°†ä¸‰éƒ¨åˆ†æ‹¼æ¥èµ·æ¥, æ³¨æ„å³è¾¹éƒ¨åˆ†è¦é€†åº, è¿™æ ·å°±å˜æˆå‡åºæ’åˆ—
                    return nums[:i] + [nums[j]] + right[::-1]
            # æ²¡æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ’åˆ—, è¯´æ˜å½“å‰æ’åˆ—å°±æ˜¯é¡ºåºæœ€å¤§çš„äº†, ç›´æ¥è¿”å›None
            return None

        # å…ˆæ‹¿åˆ°é¡ºåºæœ€å°çš„æ’åˆ—
        nums.sort()
        while nums:
            res.append(nums)
            nums = getNext(nums)
        return res
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
