> 题目难度: 中等

> [原题链接](https://leetcode.cn/problems/JEj789/)

> 今天继续更新 Leetcode 的剑指 Offer（专项突击版）系列, 大家在公众号 **算法精选** 里回复 `剑指offer2` 就能看到该系列当前连载的所有文章了, 记得关注哦~

## 题目描述

假如有一排房子，共 n 个，每个房子可以被粉刷成红色、蓝色或者绿色这三种颜色中的一种，你需要粉刷所有的房子并且使其相邻的两个房子颜色不能相同。

当然，因为市场上不同颜色油漆的价格不同，所以房子粉刷成不同颜色的花费成本也是不同的。每个房子粉刷成不同颜色的花费是以一个 n x 3 的正整数矩阵 costs 来表示的。

例如，costs[0][0] 表示第 0 号房子粉刷成红色的成本花费；costs[1][2] 表示第 1 号房子粉刷成绿色的花费，以此类推。

请计算出粉刷完所有房子最少的花费成本。

### 示例 1：

- 输入: costs = [[17,2,17],[16,16,5],[14,3,19]]
- 输出: 10
- 解释: 将 0 号房子粉刷成蓝色，1 号房子粉刷成绿色，2 号房子粉刷成蓝色。最少花费: 2 + 5 + 3 = 10。

### 示例 2：

- 输入: costs = [[7,6,2]]
- 输出: 2

### 提示:

- costs.length == n
- costs[i].length == 3
- 1 <= n <= 100
- 1 <= costs[i][j] <= 20

## 题目思考

1. 如何尽可能优化时间和空间复杂度?

## 解决方案

- 分析题目, 相邻房子的颜色不能相同, 其关系非常明确, 可以尝试动态规划的思路
- 我们可以存储将当前房子 i 染成红/蓝/绿颜色时的最小成本, 这里分为三种情况:
  1. 如果染成红色, 则前一个房子 i-1 只能染成蓝/绿色
  2. 如果染成蓝色, 则前一个房子 i-1 只能染成红/绿色
  3. 如果染成绿色, 则前一个房子 i-1 只能染成红/蓝色
- 用数学语言来表示, 假设`dp[i][0]`/`dp[i][1]`/`dp[i][2]`分别代表将第 i 个房子染成红/蓝/绿颜色时的最小成本, 那么就有:
  - `dp[i][0]=max(dp[i-1][1], dp[i-1][2])+cost[i][0]`
  - `dp[i][1]=max(dp[i-1][0], dp[i-1][2])+cost[i][1]`
  - `dp[i][2]=max(dp[i-1][0], dp[i-1][1])+cost[i][2]`
- 由于当前 dp 值只和前面一个 dp 值有关, 所以我们可以只使用三个变量 `r`, `b` 和 `g`, 分别代表当前房子染成红/蓝/绿颜色时的最小成本, 从而进一步优化空间复杂度
- 然后根据上面转移方程得到各自新的最小成本`nr`, `nb` 和 `ng`, 滚动替换之前的`r`, `b` 和 `g`, 最终结果就是三个 dp 值的较小值
- 下面的代码中有详细的注释, 方便大家理解

#### 复杂度

- 时间复杂度 `O(N)`: 需要遍历整个数组一遍
- 空间复杂度 `O(1)`: 只需要几个常数空间的变量

#### 代码

```python
class Solution:
    def minCost(self, costs: List[List[int]]) -> int:
        # 三变量滚动DP
        # 当前房子刷成三种颜色的最小成本
        r, b, g = 0, 0, 0
        for cr, cb, cg in costs:
            # 每种颜色都可以从前一状态的不同颜色的较小成本转换而来
            nr = min(b, g) + cr
            nb = min(r, g) + cb
            ng = min(r, b) + cg
            # 滚动更新dp值
            r, b, g = nr, nb, ng
        # 最终结果就是三种成本的最小值
        return min(r, b, g)
```

---

> 大家可以在下面这些地方找到我~😊

> [我的 GitHub](https://github.com/zjulyx)

> [我的 Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [我的 CSDN](https://me.csdn.net/zjulyx1993)

> [我的知乎专栏](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [我的头条号](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [我的牛客网博客](https://blog.nowcoder.net/zjulyx)

> 我的公众号: [算法精选](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), 欢迎大家扫码关注~😊

![算法精选 - 微信扫一扫关注我](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
