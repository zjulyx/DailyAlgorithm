> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/zlDJc7/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ä¸€ä¸ªå¯†ç é”ç”± 4 ä¸ªç¯å½¢æ‹¨è½®ç»„æˆï¼Œæ¯ä¸ªæ‹¨è½®éƒ½æœ‰ 10 ä¸ªæ•°å­—ï¼š '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' ã€‚æ¯ä¸ªæ‹¨è½®å¯ä»¥è‡ªç”±æ—‹è½¬ï¼šä¾‹å¦‚æŠŠ '9' å˜ä¸º '0'ï¼Œ'0' å˜ä¸º '9' ã€‚æ¯æ¬¡æ—‹è½¬éƒ½åªèƒ½æ—‹è½¬ä¸€ä¸ªæ‹¨è½®çš„ä¸€ä½æ•°å­—ã€‚

é”çš„åˆå§‹æ•°å­—ä¸º '0000' ï¼Œä¸€ä¸ªä»£è¡¨å››ä¸ªæ‹¨è½®çš„æ•°å­—çš„å­—ç¬¦ä¸²ã€‚

åˆ—è¡¨ deadends åŒ…å«äº†ä¸€ç»„æ­»äº¡æ•°å­—ï¼Œä¸€æ—¦æ‹¨è½®çš„æ•°å­—å’Œåˆ—è¡¨é‡Œçš„ä»»ä½•ä¸€ä¸ªå…ƒç´ ç›¸åŒï¼Œè¿™ä¸ªé”å°†ä¼šè¢«æ°¸ä¹…é”å®šï¼Œæ— æ³•å†è¢«æ—‹è½¬ã€‚

å­—ç¬¦ä¸² target ä»£è¡¨å¯ä»¥è§£é”çš„æ•°å­—ï¼Œè¯·ç»™å‡ºè§£é”éœ€è¦çš„æœ€å°æ—‹è½¬æ¬¡æ•°ï¼Œå¦‚æœæ— è®ºå¦‚ä½•ä¸èƒ½è§£é”ï¼Œè¿”å› -1 ã€‚

### ç¤ºä¾‹ 1:

- è¾“å…¥ï¼šdeadends = ["0201","0101","0102","1212","2002"], target = "0202"
- è¾“å‡ºï¼š6
- è§£é‡Šï¼š
  - å¯èƒ½çš„ç§»åŠ¨åºåˆ—ä¸º "0000" -> "1000" -> "1100" -> "1200" -> "1201" -> "1202" -> "0202"ã€‚
  - æ³¨æ„ "0000" -> "0001" -> "0002" -> "0102" -> "0202" è¿™æ ·çš„åºåˆ—æ˜¯ä¸èƒ½è§£é”çš„ï¼Œå› ä¸ºå½“æ‹¨åŠ¨åˆ° "0102" æ—¶è¿™ä¸ªé”å°±ä¼šè¢«é”å®šã€‚

### ç¤ºä¾‹ 2:

- è¾“å…¥: deadends = ["8888"], target = "0009"
- è¾“å‡ºï¼š1
- è§£é‡Šï¼š
  - æŠŠæœ€åä¸€ä½åå‘æ—‹è½¬ä¸€æ¬¡å³å¯ "0000" -> "0009"ã€‚

### ç¤ºä¾‹ 3:

- è¾“å…¥: deadends = ["8887","8889","8878","8898","8788","8988","7888","9888"], target = "8888"
- è¾“å‡ºï¼š-1
- è§£é‡Šï¼š
  - æ— æ³•æ—‹è½¬åˆ°ç›®æ ‡æ•°å­—ä¸”ä¸è¢«é”å®šã€‚

### ç¤ºä¾‹ 4:

- è¾“å…¥: deadends = ["0000"], target = "8888"
- è¾“å‡ºï¼š-1

### æç¤ºï¼š

- 1 <= deadends.length <= 500
- deadends[i].length == 4
- target.length == 4
- target ä¸åœ¨ deadends ä¹‹ä¸­
- target å’Œ deadends[i] ä»…ç”±è‹¥å¹²ä½æ•°å­—ç»„æˆ

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•æ±‚æœ€å°æ—‹è½¬æ¬¡æ•°?
2. å¦‚ä½•å¤„ç† deadends?

## è§£å†³æ–¹æ¡ˆ

- åˆ†æé¢˜ç›®, è¦æ±‚'0000'åˆ° target çš„æœ€å°æ—‹è½¬æ¬¡æ•°, æˆ‘ä»¬å¯ä»¥å°è¯• BFS, åªæ˜¯éœ€è¦é¢å¤–è€ƒè™‘ deadends:
  - æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ— q è®°å½•å½“å‰éœ€è¦éå†çš„å¯†ç , å¹¶ä½¿ç”¨ä¸€ä¸ªé›†åˆ v è®°å½•å·²ç»éå†è¿‡çš„å¯†ç , ä¸”åˆå§‹åŒ–æ—‹è½¬æ¬¡æ•° cnt ä¸º 1
  - ç„¶åä» '0000' å‡ºå‘, å°†å…¶åŠ å…¥é˜Ÿåˆ— q å’Œé›†åˆ v ä¸­
  - æ¥ä¸‹æ¥å¼€å§‹ BFS çš„æ¯è½®éå†: åˆå§‹åŒ–ä¸€ä¸ªæ–°é˜Ÿåˆ— nq, å¯¹äºå½“å‰é˜Ÿåˆ— q çš„å¯†ç , éå†å¯†ç çš„æ¯ä¸ªä½ç½®çš„æ•°å­— digit, å°†å…¶æ›¿æ¢æˆç›¸é‚»çš„æ•°å­—(å³ digit-1 å’Œ digit+1, 0 çš„å‰ä¸€ä½æ˜¯ 9, 9 çš„åä¸€ä½æ˜¯ 0, æ‰€ä»¥å¢å‡åéœ€è¦å¯¹ 10 å–æ¨¡), ä»è€Œç»„æˆæ–°çš„å¯†ç , å¦‚æœæŸä¸ªå¯†ç ä¸åœ¨å·²éå†é›†åˆ v ä¸­, ä¸”ä¸åœ¨ deadends ä¸­, åˆ™å°†å…¶åŠ å…¥æ–°é˜Ÿåˆ— nq å’Œé›†åˆ v ä¸­, ç­‰å¾…ä¸‹æ¬¡éå†
  - ç­‰åˆ°å½“å‰é˜Ÿåˆ— q éå†ç»“æŸå, æ—‹è½¬æ•°ç›® cnt åŠ  1, å¹¶å°†æ–°é˜Ÿåˆ— nq èµ‹å€¼ç»™å½“å‰é˜Ÿåˆ— q, å¼€å§‹æ–°ä¸€è½®çš„éå†, ç›´åˆ° q æ²¡æœ‰å¯†ç ä¸ºæ­¢
  - åœ¨éå†è¿‡ç¨‹ä¸­, å¦‚æœ q çš„å¯†ç æ°å¥½ç­‰äº target, åˆ™è¯´æ˜æ‰¾åˆ°äº†æœ€çŸ­æ—‹è½¬åºåˆ—, ç›´æ¥è¿”å›å½“å‰æ—‹è½¬æ¬¡æ•° cnt å³å¯
  - å¦‚æœç›´åˆ°éå†ç»“æŸéƒ½æ²¡å¾—åˆ° target, åˆ™è¯´æ˜ä¸å­˜åœ¨è¿™æ ·çš„æ—‹è½¬åºåˆ—, è¿”å› -1
- å›é¡¾ä¸Šè¿°è¿‡ç¨‹, å¯ä»¥å‘ç°: å½“æˆ‘ä»¬åœ¨åˆ¤æ–­æ–°çš„å¯†ç æ˜¯å¦æœ‰æ•ˆæ—¶, æˆ‘ä»¬éœ€è¦åŒæ—¶åˆ¤æ–­å®ƒæ˜¯å¦åœ¨å·²éå†é›†åˆ v å’Œ deadends ä¸­, æˆ‘ä»¬å®Œå…¨å¯ä»¥å°†ä¸¤è€…åˆäºŒä¸ºä¸€, åˆšå¼€å§‹å°±æŠŠæ‰€æœ‰ deadends åŒ…å«çš„å¯†ç åŠ å…¥ v é›†åˆä¸­, è¿™æ ·åç»­åªéœ€è¦åˆ¤æ–­ v é›†åˆå³å¯
- ä¸‹é¢çš„ä»£ç å¯¹å¿…è¦æ­¥éª¤æœ‰è¯¦ç»†çš„è§£é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N+10^4*4*4)`: N æ˜¯ deadends åŒ…å«çš„å¯†ç æ•°ç›®, å°†å…¶åŠ å…¥ v é›†åˆæ—¶éœ€è¦ `O(N)` æ—¶é—´, åç»­çš„ BFS æœ€å·®æƒ…å†µä¸‹éœ€è¦éå† 4 ä½ 10 è¿›åˆ¶çš„æ‰€æœ‰å¯†ç , ç„¶åç”Ÿæˆæ–°å¯†ç æ—¶, éœ€è¦éå†æ¯ä¸€ä½, ç„¶åå†æ‹¼æ¥, æ‰€ä»¥è¿™éƒ¨åˆ†æ˜¯`O(10^4*4*4)`
- ç©ºé—´å¤æ‚åº¦ `O(N+10^4*4)`: é˜Ÿåˆ—å’Œé›†åˆå ç”¨çš„ç©ºé—´

#### ä»£ç 

```python
class Solution:
    def openLock(self, deadends: List[str], target: str) -> int:
        # å…ˆå°†deadendsè½¬æˆvisité›†åˆ, è¿™é‡Œé¢çš„æ•°å­—ä¸èƒ½è¢«éå†
        v = set(deadends)
        start = "0000"
        if start in v:
            # èµ·ç‚¹å±äºdeadends, æ— æ³•æ—‹è½¬
            return -1

        def getNext(s):
            # è¿”å›så¯ä»¥æ—‹è½¬å¾—åˆ°çš„æ•°å­—
            for i in range(len(s)):
                cur_digit = int(s[i])
                for nex_digit in ((cur_digit - 1 + 10) % 10, (cur_digit + 1) % 10):
                    # å½“å‰ä½å¯ä»¥å‡1, ä¹Ÿå¯ä»¥åŠ 1, æ³¨æ„0å‡1å¾—åˆ°9, 9åŠ 1å¾—åˆ°0, éœ€è¦å¯¹10å–æ¨¡
                    yield s[:i] + str(nex_digit) + s[i + 1 :]

        # æŒ‰å±‚BFS
        q = [start]
        v.add(start)
        # åˆå§‹åŒ–æ—‹è½¬æ¬¡æ•°ä¸º0
        cnt = 0
        while q:
            nq = []
            for cur in q:
                if cur == target:
                    # æ‰¾åˆ°targetäº†, è¿”å›å½“å‰cnt, å®ƒä¸€å®šæ˜¯æœ€å°æ—‹è½¬æ¬¡æ•°
                    return cnt
                for nex in getNext(cur):
                    if nex not in v:
                        # å¦‚æœnexå°šæœªéå†, åˆ™å¯ä»¥éå†å®ƒ, å°†å…¶åŠ å…¥visité›†åˆå’Œæ–°çš„é˜Ÿåˆ—ä¸­, ç­‰å¾…åç»­å¤„ç†
                        v.add(nex)
                        nq.append(nex)
            cnt += 1
            q = nq
        # å°è¯•äº†æ‰€æœ‰æ—‹è½¬éƒ½æ²¡æ³•å¾—åˆ°target, è¿”å›-1
        return -1
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
