> é¢˜ç›®éš¾åº¦: ç®€å•

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/jBjn9C/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

è®¾è®¡ä¸€ä¸ªæ‰¾åˆ°æ•°æ®æµä¸­ç¬¬ k å¤§å…ƒç´ çš„ç±»ï¼ˆclassï¼‰ã€‚æ³¨æ„æ˜¯æ’åºåçš„ç¬¬ k å¤§å…ƒç´ ï¼Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚

è¯·å®ç° KthLargest ç±»ï¼š

- KthLargest(int k, int[] nums) ä½¿ç”¨æ•´æ•° k å’Œæ•´æ•°æµ nums åˆå§‹åŒ–å¯¹è±¡ã€‚
- int add(int val) å°† val æ’å…¥æ•°æ®æµ nums åï¼Œè¿”å›å½“å‰æ•°æ®æµä¸­ç¬¬ k å¤§çš„å…ƒç´ ã€‚

### ç¤ºä¾‹ï¼š

- è¾“å…¥ï¼š
  - ["KthLargest", "add", "add", "add", "add", "add"]
  - [[3, [4, 5, 8, 2]], [3], [5], [10], [9], [4]]
- è¾“å‡ºï¼š
  - [null, 4, 5, 5, 8, 8]
- è§£é‡Šï¼š
  - KthLargest kthLargest = new KthLargest(3, [4, 5, 8, 2]);
  - kthLargest.add(3); // return 4
  - kthLargest.add(5); // return 5
  - kthLargest.add(10); // return 5
  - kthLargest.add(9); // return 8
  - kthLargest.add(4); // return 8

### æç¤ºï¼š

- 1 <= k <= 10^4
- 0 <= nums.length <= 10^4
- -10^4 <= nums[i] <= 10^4
- -10^4 <= val <= 10^4
- æœ€å¤šè°ƒç”¨ add æ–¹æ³• 10^4 æ¬¡
- é¢˜ç›®æ•°æ®ä¿è¯ï¼Œåœ¨æŸ¥æ‰¾ç¬¬ k å¤§å…ƒç´ æ—¶ï¼Œæ•°ç»„ä¸­è‡³å°‘æœ‰ k ä¸ªå…ƒç´ 

## é¢˜ç›®æ€è€ƒ

1. å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, ä¸€ä¸ªå¾ˆå®¹æ˜“æƒ³åˆ°çš„æ€è·¯å°±æ˜¯ä½¿ç”¨ä¸€ä¸ªæœ‰åºæ•°ç»„, æ·»åŠ æ–°æ•°å­—æ—¶ä»ä¿è¯æœ‰åºæ€§, è¿™æ ·å€’æ•°ç¬¬ k ä¸ªå…ƒç´ å³ä¸ºæ‰€æ±‚
- ä¸è¿‡è¿™ç§æ–¹æ³•éœ€è¦ç»´æŠ¤æ‰€æœ‰æ•°å­—, é¢˜ç›®åªè¦æ±‚ç¬¬ k å¤§çš„, æœ‰æ²¡æœ‰æ›´ä¼˜çš„æ–¹æ³•å‘¢?
- ç¬¬ k é—®é¢˜é€šå¸¸éƒ½å¯ä»¥å°è¯•ç”¨å †/ä¼˜å…ˆé˜Ÿåˆ—æ¥è§£å†³, è¿™é“é¢˜ä¹Ÿä¸ä¾‹å¤–
- å¦‚æœæˆ‘ä»¬åªå­˜æœ€å¤§çš„ k ä¸ªæ•°å­—åˆ°ä¸€ä¸ªæœ€å°å †ä¸­, é‚£ä¹ˆåªéœ€è¿”å›å †é¡¶å³å¯, æ— éœ€å­˜å‚¨æ‰€æœ‰æ•°å­—
- è¿™å°±å¼•å‡ºäº†ä¸‹é¢çš„æ€è·¯:
  - ç»´æŠ¤ä¸€ä¸ªæœ€å°å †, æ·»åŠ æ–°æ•°å­—æ—¶ç›´æ¥åŠ å…¥å †ä¸­, åŠ å…¥åå¦‚æœå †ä¸­å…ƒç´ è¶…è¿‡äº† k, å°±æŠŠå †é¡¶å¼¹å‡º
  - ç”±äºæ˜¯æœ€å°å †, ä¸Šè¿°æ“ä½œä¿è¯äº†å †ä¸­å…ƒç´ æ­£æ˜¯å½“å‰æœ€å¤§çš„ k ä¸ªæ•°å­—, æ›´å°çš„éƒ½è¢«å¼¹å‡ºå»äº†
  - æ­¤æ—¶å †é¡¶å°±æ˜¯ç¬¬ k å¤§çš„å…ƒç´ , ç›´æ¥è¿”å›å †é¡¶å³å¯
- ä¸‹é¢ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(logk): æ¯æ¬¡ add æ“ä½œéƒ½æ˜¯æ“ä½œæœ€å¤š k ä¸ªå…ƒç´ çš„æœ€å°å †, æ‰€ä»¥æ˜¯ O(logk)
- ç©ºé—´å¤æ‚åº¦ O(k): æœ€å°å †å­˜å‚¨æœ€å¤š k ä¸ªå…ƒç´ 

#### ä»£ç 

```python
class KthLargest:
    def __init__(self, k: int, nums: List[int]):
        # æœ€å°å †
        self.q = []
        self.k = k
        for x in nums:
            # è¿™é‡Œç›´æ¥åˆ©ç”¨å®ç°å¥½çš„addæ–¹æ³•å°±è¡Œ
            self.add(x)

    def add(self, val: int) -> int:
        # å°†å½“å‰å€¼åŠ å…¥æœ€å°å †
        heapq.heappush(self.q, val)
        if len(self.q) > self.k:
            # æœ€å°å †çš„å…ƒç´ æ•°ç›®è¶…è¿‡äº†k, å¼¹å‡ºå †é¡¶æœ€å°å€¼
            heapq.heappop(self.q)
        # æ­¤æ—¶å †ä¸­å­˜å‚¨çš„å°±æ˜¯æ•°æ®æµçš„æœ€å¤§kä¸ªæ•°, è€Œå †é¡¶å°±æ˜¯ç¬¬kå¤§çš„
        return self.q[0]
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
