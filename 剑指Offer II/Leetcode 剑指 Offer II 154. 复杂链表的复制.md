> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/er-cha-shu-zhong-he-wei-mou-yi-zhi-de-lu-jing-lcof/description/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

è¯·å®ç° copyRandomList å‡½æ•°ï¼Œå¤åˆ¶ä¸€ä¸ªå¤æ‚é“¾è¡¨ã€‚åœ¨å¤æ‚é“¾è¡¨ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰ä¸€ä¸ª next æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ª random æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­çš„ä»»æ„èŠ‚ç‚¹æˆ–è€… nullã€‚

### ç¤ºä¾‹ 1ï¼š

![](https://assets.leetcode.cn/aliyun-lc-upload/uploads/2020/01/09/e1.png)

- è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]
- è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]

### ç¤ºä¾‹ 2ï¼š

![](https://assets.leetcode.cn/aliyun-lc-upload/uploads/2020/01/09/e2.png)

- è¾“å…¥ï¼šhead = [[1,1],[2,1]]
- è¾“å‡ºï¼š[[1,1],[2,1]]

### ç¤ºä¾‹ 3ï¼š

![](https://assets.leetcode.cn/aliyun-lc-upload/uploads/2020/01/09/e3.png)

- è¾“å…¥ï¼šhead = [[3,null],[3,0],[3,null]]
- è¾“å‡ºï¼š[[3,null],[3,0],[3,null]]

### ç¤ºä¾‹ 4ï¼š

- è¾“å…¥ï¼šhead = []
- è¾“å‡ºï¼š[]
- è§£é‡Šï¼šç»™å®šçš„é“¾è¡¨ä¸ºç©ºï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œå› æ­¤è¿”å› nullã€‚

æç¤ºï¼š

- -10000 <= Node.val <= 10000
- Node.random ä¸ºç©ºï¼ˆnullï¼‰æˆ–æŒ‡å‘é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ã€‚
- èŠ‚ç‚¹æ•°ç›®ä¸è¶…è¿‡ 1000 ã€‚

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•å¤„ç† random æŒ‡é’ˆ?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- å¦‚æœåªæœ‰ next æŒ‡é’ˆçš„è¯å¾ˆç®€å•, æˆ‘ä»¬åªéœ€è¦å¯¹æ¯ä¸ªèŠ‚ç‚¹æ–°å»ºä¸€ä¸ªç›¸åŒå€¼çš„èŠ‚ç‚¹, å¹¶ä¿æŒæŒ‡å‘å…³ç³», é€ä¸ªéå†è¿‡å»å³å¯
- ç°åœ¨å¤šäº†ä¸ª random æŒ‡é’ˆ, æƒ³è¦å®šä½æ–°çš„æŒ‡å‘çš„èŠ‚ç‚¹, ä¸€ä¸ªæ¯”è¾ƒè‡ªç„¶çš„æƒ³æ³•å°±æ˜¯é¢å¤–ç»´æŠ¤ä¸€ä¸ªè€èŠ‚ç‚¹åˆ°æ–°èŠ‚ç‚¹çš„æ˜ å°„å…³ç³», å¯ä»¥ç”¨å­—å…¸æ¥å®ç°
- ç¬¬ä¸€ééå†, å°±åªå…³æ³¨ next éƒ¨åˆ†, å¹¶å»ºç«‹å¥½æ˜ å°„å…³ç³»
- ç¬¬äºŒééå†, è€ƒè™‘ random éƒ¨åˆ†, æ‰¾åˆ°å¯¹åº”çš„æ–°é“¾è¡¨çš„èŠ‚ç‚¹, ç„¶åå½“å‰èŠ‚ç‚¹çš„ random æŒ‡é’ˆæŒ‡å‘å®ƒå³å¯

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N)`
  - æ¯ä¸ªèŠ‚ç‚¹åªéœ€è¦éå†ä¸¤æ¬¡
- ç©ºé—´å¤æ‚åº¦ `O(N)`
  - é¢å¤–éœ€è¦ä¸€ä¸ªå­—å…¸

#### ä»£ç 

```python
class Solution:
    def copyRandomList(self, head: 'Node') -> 'Node':
        if not head:
            return None
        maps = {}
        # ç¬¬ä¸€ééå†, å»ºç«‹æ–°çš„é“¾è¡¨, ä»¥åŠè€èŠ‚ç‚¹åˆ°æ–°èŠ‚ç‚¹çš„æ˜ å°„å…³ç³»
        copyHead = Node(head.val)
        origin, copy = head, copyHead
        maps[origin] = copy
        while origin.next:
            # æ–°å»ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹, å¹¶å»ºç«‹nextå…³ç³»
            copy.next = Node(origin.next.val)
            origin = origin.next
            copy = copy.next
            maps[origin] = copy
        # ç¬¬äºŒééå†, å¤„ç†randomæŒ‡é’ˆéƒ¨åˆ†
        origin, copy = head, copyHead
        while origin:
            if origin.random:
                # å¦‚æœè€èŠ‚ç‚¹randomæŒ‡é’ˆæŒ‡å‘éç©ºçš„è¯, å°±å°†å½“å‰æ–°èŠ‚ç‚¹ä¹ŸæŒ‡å‘éšæœºèŠ‚ç‚¹å¯¹åº”çš„æ–°èŠ‚ç‚¹
                copy.random = maps[origin.random]
            origin = origin.next
            copy = copy.next
        return copyHead
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
