> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/shu-de-zi-jie-gou-lcof/description/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸¤æ£µäºŒå‰æ ‘ tree1 å’Œ tree2ï¼Œåˆ¤æ–­ tree2 æ˜¯å¦ä»¥ tree1 çš„æŸä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘å…·æœ‰ ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ ã€‚
æ³¨æ„ï¼Œç©ºæ ‘ ä¸ä¼šæ˜¯ä»¥ tree1 çš„æŸä¸ªèŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘å…·æœ‰ ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ ã€‚

### ç¤ºä¾‹ 1ï¼š

![](https://pic.leetcode.cn/1694684670-vwyIgY-two_tree.png)

- è¾“å…¥ï¼štree1 = [1,7,5], tree2 = [6,1]
- è¾“å‡ºï¼šfalse
- è§£é‡Šï¼štree2 ä¸ tree1 çš„ä¸€ä¸ªå­æ ‘æ²¡æœ‰ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚

### ç¤ºä¾‹ 2ï¼š

![](https://pic.leetcode.cn/1694685602-myWXCv-two_tree_2.png)

- è¾“å…¥ï¼štree1 = [3,6,7,1,8], tree2 = [6,1]
- è¾“å‡ºï¼štrue
- è§£é‡Šï¼štree2 ä¸ tree1 çš„ä¸€ä¸ªå­æ ‘æ‹¥æœ‰ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚å³ 6 - > 1ã€‚

### æç¤ºï¼š

0 <= èŠ‚ç‚¹ä¸ªæ•° <= 10000

## é¢˜ç›®æ€è€ƒ

1. å­ç»“æ„æœ‰å“ªäº›æ€§è´¨?

## è§£å†³æ–¹æ¡ˆ

### æ€è·¯

- åˆ†æé¢˜ç›®, B æ˜¯ A çš„å­ç»“æ„çš„è¯, é‚£ä¹ˆ B çš„èŠ‚ç‚¹ç»“æ„éœ€è¦å®Œå…¨æ˜¯ A çš„æŸä¸€éƒ¨åˆ†, è€Œä¸”è¯¥éƒ¨åˆ†ä¸­çš„ä¸€éƒ¨åˆ†å­æ ‘å¯ä»¥ä¸åœ¨ B ä¸­(ä¾‹å¦‚é¢˜ç›®ä¸­ A çš„ 2 å·èŠ‚ç‚¹å°±ä¸åœ¨ B ä¸­)
- æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é¢å¤–å®šä¹‰ä¸€ä¸ªæ–¹æ³•, æ¥é€’å½’æ¯”è¾ƒå½“å‰ A å’Œ B èŠ‚ç‚¹æ˜¯å¦æ»¡è¶³å­ç»“æ„å…³ç³»
- ç„¶åä» A å’Œ B çš„æ ¹èŠ‚ç‚¹å¼€å§‹è°ƒç”¨è¯¥æ–¹æ³•, å¦‚æœå½“å‰æ»¡è¶³æ¡ä»¶å°±ç›´æ¥è¿”å› true, å¦åˆ™å°±å°† A ç§»åŠ¨åˆ°å…¶å·¦å³å­èŠ‚ç‚¹ä½ç½®, é‡æ–°ä¸ B çš„æ ¹èŠ‚ç‚¹æ¯”è¾ƒå³å¯
- ä¸‹é¢ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(MN)`
  - å‡è®¾ A å’Œ B çš„èŠ‚ç‚¹æ•°ç›®åˆ†åˆ«æ˜¯ M å’Œ N, é‚£ä¹ˆæœ€å·®æƒ…å†µæ˜¯å¯¹äºæ¯ä¸ª A èŠ‚ç‚¹, éƒ½è¦è°ƒç”¨ä¸€æ¬¡ match æ–¹æ³•éå†æ•´ä¸ª B æ ‘, æ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ `O(MN)`
- ç©ºé—´å¤æ‚åº¦ `O(M)`
  - isSubStructure é€’å½’è°ƒç”¨åˆ™æœ€å¤šä½¿ç”¨ `O(M)` é€’å½’æ ˆç©ºé—´, match é€’å½’è°ƒç”¨ä½¿ç”¨ `O(min(M, N))` é€’å½’æ ˆç©ºé—´, æ‰€ä»¥æ•´ä½“ç©ºé—´å¤æ‚åº¦ä¸º `O(M)`

### ä»£ç 

```python
class Solution:
    def isSubStructure(self, A: TreeNode, B: TreeNode) -> bool:
        if not A or not B:
            # æ ¹æ®é¢˜æ„, Bå¦‚æœæ˜¯ç©ºæ ‘ä¸€å®šä¸æ»¡è¶³æ¡ä»¶, è€ŒAæ˜¯ç©ºæ ‘çš„è¯Bæ›´ä¸å¯èƒ½æ˜¯å…¶å­ç»“æ„äº†
            return False

        def match(a, b):
            if not b:
                # å› ä¸ºAçš„å­æ ‘éƒ¨åˆ†å¯ä»¥æœ‰éƒ¨åˆ†èŠ‚ç‚¹æ˜¯Bæ²¡æœ‰çš„, æ‰€ä»¥å¦‚æœå½“å‰bèŠ‚ç‚¹æ˜¯ç©ºçš„è¯æ˜¯æ»¡è¶³æ¡ä»¶çš„æƒ…å†µ, ç›´æ¥è¿”å›true
                return True
            if not a:
                # æ­¤æ—¶bèŠ‚ç‚¹è¿˜æœ‰å€¼, ä½†aèŠ‚ç‚¹æ˜¯ç©ºäº†, Bä¸å¯èƒ½æ˜¯Açš„å­ç»“æ„
                return False
            # æ—¢è¦å½“å‰aå’Œbçš„å€¼ç›¸ç­‰, åŒæ—¶å„è‡ªå·¦å³å­æ ‘éƒ¨åˆ†ä¹Ÿè¦åŒ¹é…
            return a.val == b.val and match(a.left, b.left) and match(
                a.right, b.right)

        # Bæ˜¯Açš„å­ç»“æ„çš„å……è¦æ¡ä»¶: è¦ä¹ˆå½“å‰Aå’ŒBåŒ¹é…, è¦ä¹ˆAçš„å·¦å³å­èŠ‚ç‚¹å’ŒBåŒ¹é…
        return match(A, B) or self.isSubStructure(
            A.left, B) or self.isSubStructure(A.right, B)
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
