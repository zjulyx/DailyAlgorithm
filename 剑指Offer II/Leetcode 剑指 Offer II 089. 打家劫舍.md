> 题目难度: 中等

> [原题链接](https://leetcode.cn/problems/Gu0c2T/)

> 今天继续更新 Leetcode 的剑指 Offer（专项突击版）系列, 大家在公众号 **算法精选** 里回复 `剑指offer2` 就能看到该系列当前连载的所有文章了, 记得关注哦~

## 题目描述

一个专业的小偷，计划偷窃沿街的房屋。每间房内都藏有一定的现金，影响小偷偷窃的唯一制约因素就是相邻的房屋装有相互连通的防盗系统，如果两间相邻的房屋在同一晚上被小偷闯入，系统会自动报警。

给定一个代表每个房屋存放金额的非负整数数组 nums ，请计算 不触动警报装置的情况下 ，一夜之内能够偷窃到的最高金额。

### 示例 1：

- 输入：nums = [1,2,3,1]
- 输出：4
- 解释：偷窃 1 号房屋 (金额 = 1) ，然后偷窃 3 号房屋 (金额 = 3)。
  - 偷窃到的最高金额 = 1 + 3 = 4 。

### 示例 2：

- 输入：nums = [2,7,9,3,1]
- 输出：12
- 解释：偷窃 1 号房屋 (金额 = 2), 偷窃 3 号房屋 (金额 = 9)，接着偷窃 5 号房屋 (金额 = 1)。
  - 偷窃到的最高金额 = 2 + 9 + 1 = 12 。

### 提示：

- 1 <= nums.length <= 100
- 0 <= nums[i] <= 400

## 题目思考

1. 偷窃第 n 个房屋的最大金额可以根据什么得出?

## 解决方案

- 分析题目, 每次只能偷不相邻的房屋, 否则就会触动警报装置, 也就是相邻房屋之间的关系非常明确, 可以尝试动态规划的思路
- 我们可以存储从开头偷窃到当前房屋 i 的最大金额, 这里分为两种情况:
  1. 如果偷窃房屋 i, 那么不能偷窃房屋 i-1, 只能从房屋 i-2 那里转移过来
  2. 如果不偷窃房屋 i, 那么可以从房屋 i-1 那里转移过来
- 用数学语言来表示: 假设`dp[i]`代表到达偷窃到第 i 个房屋的最大金额, 那么就有`dp[i]=max(dp[i-1], dp[i-2]+nums[i])`
- 由于当前 dp 值只和前面两个 dp 值有关, 所以我们可以只使用两个变量 `pre` 和 `ppre`, 分别代表当前下标的前一个和更前一个下标的 dp 值 `dp[n-1]` 和 `dp[n-2]`.
- 然后当前的 dp 值就更新为`pre`和`ppre+nums[i]`的较大值
- 最后更新`ppre`和`pre`, 分别更新为旧的`pre`和当前 dp 值, 用于下一个 dp 值的计算
- 而最终结果就是`pre`, 代表偷窃到最后一间房屋能得到的最大金额
- 下面的代码中有详细的注释, 方便大家理解

#### 复杂度

- 时间复杂度 `O(N)`: 需要遍历整个数组一遍
- 空间复杂度 `O(1)`: 只需要几个常数空间的变量

#### 代码

```python
class Solution:
    def rob(self, nums: List[int]) -> int:
        # 初始化ppre和pre都为0, 代表没偷时的金额
        ppre, pre = 0, 0
        for x in nums:
            # 当前dp值是ppre+x和pre的较大值
            # 然后滚动更新ppre和pre
            ppre, pre = pre, max(pre, ppre + x)
        # 最终结果就是pre, 最后一个dp值
        return pre
```

---

> 大家可以在下面这些地方找到我~😊

> [我的 GitHub](https://github.com/zjulyx)

> [我的 Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [我的 CSDN](https://me.csdn.net/zjulyx1993)

> [我的知乎专栏](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [我的头条号](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [我的牛客网博客](https://blog.nowcoder.net/zjulyx)

> 我的公众号: [算法精选](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), 欢迎大家扫码关注~😊

![算法精选 - 微信扫一扫关注我](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
