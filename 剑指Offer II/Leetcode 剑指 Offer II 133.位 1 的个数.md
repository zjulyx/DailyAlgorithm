> é¢˜ç›®éš¾åº¦: ç®€å•

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ˆä»¥äºŒè¿›åˆ¶ä¸²çš„å½¢å¼ï¼‰ï¼Œè¿”å›å…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­æ•°å­—ä½æ•°ä¸º '1' çš„ä¸ªæ•°ï¼ˆä¹Ÿè¢«ç§°ä¸º æ±‰æ˜é‡é‡).ï¼‰ã€‚

æç¤ºï¼š

è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“æ‚¨çš„å®ç°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚
åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨ äºŒè¿›åˆ¶è¡¥ç  è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ ç¤ºä¾‹ 3 ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -3ã€‚

### ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šn = 11 (æ§åˆ¶å°è¾“å…¥ 00000000000000000000000000001011)
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000000000000000000000000001011 ä¸­ï¼Œå…±æœ‰ä¸‰ä½ä¸º '1'ã€‚

### ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šn = 128 (æ§åˆ¶å°è¾“å…¥ 00000000000000000000000010000000)
- è¾“å‡ºï¼š1
- è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000000000000000000000010000000 ä¸­ï¼Œå…±æœ‰ä¸€ä½ä¸º '1'ã€‚

### ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼šn = 4294967293 (æ§åˆ¶å°è¾“å…¥ 11111111111111111111111111111101ï¼Œéƒ¨åˆ†è¯­è¨€ä¸­ n = -3ï¼‰
- è¾“å‡ºï¼š31
- è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 11111111111111111111111111111101 ä¸­ï¼Œå…±æœ‰ 31 ä½ä¸º '1'ã€‚

### æç¤ºï¼š

- è¾“å…¥å¿…é¡»æ˜¯é•¿åº¦ä¸º 32 çš„ äºŒè¿›åˆ¶ä¸² ã€‚

## é¢˜ç›®æ€è€ƒ

1. å¯ä»¥ä½¿ç”¨å“ªäº›ä½è¿ç®—?
2. ä¸ç”¨ä½è¿ç®—å¯ä»¥å—?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1 & 2 - ç›´æ¥ç»Ÿè®¡ 1 çš„ä¸ªæ•°

#### åˆ†æ

- æœ€ç›´è§‚çš„æ€è·¯å°±æ˜¯ç›´æ¥ç»Ÿè®¡äºŒè¿›åˆ¶æ•°å­—é‡Œ 1 çš„ä¸ªæ•°

#### å®ç°

1. æ–¹æ¡ˆ 1: è½¬æˆäºŒè¿›åˆ¶å­—ç¬¦ä¸²ç»Ÿè®¡'1'çš„ä¸ªæ•°
2. æ–¹æ¡ˆ 2: ç§»ä½, æ ¹æ®æœ€ä½ä½æ˜¯å¦ä¸º 1 æ¥ç»Ÿè®¡. æ³¨æ„é¢˜ç›®æ˜¯ 32 ä½æ•´æ•°, æ‰€ä»¥é™åˆ¶ç§»ä½æ¬¡æ•°ä¸º 32 æ¬¡, é¿å…è´Ÿæ•°çš„é«˜ä½ä¸€ç›´ä¸º 1 å³å¯

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(logN)`
  - æ•°å­— N çš„ä½æ•°ä¸º`logN`, éœ€è¦éå†è¿™ä¹ˆå¤šæ¬¡
- ç©ºé—´å¤æ‚åº¦ `O(1)`
  - åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡

#### ä»£ç 

##### æ–¹æ¡ˆ 1: è½¬äºŒè¿›åˆ¶å­—ç¬¦ä¸²ç»Ÿè®¡ 1

```python
class Solution:
    def hammingWeight(self, n: int) -> int:
        # æ–¹æ³•1: è½¬äºŒè¿›åˆ¶å­—ç¬¦ä¸²ç»Ÿè®¡1
        return bin(n).count('1')
```

##### æ–¹æ¡ˆ 2: å¾ªç¯ç§»ä½ç»Ÿè®¡ 1

```python
class Solution:
    def hammingWeight(self, n: int) -> int:
        # æ–¹æ³•2: å¾ªç¯ç§»ä½ç»Ÿè®¡1
        res = 0
        for i in range(32):
            if n == 0:
                break
            res += n & 1
            n >>= 1
        return res
```

### æ–¹æ¡ˆ 3 & 4 - åˆ©ç”¨ä½è¿ç®—ç»Ÿè®¡ 1 çš„ä¸ªæ•°

#### åˆ†æ

- å¦‚æœæˆ‘ä»¬èƒ½ç›´æ¥å®šä½åˆ° 1, ç„¶åæ¯æ¬¡éƒ½æŠŠå·²ç»ç»Ÿè®¡çš„ 1 æ’é™¤æ‰çš„è¯, å°±åªéœ€è¦æ“ä½œ 1 çš„ä¸ªæ•°æ¬¡, è€Œä¸éœ€è¦éå†æ‰€æœ‰ä½äº†

#### å®ç°

1. æ–¹æ¡ˆ 3: åˆ©ç”¨ `n & (n-1)`. å¤§å®¶å¯ä»¥æƒ³è±¡ä¸€ä¸‹ n-1 åœ¨äºŒè¿›åˆ¶ä¸Šæ‰€åšçš„æ“ä½œ: å…¶å®å°±æ˜¯æŠŠ n çš„æœ€ä½ä¸€ä½çš„ 1 è½¬æˆ 0, ç„¶ååé¢çš„ 0 éƒ½è½¬æˆ 1, é«˜ä½ä¿æŒä¸å˜, è¿™æ ·å®ƒä»¬çš„ `&` å€¼è‡ªç„¶å°±ä¼šå»æ‰æœ€ä½ä½çš„ 1. è¿™æ ·å¾ªç¯æ“ä½œ, æœ€ç»ˆå°±ä¼šå»æ‰æ‰€æœ‰ 1, å¾—åˆ° 0, æ“ä½œçš„æ¬¡æ•°ä¹Ÿå³ 1 çš„ä¸ªæ•°äº†.
2. æ–¹æ¡ˆ 4: åˆ©ç”¨ `n & -n`. ç†Ÿæ‚‰æ ‘çŠ¶æ•°ç»„çš„åŒå­¦å¯èƒ½ä¼šæ¯”è¾ƒæ¸…æ¥šè¿™ä¸ªè¡¨è¾¾å¼, è¿™ä¸ªå°±æ˜¯ lowbit. é€šä¿—ç‚¹è¯´å®ƒç›¸æ¯” n, åªä¿ç•™æœ€ä½ä½çš„ 1, å…¶ä»–ä½å…¨æ¸… 0. è¿™ä¸ªåŒæ ·å¯ä»¥æ ¹æ® `-n` çš„äºŒè¿›åˆ¶å«ä¹‰å¾—å‡º, è¡¥ç ä¸åŸæ•°çš„ `&` çš„ç»“æœä¼šæ­£å¥½åªç•™æœ€ä½ä½çš„ 1. ç„¶åå°† n å‡å»è¿™ä¸ª lowbit, å°±ç­‰äºå»æ‰äº†ä¸€ä¸ª 1, å¾ªç¯æœ€ç»ˆä¼šå¾—åˆ° 0, æ“ä½œçš„æ¬¡æ•°ä¹Ÿå³ 1 çš„ä¸ªæ•°äº†.

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(M)`
  - è®¾æ•°å­—æœ‰ `M` ä½ 1, éœ€è¦éå†è¿™ä¹ˆå¤šæ¬¡
- ç©ºé—´å¤æ‚åº¦ `O(1)`
  - åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡

#### ä»£ç 

##### æ–¹æ¡ˆ 3: n &= n - 1

```python
class Solution:
    def hammingWeight(self, n: int) -> int:
        # æ–¹æ³•3: n &= n - 1
        res = 0
        while n:
            n &= n - 1
            res += 1
        return res
```

##### æ–¹æ¡ˆ 4: n -= n & -n

```python
class Solution:
    def hammingWeight(self, n: int) -> int:
        # æ–¹æ³•4: n -= n & -n
        res = 0
        while n:
            n -= n & -n
            res += 1
        return res
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
