> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/UhWRSj/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

åœ¨è‹±è¯­ä¸­ï¼Œæœ‰ä¸€ä¸ªå«åš è¯æ ¹(root) çš„æ¦‚å¿µï¼Œå®ƒå¯ä»¥è·Ÿç€å…¶ä»–ä¸€äº›è¯ç»„æˆå¦ä¸€ä¸ªè¾ƒé•¿çš„å•è¯â€”â€”æˆ‘ä»¬ç§°è¿™ä¸ªè¯ä¸º ç»§æ‰¿è¯(successor)ã€‚ä¾‹å¦‚ï¼Œè¯æ ¹ anï¼Œè·Ÿéšç€å•è¯ other(å…¶ä»–)ï¼Œå¯ä»¥å½¢æˆæ–°çš„å•è¯ another(å¦ä¸€ä¸ª)ã€‚

ç°åœ¨ï¼Œç»™å®šä¸€ä¸ªç”±è®¸å¤šè¯æ ¹ç»„æˆçš„è¯å…¸å’Œä¸€ä¸ªå¥å­ï¼Œéœ€è¦å°†å¥å­ä¸­çš„æ‰€æœ‰ç»§æ‰¿è¯ç”¨è¯æ ¹æ›¿æ¢æ‰ã€‚å¦‚æœç»§æ‰¿è¯æœ‰è®¸å¤šå¯ä»¥å½¢æˆå®ƒçš„è¯æ ¹ï¼Œåˆ™ç”¨æœ€çŸ­çš„è¯æ ¹æ›¿æ¢å®ƒã€‚

éœ€è¦è¾“å‡ºæ›¿æ¢ä¹‹åçš„å¥å­ã€‚

### ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šdictionary = ["cat","bat","rat"], sentence = "the cattle was rattled by the battery"
- è¾“å‡ºï¼š"the cat was rat by the bat"

### ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šdictionary = ["a","b","c"], sentence = "aadsfasf absbs bbab cadsfafs"
- è¾“å‡ºï¼š"a a b c"

### ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼šdictionary = ["a", "aa", "aaa", "aaaa"], sentence = "a aa a aaaa aaa aaa aaa aaaaaa bbb baba ababa"
- è¾“å‡ºï¼š"a a a a a a a a bbb baba a"

### ç¤ºä¾‹ 4ï¼š

- è¾“å…¥ï¼šdictionary = ["catt","cat","bat","rat"], sentence = "the cattle was rattled by the battery"
- è¾“å‡ºï¼š"the cat was rat by the bat"

### ç¤ºä¾‹ 5ï¼š

- è¾“å…¥ï¼šdictionary = ["ac","ab"], sentence = "it is abnormal that this solution is accepted"
- è¾“å‡ºï¼š"it is ab that this solution is ac"

### æç¤ºï¼š

- 1 <= dictionary.length <= 1000
- 1 <= dictionary[i].length <= 100
- dictionary[i] ä»…ç”±å°å†™å­—æ¯ç»„æˆã€‚
- 1 <= sentence.length <= 10^6
- sentence ä»…ç”±å°å†™å­—æ¯å’Œç©ºæ ¼ç»„æˆã€‚
- sentence ä¸­å•è¯çš„æ€»é‡åœ¨èŒƒå›´ [1, 1000] å†…ã€‚
- sentence ä¸­æ¯ä¸ªå•è¯çš„é•¿åº¦åœ¨èŒƒå›´ [1, 1000] å†…ã€‚
- sentence ä¸­å•è¯ä¹‹é—´ç”±ä¸€ä¸ªç©ºæ ¼éš”å¼€ã€‚
- sentence æ²¡æœ‰å‰å¯¼æˆ–å°¾éšç©ºæ ¼ã€‚

## é¢˜ç›®æ€è€ƒ

1. éœ€è¦ä½¿ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, ä¸€ä¸ªå¾ˆå®¹æ˜“æƒ³åˆ°çš„æ€è·¯å°±æ˜¯: é’ˆå¯¹å¥å­çš„æ¯ä¸ªåŸå§‹å•è¯, éå†æ•´ä¸ªè¯å…¸, åˆ©ç”¨åŒæŒ‡é’ˆåˆ¤æ–­è¯å…¸å•è¯æ˜¯å¦æ˜¯å…¶å‰ç¼€. éå†ç»“æŸæ—¶, å¦‚æœæ²¡æœ‰å‰ç¼€, åˆ™ä»ç”¨åŸå§‹å•è¯è‡ªèº«; å¦åˆ™å°±ç”¨æœ€å°é•¿åº¦çš„å‰ç¼€ä½œä¸ºå…¶è¯æ ¹, å¹¶æ›¿æ¢åŸå§‹å•è¯.
- ä¸è¿‡ä¸Šè¿°æ–¹æ³•éœ€è¦ä¸¤é‡å¾ªç¯, æ¯ä¸ªå­—ç¬¦éƒ½è¦å¤„ç†å¤šé, æ•ˆç‡å¤ªä½, æœ‰æ²¡æœ‰æ›´ä¼˜çš„æ–¹æ³•å‘¢?
- å›é¡¾é¢˜ç›®æœ¬èº«, æˆ‘ä»¬éœ€è¦æ‰¾å‡ºå¥å­å•è¯çš„æœ€çŸ­å‰ç¼€, è€Œå¯¹äºå‰ç¼€é—®é¢˜, æˆ‘ä»¬éƒ½å¯ä»¥å…ˆå°è¯•ä¸Šä¸€é“é¢˜ç›®(TODO)çš„æ€è·¯, ç„¶åæ ¹æ®å…·ä½“é—®é¢˜è¿›è¡Œä¸€äº›æ”¹åŠ¨
- é¦–å…ˆ, æ’å…¥å•è¯çš„é€»è¾‘ä¿æŒä¸å˜, ä»ç„¶æ˜¯éå†æ•´ä¸ªè¯å…¸æ’å…¥æ‰€æœ‰å•è¯
- å…¶æ¬¡, è¿™é“é¢˜ç›®ä¸éœ€è¦æœç´¢å®Œæ•´å•è¯æˆ–è€…å‰ç¼€, è€Œæ˜¯éœ€è¦è¿›è¡Œæ›¿æ¢, æ‰€ä»¥æˆ‘ä»¬ç§»é™¤ä¹‹å‰çš„ search å’Œ startsWith æ–¹æ³•, åˆ›å»ºé¢å¤–çš„ replace æ–¹æ³•:
  - ç»´æŠ¤å½“å‰èŠ‚ç‚¹, åˆå§‹åŒ–ä¸ºæ ¹
  - ç„¶åéå†å¥å­å•è¯çš„æ¯ä¸ªå­—ç¬¦, å¦‚æœå½“å‰èŠ‚ç‚¹ä¸å­˜åœ¨ä¸€ä¸ªå¯¹åº”å­—ç¬¦çš„å­èŠ‚ç‚¹æ—¶, è¯´æ˜è¯å…¸ä¸­æ²¡æœ‰è¯¥å•è¯çš„è¯æ ¹, è¿”å›å•è¯æœ¬èº«
  - å¦åˆ™å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘å¯¹åº”çš„å­èŠ‚ç‚¹, ç„¶ååˆ¤æ–­è¯¥èŠ‚ç‚¹çš„ isWord æ ‡è®°, å¦‚æœå®ƒæ˜¯ true, åˆ™è¯´æ˜æ‰¾åˆ°äº†æœ€çŸ­çš„å‰ç¼€, ç›´æ¥è¿”å›è¯¥å‰ç¼€å³å¯
  - å¦åˆ™ç»§ç»­ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°éå†ç»“æŸ
  - æ­¤æ—¶åŒæ ·è¯´æ˜è¯å…¸ä¸­æ²¡æœ‰è¯¥å•è¯çš„è¯æ ¹, è¿”å›å•è¯æœ¬èº«
- å®ç°å¥½ Trie ä¹‹å, æˆ‘ä»¬åªéœ€è¦æŠŠè¯å…¸çš„å•è¯åŠ å…¥ Trie ä¸­
- ç„¶åå¯¹å¥å­æŒ‰ç…§ç©ºæ ¼åˆ†éš”æˆå•è¯, é’ˆå¯¹æ¯ä¸ªå•è¯è°ƒç”¨ replace æ“ä½œ, æœ€ç»ˆå† join æˆå¥å­å³å¯
- ä¸‹é¢ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(C1+C2): å‡è®¾è¯å…¸çš„å­—ç¬¦æ€»æ•°æ˜¯ C1, å¥å­çš„å­—ç¬¦æ€»æ•°æ˜¯ C2, æ’å…¥æ—¶éœ€è¦éå†è¯å…¸çš„æ¯ä¸ªå­—ç¬¦, å¤æ‚åº¦æ˜¯ O(C1), æ›¿æ¢æ—¶éœ€è¦éå†å¥å­çš„æ¯ä¸ªå­—ç¬¦, å¤æ‚åº¦æ˜¯ O(C2), æ‰€ä»¥æ€»ä½“æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(C1+C2)
- ç©ºé—´å¤æ‚åº¦ O(C1): Trie ä¸­éœ€è¦å­˜å‚¨æ•´ä¸ªè¯å…¸, æœ€å·®æƒ…å†µä¸‹æ²¡æœ‰é‡å¤ä½¿ç”¨çš„èŠ‚ç‚¹, éœ€è¦ä¿å­˜æ‰€æœ‰å­—ç¬¦, ç©ºé—´å¤æ‚åº¦å°±æ˜¯ O(C1)

#### ä»£ç 

```python
class Node:
    def __init__(self):
        self.children = {}
        self.isWord = False


class Trie:
    def __init__(self):
        self.root = Node()

    def insert(self, w):
        # åˆå§‹åŒ–ä¸ºæ ¹èŠ‚ç‚¹
        cur = self.root
        for c in w:
            if c not in cur.children:
                # å­èŠ‚ç‚¹ä¸å­˜åœ¨æ—¶åˆ›å»ºå®ƒ
                cur.children[c] = Node()
            cur = cur.children[c]
        # æ ¹èŠ‚ç‚¹->æœ€ç»ˆèŠ‚ç‚¹çš„è·¯å¾„å½¢æˆäº†å®Œæ•´çš„è¯æ ¹
        cur.isWord = True

    def replace(self, w):
        # åˆå§‹åŒ–ä¸ºæ ¹èŠ‚ç‚¹
        cur = self.root
        for i, c in enumerate(w):
            if c not in cur.children:
                # è¯å…¸ä¸­æ²¡æœ‰ç»™å®šå•è¯çš„è¯æ ¹, è¿”å›å•è¯æœ¬èº«
                break
            cur = cur.children[c]
            if cur.isWord:
                # æ‰¾åˆ°äº†ä¸€ä¸ªè¯æ ¹, å®ƒä¸€å®šæ˜¯æœ€çŸ­çš„, ç›´æ¥è¿”å›è¯¥è¯æ ¹
                return w[: i + 1]
        # æ²¡æ‰¾åˆ°è¯æ ¹, è¿”å›å•è¯æœ¬èº«
        return w


class Solution:
    def replaceWords(self, dictionary: List[str], sentence: str) -> str:
        trie = Trie()
        for w in dictionary:
            # å°†è¯å…¸ä¸­çš„è¯æ ¹æ·»åŠ åˆ°trieä¸­
            trie.insert(w)
        arr = sentence.split()
        res = []
        for s in arr:
            # å¯¹äºsentenceçš„æ¯ä¸ªå•è¯, å°è¯•ç”¨æœ€çŸ­è¯æ ¹æ›¿æ¢å®ƒ
            res.append(trie.replace(s))
        return " ".join(res)
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
