> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/4sjJUc/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå¯èƒ½æœ‰é‡å¤æ•°å­—çš„æ•´æ•°æ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° target ï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚

candidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚

### ç¤ºä¾‹ 1:

- è¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,
- è¾“å‡º:

```
[
    [1,1,6],
    [1,2,5],
    [1,7],
    [2,6]
]
```

### ç¤ºä¾‹ 2:

- è¾“å…¥: candidates = [2,5,2,1,2], target = 5,
- è¾“å‡º:

```
[
    [1,2,2],
    [5]
]
```

### æç¤º:

- 1 <= candidates.length <= 100
- 1 <= candidates[i] <= 50
- 1 <= target <= 30

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•åšåˆ°ä¸æ·»åŠ é‡å¤ç»„åˆ?
2. å¦‚æœé™åˆ¶åªèƒ½ç”¨é€’å½’æˆ–è€…è¿­ä»£, å¦‚ä½•è§£å†³?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1

#### æ€è·¯

- åˆ†æé¢˜ç›®, ä¸éš¾å‘ç°è¿™é“é¢˜å’Œä¸Šä¸€é“é¢˜(TODO)éå¸¸ç±»ä¼¼, åŒºåˆ«åªæ˜¯æ•°å­—å­˜åœ¨é‡å¤, ä¸”åªèƒ½å–ä¸€æ¬¡
- ä½†å¦‚æœæˆ‘ä»¬ä»é‡‡ç”¨ä¹‹å‰çš„ä¸¤åˆ†æ”¯çš„åšæ³•, å³é€‰å–å½“å‰æ•°å­—å’Œä¸é€‰å½“å‰æ•°å­—, åˆ™ä¼šå‡ºç°é‡å¤ç»„åˆ
- ä¸¾ä¸ªä¾‹å­, å‡è®¾ candidates æ˜¯`[1,2,1]`, è€Œ target æ˜¯ 3, é‚£ä¹ˆåªé€‰ç¬¬ä¸€ä¸ª 1 å¯¹åº”çš„ç»„åˆæ˜¯`[1,2]`, è€Œåªé€‰ç¬¬äºŒä¸ª 1 å¯¹åº”çš„ç»„åˆæ˜¯`[2,1]`, è¿™å°±å¯¼è‡´é‡å¤äº†, å¦‚ä½•è§£å†³å‘¢?
- æ—¢ç„¶åœ¨ä¸åŒä½ç½®é€‰æ‹©ç›¸åŒçš„æ•°å­—ä¼šå¯¼è‡´é‡å¤, é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†ç›¸åŒæ•°å­—èšåˆèµ·æ¥, å¯¹åº”çš„å°±æ˜¯è®¡æ•°å­—å…¸`{key:cnt}`
- ç„¶åé’ˆå¯¹å­—å…¸çš„æ¯ä¸ª key, æˆ‘ä»¬éƒ½å¯ä»¥æœ‰ 0,1,...,cnt ç§é€‰æ‹©, å¯¹åº”å°±æ˜¯ç»„åˆé‡Œä¸æ·»åŠ è¯¥æ•°å­—, æ·»åŠ ä¸€ä¸ª,...,æ·»åŠ  cnt ä¸ª
- ç„¶åå…¶ä½™éƒ¨åˆ†å°±å’Œä¸Šä¸€é“é¢˜éå¸¸ç±»ä¼¼äº†, æœ¬è´¨ä¸Šæ¥è¯´, å°±æ˜¯ç›¸å½“äºå°†ä¸Šä¸€é“é¢˜çš„æ— é™åˆ¶æ·»åŠ æŸä¸ªæ•°å­—æ”¹æˆæœ€å¤šæ·»åŠ  cnt æ¬¡
- æˆ‘ä»¬å¯ä»¥åŸºäºä¸Šè¿°åˆ†æè¿›è¡Œé€’å½’æ±‚è§£, å…·ä½“åšæ³•å¦‚ä¸‹:
  - é¦–å…ˆå°†åŸå§‹æ•°ç»„è½¬æ¢æˆè®¡æ•°å­—å…¸, å¹¶å¾—åˆ° key çš„åˆ—è¡¨
  - ä¼ å…¥å½“å‰ä¸‹æ ‡, å½“å‰ç»„åˆ, ä»¥åŠå½“å‰ç»„åˆçš„æ•°å­—ä¹‹å’Œ
  - å¦‚æœå½“å‰æ•°å­—å’Œæ°å¥½ç­‰äº target, åˆ™å°†å½“å‰ç»„åˆåŠ å…¥æœ€ç»ˆç»“æœ, å¹¶è¿”å›
  - å¦‚æœå½“å‰æ•°å­—å’Œå·²ç»å¤§äº target, æˆ–è€…å½“å‰ä¸‹æ ‡è¶…å‡º key åˆ—è¡¨çš„èŒƒå›´, åˆ™æ²¡å¿…è¦ç»§ç»­é€’å½’äº†, ç›´æ¥è¿”å›
  - å¦‚æœä¸æ˜¯ä¸Šè¿°ä¸¤ç§æƒ…å†µ, åˆ™è¯´æ˜å¯ä»¥ç»§ç»­é€’å½’, æ­¤æ—¶å¯ä»¥ä½¿ç”¨ 0~cnt ä¸ªæ•°å­—, å…±æœ‰ cnt+1 ç§æƒ…å†µ
  - å¯¹äºæ¯ç§æƒ…å†µ, å°†å¯¹åº”æ•°ç›®çš„å½“å‰æ•°å­—æ·»åŠ åˆ°å½“å‰ç»„åˆå¹¶æ›´æ–°æ•°å­—å’Œ, ç„¶åä¸‹æ ‡åŠ  1
- ç”±äºæ¯æ¡é€’å½’è·¯å¾„æ·»åŠ çš„æ•°å­—ä¸ªæ•°éƒ½ä¸ä¸€æ ·, æ‰€ä»¥æ¯ä¸ªé€’å½’å‡ºå£å½¢æˆçš„æœ‰æ•ˆç»„åˆä¹Ÿå„ä¸ç›¸åŒ, æ— éœ€æ‰‹åŠ¨å»é‡

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(2^N): å‡è®¾åŸå§‹æ•°ç»„å…±æœ‰ N ä¸ªæ•°å­—, æ¯ä¸ªæ•°å­—éƒ½è¦ä¹ˆæ·»åŠ åˆ°ç»„åˆ, è¦ä¹ˆä¸æ·»åŠ , æ‰€ä»¥æœ€å¤šåˆ¤æ–­ 2^N ç§ç»„åˆ, æ€»æ—¶é—´æ˜¯ 2^N
- ç©ºé—´å¤æ‚åº¦ O(N): è®¡æ•°å­—å…¸å’Œ key åˆ—è¡¨éœ€è¦å­˜å‚¨æœ€å¤š N ä¸ªå…ƒç´ , è€Œé€’å½’æ ˆåœ¨æœ€å·®æƒ…å†µä¸‹é•¿åº¦åŒæ ·æ˜¯ N

#### ä»£ç 

##### Python 3

```python
class Solution:
    def combinationSum2(self, candidates: List[int], target: int) -> List[List[int]]:
        # æ–¹æ³•1: è½¬è®¡æ•°å­—å…¸+å¤šåˆ†æ”¯é€’å½’
        res = []
        # å°†åŸå§‹æ•°ç»„è½¬æˆè®¡æ•°å­—å…¸, å¹¶è®°å½•keyåˆ—è¡¨
        cnts = collections.Counter(candidates)
        keys = list(cnts.keys())

        # é€’å½’ä¼ å…¥å½“å‰ä¸‹æ ‡, å½“å‰ç»„åˆä»¥åŠå½“å‰ç»„åˆçš„æ•°å­—ä¹‹å’Œ
        def dfs(i, path, sm):
            if sm == target:
                # é€’å½’å‡ºå£#1, æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆç»„åˆ, å°†å…¶åŠ å…¥æœ€ç»ˆç»“æœé›†
                res.append(path)
                return
            if i >= len(keys) or sm > target:
                # é€’å½’å‡ºå£#2, å½“å‰ç»„åˆå·²ç»ä¸å¯èƒ½æ»¡è¶³è¦æ±‚äº†, ç›´æ¥è¿”å›
                return
            for cnt in range(cnts[keys[i]] + 1):
                # é’ˆå¯¹0~cnt, å°†å¯¹åº”æ¬¡æ•°çš„æ•°å­—åŠ å…¥ç»„åˆå¹¶æ›´æ–°æ•°å­—å’Œ, ç„¶åç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªkey
                dfs(i + 1, path + [keys[i]] * cnt, sm + cnt * keys[i])

        dfs(0, [], 0)
        return res
```

### æ–¹æ¡ˆ 2

#### æ€è·¯

- æ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•ç”¨è¿­ä»£çš„æ€è·¯æ¥è§£å†³
- æˆ‘ä»¬å¯ä»¥å°†é€’å½’å‡½æ•°çš„ä¸‰ä¸ªå‚æ•°ä½œä¸ºä¸€ä¸ªä¸‰å…ƒç»„å­˜å‚¨èµ·æ¥
- ç„¶åéå†è¿™ä¸ªä¸‰å…ƒç»„åˆ—è¡¨, åŒæ ·åˆ©ç”¨é€’å½’æ–¹æ¡ˆçš„åˆ†ææ¥è¿›è¡Œç›¸åº”å¤„ç†
- åªæ˜¯éœ€è¦å°†é€’å½’å‡ºå£çš„ return æ”¹æˆ continue, ä»¥åŠå°†é€’å½’è°ƒç”¨æ”¹æˆè¿½åŠ æ–°çš„ä¸‰å…ƒç»„åˆ°åˆ—è¡¨ä¸­
- ä¸‹é¢ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(2^N): åˆ†æåŒæ–¹æ¡ˆ 1
- ç©ºé—´å¤æ‚åº¦ O(2^N): éœ€è¦ä¿å­˜æ‰€æœ‰å¯èƒ½çš„ä¸‰å…ƒç»„

#### ä»£ç 

##### Python 3

```python
class Solution:
    def combinationSum2(self, candidates: List[int], target: int) -> List[List[int]]:
        # æ–¹æ³•2: è½¬è®¡æ•°å­—å…¸+ä¸‰å…ƒç»„è¿­ä»£
        res = []
        # å°†åŸå§‹æ•°ç»„è½¬æˆè®¡æ•°å­—å…¸, å¹¶è®°å½•keyåˆ—è¡¨
        cnts = collections.Counter(candidates)
        keys = list(cnts.keys())
        # (å½“å‰ä¸‹æ ‡,å½“å‰ç»„åˆ,å½“å‰ç»„åˆçš„æ•°å­—ä¹‹å’Œ)
        tuples = [(0, [], 0)]
        for i, path, sm in tuples:
            if sm == target:
                # æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆç»„åˆ, å°†å…¶åŠ å…¥æœ€ç»ˆç»“æœé›†, ç»§ç»­å¾ªç¯
                res.append(path)
                continue
            if i >= len(keys) or sm > target:
                # å½“å‰ç»„åˆå·²ç»ä¸å¯èƒ½æ»¡è¶³è¦æ±‚äº†, ä¸å†ç»§ç»­å¤„ç†å®ƒ, ç»§ç»­å¾ªç¯
                continue
            for cnt in range(cnts[keys[i]] + 1):
                # é’ˆå¯¹0~cnt, å°†å¯¹åº”æ¬¡æ•°çš„æ•°å­—åŠ å…¥ç»„åˆå¹¶æ›´æ–°æ•°å­—å’Œ, ç„¶åç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªkey
                tuples.append((i + 1, path + [keys[i]] * cnt, sm + cnt * keys[i]))
        return res
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
