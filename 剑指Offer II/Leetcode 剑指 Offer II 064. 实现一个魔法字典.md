> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/US1pGT/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

è®¾è®¡ä¸€ä¸ªä½¿ç”¨å•è¯åˆ—è¡¨è¿›è¡Œåˆå§‹åŒ–çš„æ•°æ®ç»“æ„ï¼Œå•è¯åˆ—è¡¨ä¸­çš„å•è¯ äº’ä¸ç›¸åŒ ã€‚ å¦‚æœç»™å‡ºä¸€ä¸ªå•è¯ï¼Œè¯·åˆ¤å®šèƒ½å¦åªå°†è¿™ä¸ªå•è¯ä¸­ä¸€ä¸ªå­—æ¯æ¢æˆå¦ä¸€ä¸ªå­—æ¯ï¼Œä½¿å¾—æ‰€å½¢æˆçš„æ–°å•è¯å­˜åœ¨äºå·²æ„å»ºçš„ç¥å¥‡å­—å…¸ä¸­ã€‚

å®ç° MagicDictionary ç±»ï¼š

- MagicDictionary() åˆå§‹åŒ–å¯¹è±¡
- void buildDict(String[] dictionary) ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„ dictionary è®¾å®šè¯¥æ•°æ®ç»“æ„ï¼Œdictionary ä¸­çš„å­—ç¬¦ä¸²äº’ä¸ç›¸åŒ
- bool search(String searchWord) ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² searchWord ï¼Œåˆ¤å®šèƒ½å¦åªå°†å­—ç¬¦ä¸²ä¸­ ä¸€ä¸ª å­—æ¯æ¢æˆå¦ä¸€ä¸ªå­—æ¯ï¼Œä½¿å¾—æ‰€å½¢æˆçš„æ–°å­—ç¬¦ä¸²èƒ½å¤Ÿä¸å­—å…¸ä¸­çš„ä»»ä¸€å­—ç¬¦ä¸²åŒ¹é…ã€‚å¦‚æœå¯ä»¥ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚

### ç¤ºä¾‹ï¼š

- è¾“å…¥
  - inputs = ["MagicDictionary", "buildDict", "search", "search", "search", "search"]
  - inputs = [[], [["hello", "leetcode"]], ["hello"], ["hhllo"], ["hell"], ["leetcoded"]]
- è¾“å‡º
  - [null, null, false, true, false, false]
- è§£é‡Š

```Java
MagicDictionary magicDictionary = new MagicDictionary();
magicDictionary.buildDict(["hello", "leetcode"]);
magicDictionary.search("hello"); // è¿”å› False
magicDictionary.search("hhllo"); // å°†ç¬¬äºŒä¸ª 'h' æ›¿æ¢ä¸º 'e' å¯ä»¥åŒ¹é… "hello" ï¼Œæ‰€ä»¥è¿”å› True
magicDictionary.search("hell"); // è¿”å› False
magicDictionary.search("leetcoded"); // è¿”å› False
```

### æç¤ºï¼š

- 1 <= dictionary.length <= 100
- 1 <= dictionary[i].length <= 100
- dictionary[i] ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- dictionary ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸² äº’ä¸ç›¸åŒ
- 1 <= searchWord.length <= 100
- searchWord ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- buildDict ä»…åœ¨ search ä¹‹å‰è°ƒç”¨ä¸€æ¬¡
- æœ€å¤šè°ƒç”¨ 100 æ¬¡ search

## é¢˜ç›®æ€è€ƒ

1. éœ€è¦ä½¿ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„?
2. å¦‚æœéœ€è¦é¢‘ç¹è°ƒç”¨ search, å¦‚ä½•ä¼˜åŒ–?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, å¯ä»¥å‘ç°é¢˜ç›®è§„æ¨¡å¾ˆå°, å•è¯æ•°é‡å’Œé•¿åº¦æœ€å¤šåªæœ‰ 100, è€Œæœç´¢æ¬¡æ•°ä¹Ÿæ˜¯å¦‚æ­¤, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æš´åŠ›æ³•æ¥è§£å†³
- æˆ‘ä»¬å°†åŸå§‹å­—ç¬¦ä¸²æ•°ç»„æ•°ç»„ä¿å­˜ä¸‹æ¥, ç„¶åæ¯æ¬¡ search æ—¶, éå†æ•´ä¸ªè¯å…¸, åˆ¤æ–­å½“å‰å•è¯æ˜¯å¦å¯ä»¥é€šè¿‡è¾“å…¥å•è¯æ›¿æ¢æŸä¸€ä¸ªå­—ç¬¦æ¥è·å¾—
- æ˜¯çš„è¯å°±è¿”å› true, å¦‚æœéå†ç»“æŸæ—¶è¿˜æ²¡è¿”å›, åˆ™è¯´æ˜è¾“å…¥å•è¯ä¸èƒ½é€šè¿‡æ›¿æ¢æŸä¸ªå­—ç¬¦çš„æ–¹å¼è½¬æ¢æˆè¯å…¸ä¸­çš„å•è¯, è¿”å› false
- ä¸Šé¢çš„åˆ¤æ–­è¿‡ç¨‹å…·ä½“å¦‚ä¸‹:
  - é¦–å…ˆæ¯”è¾ƒä¸¤ä¸ªå•è¯é•¿åº¦, é•¿åº¦ä¸ç›¸ç­‰åˆ™ä¸€å®šä¸è¡Œ, è¿”å› false
  - æ¥ä¸‹æ¥éå†æ¯ä¸ªä¸‹æ ‡, æ¯”è¾ƒç›¸åŒä¸‹æ ‡å¯¹åº”çš„å­—ç¬¦, å¹¶ç»´æŠ¤ä¸€ä¸ª flag hasDiff, ä»£è¡¨æ˜¯å¦æœ‰ä¸åŒ
  - å½“æŸä¸¤ä¸ªå­—ç¬¦ä¸åŒæ—¶, å°±åˆ¤æ–­ hasDiff: å¦‚æœå·²ç»è®¾ç½®ä¸º true, åˆ™è¯´æ˜ä¹‹å‰å­˜åœ¨å¦ä¸€å¯¹å­—ç¬¦ä¸åŒ, æ‰€ä»¥ä¸èƒ½é€šè¿‡åªæ”¹å˜ä¸€ä¸ªå­—ç¬¦è·å¾—, æ­¤æ—¶è¿”å› false; å¦åˆ™å°† hasDiff è®¾ä¸º true, ç»§ç»­éå†
  - éå†ç»“æŸæ—¶, éœ€åˆ¤æ–­ hasDiff æ˜¯å¦ä¸º true, æ˜¯çš„è¯æ‰è¯´æ˜å¯è¡Œ, å› ä¸ºé¢˜ç›®è¦æ±‚å¿…é¡»æ›¿æ¢ä¸€ä¸ªå­—ç¬¦, ä¸èƒ½å®Œå…¨ç›¸åŒ
- æŒ‰ç…§é¢˜ç›®çš„è§„æ¨¡, æš´åŠ›æ³•å®Œå…¨å¯ä»¥èƒœä»», é‚£å¦‚æœ search æ–¹æ³•éœ€è¦è¢«é¢‘ç¹è°ƒç”¨ (æ¯”å¦‚å‡ åä¸‡æ¬¡), åˆè¯¥å¦‚ä½•è§£å†³å‘¢?
- æ­¤æ—¶æˆ‘ä»¬éœ€è¦å°½å¯èƒ½ä¼˜åŒ– search çš„å¤æ‚åº¦, æš´åŠ›æ³•æ¯æ¬¡éƒ½éœ€è¦éå†æ•´ä¸ªè¯å…¸, æ˜¾ç„¶ä¸æ˜¯å¾ˆå¥½
- æ³¨æ„åˆ° buildDict æ–¹æ³•åªéœ€è¦åœ¨å¼€å§‹æ—¶è°ƒç”¨ä¸€æ¬¡, æˆ‘ä»¬å¯ä»¥æŠŠé‡é‡çº§çš„æ“ä½œéƒ½æ”¾åˆ°è¿™é‡Œ
- ä¹Ÿå°±æ˜¯è¯´, æˆ‘ä»¬å¯ä»¥é¢„å…ˆæŠŠè¯å…¸ä¸­æ¯ä¸ªå•è¯æ›´æ”¹ä¸€ä¸ªå­—ç¬¦åå¾—åˆ°çš„æ–°å•è¯éƒ½ä¿å­˜åˆ°ä¸€ä¸ªé›†åˆé‡Œ, è¿™æ · search æ—¶åªéœ€è¦åˆ¤æ–­é›†åˆæ˜¯å¦å­˜åœ¨è¾“å…¥å•è¯å³å¯
- ä¸Šé¢çš„ä¿å­˜è¿‡ç¨‹å…·ä½“å¦‚ä¸‹:
  - å¤–å±‚éå†æ•´ä¸ªè¯å…¸
  - ä¸­å±‚éå†å½“å‰å•è¯çš„ä¸‹æ ‡
  - å†…å±‚éå† 26 ä¸ªå­—æ¯, æ³¨æ„æ–°å•è¯ä¸èƒ½å’ŒåŸå•è¯ç›¸åŒ, æ‰€ä»¥éœ€è¦é¢å¤–åˆ¤æ–­å­—æ¯æ˜¯å¦å’ŒåŸå­—æ¯ä¸€æ ·
  - å­—æ¯ä¸åŒæ—¶, å°†å½“å‰ä¸‹æ ‡æ›¿æ¢æˆè¯¥å­—æ¯, ä»è€Œæ„å»ºå‡ºæ–°çš„å•è¯, å¹¶åŠ å…¥é›†åˆä¸­
- é€šè¿‡ä¸Šè¿°è¿‡ç¨‹, æˆ‘ä»¬æˆåŠŸä¼˜åŒ–äº† search çš„å¤æ‚åº¦, è¿™å°±æ˜¯å…¸å‹çš„é¢„å¤„ç†çš„æ€æƒ³
- ä¸‹é¢ä»£ç é’ˆå¯¹ä¸¤ç§æ–¹æ³•éƒ½æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æš´åŠ›æ³•
  - æ—¶é—´å¤æ‚åº¦: å‡è®¾ N æ˜¯è¯å…¸å•è¯çš„æ•°ç›®, C æ˜¯æ¯ä¸ªå•è¯çš„å¹³å‡é•¿åº¦, é‚£ä¹ˆ buildDict æ–¹æ³•æ˜¯ O(1), è€Œ search æ–¹æ³•æ˜¯ O(NC)
  - ç©ºé—´å¤æ‚åº¦ O(NC): è¯å…¸éœ€è¦ä¿å­˜æ‰€æœ‰å­—ç¬¦
- é¢„å¤„ç†æ³•
  - æ—¶é—´å¤æ‚åº¦: å‡è®¾ N æ˜¯è¯å…¸å•è¯çš„æ•°ç›®, C æ˜¯æ¯ä¸ªå•è¯çš„å¹³å‡é•¿åº¦, é‚£ä¹ˆ buildDict æ–¹æ³•æ˜¯ O(NC\*26), è€Œ search æ–¹æ³•æ˜¯ O(C)
  - ç©ºé—´å¤æ‚åº¦ O(NC\*25C): è¯å…¸éœ€è¦ä¿å­˜æ‰€æœ‰å•è¯çš„æ‰€æœ‰å˜ç§, é•¿åº¦ä¸º C çš„å•è¯æœ‰ 25\*C ä¸ªå˜ç§

#### ä»£ç 

```python
# æ–¹æ³•1: æ•°ç»„å­˜åŸå§‹å•è¯+æœç´¢æ—¶éå†æ•°ç»„
class MagicDictionary:
    def __init__(self):
        """
        Initialize your data structure here.
        """
        self.dict = []

    def buildDict(self, dictionary: List[str]) -> None:
        self.dict = dictionary

    def search(self, searchWord: str) -> bool:
        def match(d, w):
            if len(d) != len(w):
                # é•¿åº¦ä¸ç›¸ç­‰, ä¸åŒ¹é…
                return False
            hasDiff = False
            for c1, c2 in zip(d, w):
                if c1 != c2:
                    if hasDiff:
                        # è¶…è¿‡ä¸€ä¸ªå­—ç¬¦ä¸åŒ, ä¸åŒ¹é…
                        return False
                    hasDiff = True
            # æ³¨æ„æœ€ç»ˆéœ€è¦ä¿è¯ä¸¤å•è¯æ°å¥½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸åŒ
            return hasDiff

        for d in self.dict:
            if match(d, searchWord):
                return True
        return False

# æ–¹æ³•2 (ä¼˜åŒ–search): é›†åˆ+buildDictæ—¶å­˜æ‰€æœ‰å˜ç§
class MagicDictionary:
    def __init__(self):
        """
        Initialize your data structure here.
        """
        self.dict = set()

    def buildDict(self, dictionary: List[str]) -> None:
        for w in dictionary:
            for i, c in enumerate(w):
                for o in range(26):
                    # å°†iä½å­—ç¬¦æ›¿æ¢æˆå…¶ä»–å­—ç¬¦
                    cc = chr(ord("a") + o)
                    if cc != c:
                        # æ³¨æ„: ä¸èƒ½å­˜å‚¨åŸå§‹å•è¯, å¿…é¡»æ›¿æ¢ä¸€ä¸ªå­—ç¬¦
                        cur = w[:i] + cc + w[i + 1 :]
                        self.dict.add(cur)

    def search(self, searchWord: str) -> bool:
        return searchWord in self.dict
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
