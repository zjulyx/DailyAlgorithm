> é¢˜ç›®éš¾åº¦: ç®€å•

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/H8086Q/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

å†™ä¸€ä¸ª RecentCounter ç±»æ¥è®¡ç®—ç‰¹å®šæ—¶é—´èŒƒå›´å†…æœ€è¿‘çš„è¯·æ±‚ã€‚

è¯·å®ç° RecentCounter ç±»ï¼š

- RecentCounter() åˆå§‹åŒ–è®¡æ•°å™¨ï¼Œè¯·æ±‚æ•°ä¸º 0 ã€‚
- int ping(int t) åœ¨æ—¶é—´ t æ·»åŠ ä¸€ä¸ªæ–°è¯·æ±‚ï¼Œå…¶ä¸­ t è¡¨ç¤ºä»¥æ¯«ç§’ä¸ºå•ä½çš„æŸä¸ªæ—¶é—´ï¼Œå¹¶è¿”å›è¿‡å» 3000 æ¯«ç§’å†…å‘ç”Ÿçš„æ‰€æœ‰è¯·æ±‚æ•°ï¼ˆåŒ…æ‹¬æ–°è¯·æ±‚ï¼‰ã€‚ç¡®åˆ‡åœ°è¯´ï¼Œè¿”å›åœ¨ [t-3000, t] å†…å‘ç”Ÿçš„è¯·æ±‚æ•°ã€‚

ä¿è¯ æ¯æ¬¡å¯¹ ping çš„è°ƒç”¨éƒ½ä½¿ç”¨æ¯”ä¹‹å‰æ›´å¤§çš„ t å€¼ã€‚

### ç¤ºä¾‹ï¼š

- è¾“å…¥ï¼š
  - inputs = ["RecentCounter", "ping", "ping", "ping", "ping"]
  - inputs = [[], [1], [100], [3001], [3002]]
- è¾“å‡ºï¼š
  - [null, 1, 2, 3, 3]
- è§£é‡Šï¼š
  - RecentCounter recentCounter = new RecentCounter();
  - recentCounter.ping(1); // requests = [1]ï¼ŒèŒƒå›´æ˜¯ [-2999,1]ï¼Œè¿”å› 1
  - recentCounter.ping(100); // requests = [1, 100]ï¼ŒèŒƒå›´æ˜¯ [-2900,100]ï¼Œè¿”å› 2
  - recentCounter.ping(3001); // requests = [1, 100, 3001]ï¼ŒèŒƒå›´æ˜¯ [1,3001]ï¼Œè¿”å› 3
  - recentCounter.ping(3002); // requests = [1, 100, 3001, 3002]ï¼ŒèŒƒå›´æ˜¯ [2,3002]ï¼Œè¿”å› 3

### æç¤ºï¼š

1 <= t <= 10^9
ä¿è¯æ¯æ¬¡å¯¹ ping è°ƒç”¨æ‰€ä½¿ç”¨çš„ t å€¼éƒ½ ä¸¥æ ¼é€’å¢
è‡³å¤šè°ƒç”¨ ping æ–¹æ³• 10^4 æ¬¡

## é¢˜ç›®æ€è€ƒ

1. å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„æ¨¡æ‹Ÿæ•´ä¸ªè¿‡ç¨‹?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, è¦æƒ³åŠ¨æ€ç»´æŠ¤è¿‡å» 3000 æ¯«ç§’å†…å‘ç”Ÿçš„æ‰€æœ‰è¯·æ±‚æ•°, éœ€è¦æ”¯æŒä¸€ç«¯æ·»åŠ æ–°å…ƒç´ , å¦ä¸€ç«¯ç§»é™¤è€å…ƒç´ , æ˜¾ç„¶å¯ä»¥ä½¿ç”¨åŒç«¯é˜Ÿåˆ—æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹
- æ¯æ¬¡è°ƒç”¨ ping å‡½æ•°æ—¶:
  - å…ˆå°†æ–°è¯·æ±‚æ·»åŠ åˆ°é˜Ÿåˆ—æœ«å°¾
  - ç„¶åå¾ªç¯åˆ¤æ–­é˜Ÿåˆ—å¼€å¤´è¯·æ±‚æ˜¯å¦ä¸åœ¨æ—¶é—´çª—å£å†…, ä¸åœ¨çš„è¯ç§»é™¤å®ƒå¹¶ç»§ç»­å¾ªç¯
  - å¾ªç¯ç»“æŸæ—¶, é˜Ÿåˆ—é‡Œå­˜å‚¨çš„å°±æ˜¯æ—¶é—´çª—å£å†…çš„æ‰€æœ‰è¯·æ±‚, è¿”å›é˜Ÿåˆ—é•¿åº¦å³å¯
- ä¸‹é¢çš„ä»£ç å°±å¯¹åº”äº†ä¸Šé¢çš„æ•´ä¸ªè¿‡ç¨‹, å¹¶ä¸”æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(1): æ¯ä¸ªè¯·æ±‚æœ€å¤šå…¥é˜Ÿå’Œå‡ºé˜Ÿå„ä¸€æ¬¡, æ‰€ä»¥æ¯æ¬¡æ“ä½œçš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸º O(1)
- ç©ºé—´å¤æ‚åº¦ O(N): åŒç«¯é˜Ÿåˆ—æœ€å¤šå­˜å‚¨å…¨éƒ¨ N ä¸ªå…ƒç´ 

#### ä»£ç 

```python
class RecentCounter:
    def __init__(self):
        # åˆå§‹åŒ–ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—
        self.q = collections.deque()

    def ping(self, t: int) -> int:
        # å°†å½“å‰å…ƒç´ åŠ å…¥é˜Ÿå°¾
        self.q.append(t)
        # è¿™é‡Œç”±äºåˆšå…¥é˜Ÿä¸€ä¸ªå…ƒç´ , ä¸”å…¶ä¸€å®šä¸æ»¡è¶³å¾ªç¯æ¡ä»¶
        # æ‰€ä»¥å¯ä»¥ä¿è¯é˜Ÿåˆ—è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ (t), æ— éœ€åˆ¤æ–­qæ˜¯å¦ä¸ºç©º
        while self.q[0] < t - 3000:
            # é˜Ÿå¤´å…ƒç´ ä¸åœ¨æ—¶é—´çª—å£[t-3000,t]å†…äº†, å°†å…¶å‡ºé˜Ÿ
            self.q.popleft()
        # æœ€ç»ˆé˜Ÿåˆ—å‰©ä½™çš„å…ƒç´ ä¸ªæ•°å³ä¸ºæ—¶é—´çª—å£å†…çš„æ€»è¯·æ±‚æ•°
        return len(self.q)
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
