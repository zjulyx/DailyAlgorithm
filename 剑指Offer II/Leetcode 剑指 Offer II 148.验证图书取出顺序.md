> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/zhan-de-ya-ru-dan-chu-xu-lie-lcof/description/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç°åœ¨å›¾ä¹¦é¦†æœ‰ä¸€å †å›¾ä¹¦éœ€è¦æ”¾å…¥ä¹¦æ¶ï¼Œå¹¶ä¸”å›¾ä¹¦é¦†çš„ä¹¦æ¶æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œåªèƒ½æŒ‰ç…§ ä¸€å®š çš„é¡ºåº æ”¾å…¥ å’Œ æ‹¿å– ä¹¦ç±ã€‚

ç»™å®šä¸€ä¸ªè¡¨ç¤ºå›¾ä¹¦æ”¾å…¥é¡ºåºçš„æ•´æ•°åºåˆ— putInï¼Œè¯·åˆ¤æ–­åºåˆ— takeOut æ˜¯å¦ä¸ºæŒ‰ç…§æ­£ç¡®çš„é¡ºåºæ‹¿å–ä¹¦ç±çš„æ“ä½œåºåˆ—ã€‚ä½ å¯ä»¥å‡è®¾æ”¾å…¥ä¹¦æ¶çš„æ‰€æœ‰ä¹¦ç±ç¼–å·éƒ½ä¸ç›¸åŒã€‚

### ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šputIn = [6,7,8,9,10,11], takeOut = [9,11,10,8,7,6]
- è¾“å‡ºï¼štrue
- è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹æ“ä½œæ”¾å…¥å¹¶æ‹¿å–ä¹¦ç±ï¼š
  - push(6), push(7), push(8), push(9), pop() -> 9,
  - push(10), push(11),pop() -> 11,pop() -> 10, pop() -> 8, pop() -> 7, pop() -> 6

### ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šputIn = [6,7,8,9,10,11], takeOut = [11,9,8,10,6,7]
- è¾“å‡ºï¼šfalse
- è§£é‡Šï¼š6 ä¸èƒ½åœ¨ 7 ä¹‹å‰å–å‡ºã€‚

### æç¤ºï¼š

- 0 <= putIn.length == takeOut.length <= 1000
- 0 <= putIn[i], takeOut < 1000
- putIn æ˜¯ takeOut çš„æ’åˆ—ã€‚

## é¢˜ç›®æ€è€ƒ

1. ç›´æ¥æ¨¡æ‹Ÿæ•´ä¸ªè¿‡ç¨‹å¯è¡Œå—?
2. æœ‰æ²¡æœ‰ä¸ä½¿ç”¨é¢å¤–ç©ºé—´çš„åšæ³•?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1

#### æ€è·¯

- æˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨ä¸€ä¸ªæ ˆæ¨¡æ‹Ÿæ•´ä¸ªè¿‡ç¨‹, çœ‹çœ‹æ¨¡æ‹Ÿè¿‡ç¨‹ä¸­èƒ½å¦æ»¡è¶³ä¸¤ä¸ªåºåˆ—çš„é¡ºåº
- å¯¹äºæ¯ä¸ªå‹å…¥åºåˆ—, æˆ‘ä»¬ç›´æ¥å°†å…¶å‹å…¥æ ˆä¸­
- è€Œå¯¹äºå¼¹å‡ºåºåˆ—, æˆ‘ä»¬éœ€è¦é¢å¤–ç»´æŠ¤ä¸€ä¸ªæŒ‡é’ˆ, æŒ‡å‘å½“å‰è¦å¼¹å‡ºçš„å…ƒç´ ä¸‹æ ‡, æ˜¾ç„¶è¯¥æŒ‡é’ˆåˆå§‹åŒ–ä¸º 0
- æ¥ä¸‹æ¥æ¯”è¾ƒæ ˆé¡¶æ˜¯å¦å’Œå½“å‰æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ æ˜¯å¦ç›¸åŒ, ç›¸åŒçš„è¯å¼¹å‡ºå¹¶è®©æŒ‡é’ˆåç§»ä¸€ä½
- é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°éå†å®Œæ•´ä¸ªå‹å…¥åºåˆ—
- é‚£ä¹ˆå¦‚æœä¸¤ä¸ªåºåˆ—åŒ¹é…çš„è¯, æœ€ç»ˆçš„æ ˆåº”è¯¥ä¸ºç©ºçš„.
  - æ³¨æ„è¿™é‡Œæ— éœ€åˆ¤æ–­å¼¹å‡ºåºåˆ—æ˜¯å¦ä¹Ÿéå†å®Œ(å³æŒ‡é’ˆæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ åä¸€ä½), å› ä¸ºå¦‚æœæ ˆä¸ºç©ºçš„è¯ä»£è¡¨æ¯ä¸ªå‹å…¥éƒ½å¯¹åº”ä¸€ä¸ªå¼¹å‡º, è€Œä¸¤ä¸ªåºåˆ—é•¿åº¦ç›¸ç­‰, æ‰€ä»¥æ­¤æ—¶å¼¹å‡ºåºåˆ—è‚¯å®šä¹Ÿéå†å®Œäº†.
- è€Œå¦‚æœæœ€ç»ˆçš„æ ˆä¸ä¸ºç©º, åˆ™è¯´æ˜å¼¹å‡ºåºåˆ—ä¸å¯¹äº†, å¡åœ¨äº†æŸä¸ªä¸‹æ ‡å¤„, æœ¬åº”è¯¥å…ˆå¼¹å½“å‰æ ˆé¡¶çš„, ç»“æœå¼¹å‡ºåºåˆ—çš„å½“å‰å…ƒç´ ä¸æ˜¯æ ˆé¡¶, æ— æ³•æ­£å¸¸å¼¹å‡º.

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N)`
  - æ¯ä¸ªå…ƒç´ åªä¼šè¢«å‹å…¥å’Œå¼¹å‡ºæ ˆä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦ `O(N)`
  - é¢å¤–éœ€è¦ä¸€ä¸ªæ ˆ

#### ä»£ç 

```python
class Solution:
    def validateBookSequences(self, putIn: List[int],
                               takeOut: List[int]) -> bool:
        # æ–¹æ³•1: åˆ©ç”¨æ ˆæ¨¡æ‹Ÿ, é¢å¤–ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆå­˜å‚¨å½“å‰å¼¹å‡ºåºåˆ—ä½ç½®
        stack = []
        j = 0
        for p in putIn:
            stack.append(p)
            while stack and j < len(takeOut) and stack[-1] == takeOut[j]:
                # å½“å‰æ ˆé¡¶æ°å¥½ç­‰äºå½“å‰å¼¹å‡ºåºåˆ—å¯¹åº”çš„å…ƒç´ , æ ˆå¼¹å‡º, æŒ‡é’ˆåç§»
                stack.pop()
                j += 1
        # å¦‚æœæ ˆä¸ºç©ºåˆ™è¯´æ˜è¿™ä¸¤ä¸ªåºåˆ—æœ‰æ•ˆ
        return not stack
```

### æ–¹æ¡ˆ 2

#### æ€è·¯

- å›é¡¾æ–¹æ¡ˆ 1, æˆ‘ä»¬éœ€è¦é¢å¤–ä¸€ä¸ªæ ˆæ¥è€è€å®å®æ¨¡æ‹Ÿæ•´ä¸ªè¿‡ç¨‹, æœ‰æ²¡æœ‰ä¸éœ€è¦é¢å¤–ç©ºé—´çš„åšæ³•å‘¢?
- ç­”æ¡ˆä¹Ÿæ˜¯è‚¯å®šçš„, æ–¹æ¡ˆ 1 ä¸­çš„æ ˆçš„ç›®çš„å°±æ˜¯æ¨¡æ‹Ÿå‹å…¥å¼¹å‡ºè¿‡ç¨‹, æ•´ä¸ªéå†ä¸€éå‹å…¥é˜Ÿåˆ—, æˆ‘ä»¬å…¶å®å¯ä»¥ç›´æ¥åˆ©ç”¨å‹å…¥é˜Ÿåˆ—æ¥ä½œä¸ºè¿™ä¸ªæ ˆ, ç„¶åæ ˆé¡¶å°±ç”¨æ–°çš„ä¸€ä¸ªæŒ‡é’ˆæ¥ä»£æ›¿å³å¯, è¿™æ ·å°±ä¸éœ€è¦é¢å¤–ç©ºé—´äº†
- å…¶ä»–æ€è·¯å’Œæ–¹æ¡ˆ 1 ç›¸åŒ, å…¥æ ˆç›¸å½“äºå½“å‰å‹å…¥é˜Ÿåˆ—æŒ‡é’ˆçš„èµ‹å€¼+åç§», è€Œå‡ºæ ˆåˆ™ç®€å•çš„ç­‰åŒäºå‹å…¥é˜Ÿåˆ—æŒ‡é’ˆçš„å‰ç§»
- æœ€ç»ˆå°±æ˜¯åˆ¤æ–­æ ˆé¡¶æŒ‡é’ˆæ˜¯å¦ä¸º-1 æ¥åˆ¤æ–­æ ˆæ˜¯ä¸æ˜¯ç©º

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N)`
  - æ¯ä¸ªå…ƒç´ åªä¼šè¢«å‹å…¥å’Œå¼¹å‡ºæ ˆä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦ `O(1)`
  - ä½¿ç”¨å¸¸æ•°ä¸ªå˜é‡

#### ä»£ç 

```python
class Solution:
    def validateBookSequences(self, putIn: List[int],
                               takeOut: List[int]) -> bool:
        # æ–¹æ³•2: O(1)ç©ºé—´, å°†pushedæœ¬èº«å½“ä½œæ ˆ, ç”¨ä¸€ä¸ªä¸‹æ ‡è¡¨ç¤ºå½“å‰æ ˆé¡¶, åŒæŒ‡é’ˆ
        topindex, j = -1, 0
        for i in range(len(putIn)):
            # å‹å…¥æ–°å…ƒç´ , æ‰€ä»¥éœ€è¦å…ˆå°†æ ˆé¡¶æŒ‡é’ˆåç§»ä¸€ä½, ç„¶åèµ‹å€¼
            topindex += 1
            putIn[topindex] = putIn[i]
            while j < len(takeOut) and topindex >= 0 and putIn[
                    topindex] == takeOut[j]:
                # å½“å‰æ ˆé¡¶æ°å¥½ç­‰äºå½“å‰å¼¹å‡ºåºåˆ—å¯¹åº”çš„å…ƒç´ , æ ˆé¡¶æŒ‡é’ˆå‰ç§», å¼¹å‡ºé˜Ÿåˆ—æŒ‡é’ˆåç§»
                topindex -= 1
                j += 1
        # å¦‚æœæ ˆé¡¶æŒ‡é’ˆä¸º-1, è¯´æ˜æ ˆä¸ºç©º, ä¹Ÿå³è¿™ä¸¤ä¸ªåºåˆ—æœ‰æ•ˆ
        return topindex == -1
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
