> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/2bCMpM/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªç”± 0 å’Œ 1 ç»„æˆçš„çŸ©é˜µ mat ï¼Œè¯·è¾“å‡ºä¸€ä¸ªå¤§å°ç›¸åŒçš„çŸ©é˜µï¼Œå…¶ä¸­æ¯ä¸€ä¸ªæ ¼å­æ˜¯ mat ä¸­å¯¹åº”ä½ç½®å…ƒç´ åˆ°æœ€è¿‘çš„ 0 çš„è·ç¦»ã€‚

ä¸¤ä¸ªç›¸é‚»å…ƒç´ é—´çš„è·ç¦»ä¸º 1 ã€‚

### ç¤ºä¾‹ 1ï¼š

![](https://pic.leetcode-cn.com/1626667201-NCWmuP-image.png)

- è¾“å…¥ï¼šmat = [[0,0,0],[0,1,0],[0,0,0]]
- è¾“å‡ºï¼š[[0,0,0],[0,1,0],[0,0,0]]

### ç¤ºä¾‹ 2ï¼š

![](https://pic.leetcode-cn.com/1626667205-xFxIeK-image.png)

- è¾“å…¥ï¼šmat = [[0,0,0],[0,1,0],[1,1,1]]
- è¾“å‡ºï¼š[[0,0,0],[0,1,0],[1,2,1]]

### æç¤ºï¼š

- m == mat.length
- n == mat[i].length
- 1 <= m, n <= 10^4
- 1 <= m \* n <= 10^4
- mat[i][j] is either 0 or 1.
- mat ä¸­è‡³å°‘æœ‰ä¸€ä¸ª 0

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•å°½å¯èƒ½ä¼˜åŒ–æ—¶é—´ç©ºé—´å¤æ‚åº¦?

## è§£å†³æ–¹æ¡ˆ

- åˆ†æé¢˜ç›®, æœ€ç›´æ¥å¯ä»¥æƒ³åˆ°çš„æ–¹å¼å°±æ˜¯æš´åŠ›æ³•: æ‰¾åˆ°æ¯ä¸ªå€¼ä¸º 0 çš„æ ¼å­, ç„¶åä»¥å®ƒä»¬ä¸ºé”šç‚¹, éå†æ•´ä¸ªçŸ©é˜µ, è®¡ç®—æ‰€æœ‰æ ¼å­åˆ°å®ƒçš„è·ç¦», æ›´æ–°å„ä¸ªæ ¼å­çš„è·ç¦»æœ€å°å€¼
- ä¸è¿‡è¿™ç§åšæ³•çš„æ—¶é—´å¤æ‚åº¦è¾¾åˆ°äº† `O(RCRC)`, å› ä¸ºå¤–å±‚å¾ªç¯æ‰¾ 0 éœ€è¦ `O(RC)` æ—¶é—´, å†…å±‚å¾ªç¯æ›´æ–°è·ç¦»åˆéœ€è¦ `O(RC)` æ—¶é—´, å¦‚ä½•ä¼˜åŒ–å‘¢?
- ä¸€èˆ¬æ¥è¯´, éåŠ æƒå›¾æ±‚æœ€çŸ­è·ç¦»çš„é—®é¢˜éƒ½å¯ä»¥å…ˆå°è¯• BFS, è¿™é“é¢˜ä¹Ÿä¸ä¾‹å¤–
- æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§å°ç›¸åŒçš„è·ç¦»çŸ©é˜µä½œä¸ºæœ€ç»ˆç»“æœ, å¹¶ä½¿ç”¨ä¸€ä¸ªé›†åˆè®°å½•å·²ç»éå†è¿‡çš„æ ¼å­
- ç„¶åéå†æ•´ä¸ªçŸ©é˜µ, æ‰¾å‡ºæ‰€æœ‰å€¼ä¸º 0 çš„æ ¼å­å¯¹åº”çš„è¡Œåˆ—ä¸‹æ ‡, å°†å¯¹åº”è·ç¦»çŸ©é˜µçš„å€¼æ›´æ–°ä¸º 0, å¹¶å°†å…¶åŠ å…¥é˜Ÿåˆ—å’Œé›†åˆä¸­
- å¯¹äºé˜Ÿåˆ—ä¸­çš„æ¯ä¸ªæ ¼å­, æ‰¾å‡ºå…¶ç›¸é‚»çš„å››ä¸ªæ ¼å­, å¦‚æœå¯¹åº”æ ¼å­å°šæœªåœ¨é›†åˆä¸­, è¯´æ˜å®ƒè¿˜æ²¡è¢«éå†, å°†å…¶åŠ å…¥é˜Ÿåˆ—å’Œé›†åˆä¸­, å¹¶æ›´æ–°å¯¹åº”è·ç¦»çŸ©é˜µçš„å€¼ä¸ºåŸæ ¼å­åŠ  1
- æœ€ç»ˆå½“æ‰€æœ‰æ ¼å­éƒ½éå†å®Œæ¯•æ—¶, è·ç¦»çŸ©é˜µçš„å€¼å³ä¸ºæœ€ç»ˆç»“æœ
- è¿™æ ·æˆ‘ä»¬å¯ä»¥ä¿è¯æ¯ä¸ªæ ¼å­éƒ½åªè¢«éå†å¸¸æ•°é, å°†æ—¶é—´å¤æ‚åº¦ä¼˜åŒ–åˆ°äº† `O(RC)`
- æˆ‘ä»¬è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–, åˆå§‹åŒ–è·ç¦»çŸ©é˜µçš„æ‰€æœ‰å€¼ä¸º-1, ä»£è¡¨å°šæœªéå†çš„æƒ…å†µ, è¿™æ ·å°±æ— éœ€ä½¿ç”¨é›†åˆ, åªéœ€è¦é€šè¿‡åˆ¤æ–­å¯¹åº”æ ¼å­çš„è·ç¦»æ˜¯å¦ä¸º-1, å°±å¯ä»¥çŸ¥é“è¯¥æ ¼å­æ˜¯å¦è¢«éå†äº†, ä»è€Œå°†ç©ºé—´å¤æ‚åº¦ä¼˜åŒ–åˆ°`O(1)`
- ä¸‹é¢çš„ä»£ç å¯¹å¿…è¦æ­¥éª¤æœ‰è¯¦ç»†çš„è§£é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(RC)`: RC åˆ†åˆ«æ˜¯çŸ©é˜µè¡Œåˆ—é•¿åº¦, æ¯ä¸ªæ ¼å­åªéœ€è¦éå† 2 é
- ç©ºé—´å¤æ‚åº¦ `O(1)`: é™¤äº†å¿…è¦çš„è¿”å›å€¼çŸ©é˜µ, åªä½¿ç”¨äº†å‡ ä¸ªå¸¸æ•°ç©ºé—´çš„å˜é‡

#### ä»£ç 

```python
class Solution:
    def updateMatrix(self, mat: List[List[int]]) -> List[List[int]]:
        rows, cols = len(mat), len(mat[0])
        # åˆå§‹åŒ–è·ç¦»çŸ©é˜µæ‰€æœ‰å…ƒç´ ä¸º-1, ä»£è¡¨å°šæœªéå†çš„æƒ…å†µ
        dist = [[-1] * cols for _ in range(rows)]
        q = []
        for r in range(rows):
            for c in range(cols):
                if mat[r][c] == 0:
                    # å°†æ‰€æœ‰0åŠ å…¥é˜Ÿåˆ—ä¸­, å¹¶æ›´æ–°å…¶è·ç¦»ä¸º0
                    q.append((r, c))
                    dist[r][c] = 0
        for r, c in q:
            for rr, cc in ((r + 1, c), (r - 1, c), (r, c + 1), (r, c - 1)):
                # éå†å½“å‰æ ¼å­çš„é‚»å±…æ ¼å­
                if 0 <= rr < rows and 0 <= cc < cols and dist[rr][cc] == -1:
                    # é‚»å±…æ ¼å­å°šæœªéå†, æ›´æ–°å®ƒä¸ºå½“å‰æ ¼å­è·ç¦»åŠ 1
                    # å› ä¸ºæ˜¯BFS, æ‰€ä»¥è¯¥è·ç¦»ä¸€å®šæ˜¯é‚»å±…æ ¼å­åˆ°æœ€è¿‘çš„0çš„è·ç¦»
                    dist[rr][cc] = dist[r][c] + 1
                    # å°†é‚»å±…æ ¼å­åŠ å…¥é˜Ÿåˆ—ä¸­, ç­‰å¾…åç»­å¤„ç†
                    q.append((rr, cc))
        return dist
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
