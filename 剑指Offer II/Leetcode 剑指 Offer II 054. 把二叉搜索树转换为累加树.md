> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/w6cpku/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼Œè¯·å°†å®ƒçš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼æ›¿æ¢æˆæ ‘ä¸­å¤§äºæˆ–è€…ç­‰äºè¯¥èŠ‚ç‚¹å€¼çš„æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œã€‚

æé†’ä¸€ä¸‹ï¼ŒäºŒå‰æœç´¢æ ‘æ»¡è¶³ä¸‹åˆ—çº¦æŸæ¡ä»¶ï¼š

- èŠ‚ç‚¹çš„å·¦å­æ ‘ä»…åŒ…å«é”® å°äº èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚
- èŠ‚ç‚¹çš„å³å­æ ‘ä»…åŒ…å«é”® å¤§äº èŠ‚ç‚¹é”®çš„èŠ‚ç‚¹ã€‚
- å·¦å³å­æ ‘ä¹Ÿå¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘ã€‚

### ç¤ºä¾‹ 1ï¼š

![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/05/03/tree.png)

- è¾“å…¥ï¼šroot = [4,1,6,0,2,5,7,null,null,null,3,null,null,null,8]
- è¾“å‡ºï¼š[30,36,21,36,35,26,15,null,null,null,33,null,null,null,8]

### ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šroot = [0,null,1]
- è¾“å‡ºï¼š[1,null,1]

### ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼šroot = [1,0,2]
- è¾“å‡ºï¼š[3,3,2]

### ç¤ºä¾‹ 4ï¼š

- è¾“å…¥ï¼šroot = [3,2,4,1]
- è¾“å‡ºï¼š[7,9,4,10]

### æç¤ºï¼š

- æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ä»‹äº 0 å’Œ 10^4 ä¹‹é—´ã€‚
- æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ä»‹äº -10^4 å’Œ 10^4 ä¹‹é—´ã€‚
- æ ‘ä¸­çš„æ‰€æœ‰å€¼ äº’ä¸ç›¸åŒ ã€‚
- ç»™å®šçš„æ ‘ä¸ºäºŒå‰æœç´¢æ ‘ã€‚

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•åˆ©ç”¨äºŒå‰æœç´¢æ ‘çš„æ€§è´¨?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- æ ¹æ®é¢˜ç›®æè¿°, è¦å°†æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼æ›¿æ¢æˆæ ‘ä¸­å¤§äºæˆ–è€…ç­‰äºè¯¥èŠ‚ç‚¹å€¼çš„æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œ, æˆ‘ä»¬éœ€è¦çŸ¥é“æœ‰å“ªäº›èŠ‚ç‚¹å¤§äºç­‰äºè¯¥èŠ‚ç‚¹
- ç»“åˆäºŒå‰æœç´¢æ ‘çš„æ€§è´¨, å…¶ä¸­åºéå†çš„èŠ‚ç‚¹æ˜¯ä»å°åˆ°å¤§æœ‰åºçš„, è‡ªç„¶å…¶é€†å‘ä¸­åºéå†çš„èŠ‚ç‚¹å°±æ˜¯ä»å¤§åˆ°å°æœ‰åºçš„
- æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹, å¯¹æ ‘è¿›è¡Œé€†å‘ä¸­åºéå†, ä¹Ÿå°±æ˜¯å…ˆéå†å³å­æ ‘, ç„¶åæ˜¯å½“å‰èŠ‚ç‚¹, æœ€åæ˜¯å·¦å­æ ‘
- åŒæ—¶ç»´æŠ¤ä¸€ä¸ªåç¼€å’Œ, éå†åˆ°æŸä¸ªèŠ‚ç‚¹æ—¶, å°±å°†å®ƒçš„å€¼ç´¯åŠ åˆ°è¯¥åç¼€å’Œé‡Œ, é‚£ä¹ˆè¯¥åç¼€å’Œå°±æ˜¯æ ‘ä¸­å¤§äºæˆ–è€…ç­‰äºå½“å‰èŠ‚ç‚¹å€¼çš„æ‰€æœ‰èŠ‚ç‚¹å€¼ä¹‹å’Œ, å°†å½“å‰èŠ‚ç‚¹çš„å€¼æ›´æ–°ä¸ºè¯¥åç¼€å’Œå³å¯
- æœ€ç»ˆéå†ç»“æŸæ—¶, æ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å€¼å°±éƒ½æ›´æ–°å¥½äº†, ç›´æ¥è¿”å›æ ¹èŠ‚ç‚¹å³å¯
- ä¸‹é¢ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(N): åªéœ€è¦éå†æ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡
- ç©ºé—´å¤æ‚åº¦ O(H): é€’å½’è°ƒç”¨æœ€å¤šä½¿ç”¨ O(H) æ ˆç©ºé—´, H æ˜¯æ ‘çš„é«˜åº¦

#### ä»£ç 

```python
class Solution:
    def convertBST(self, root: TreeNode) -> TreeNode:
        # é€†å‘ä¸­åºéå†+åç¼€å’Œ
        # smæ˜¯å½“å‰éå†è¿‡çš„æ‰€æœ‰èŠ‚ç‚¹çš„åç¼€å’Œ
        sm = 0

        def revInorder(root):
            nonlocal sm
            if not root:
                return
            # é€†å‘ä¸­åºéå†, å…ˆéå†å³å­èŠ‚ç‚¹
            revInorder(root.right)
            # åç¼€å’ŒåŠ ä¸Šå½“å‰èŠ‚ç‚¹å€¼, å› ä¸ºé¢˜ç›®è¦æ±‚çš„æ˜¯å¤§äºç­‰äº
            sm += root.val
            # å°†å½“å‰èŠ‚ç‚¹å€¼æ›´æ–°ä¸ºåç¼€å’Œ
            root.val = sm
            revInorder(root.left)

        revInorder(root)
        return root
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
