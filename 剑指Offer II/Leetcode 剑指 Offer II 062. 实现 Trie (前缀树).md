> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/QC3q1f/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

Trieï¼ˆå‘éŸ³ç±»ä¼¼ "try"ï¼‰æˆ–è€…è¯´ å‰ç¼€æ ‘ æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚è‡ªåŠ¨è¡¥å®Œå’Œæ‹¼å†™æ£€æŸ¥ã€‚

è¯·ä½ å®ç° Trie ç±»ï¼š

- Trie() åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚
- void insert(String word) å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² word ã€‚
- boolean search(String word) å¦‚æœå­—ç¬¦ä¸² word åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› trueï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚
- boolean startsWith(String prefix) å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸² word çš„å‰ç¼€ä¹‹ä¸€ä¸º prefix ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚

### ç¤ºä¾‹ï¼š

- è¾“å…¥
  - inputs = ["Trie", "insert", "search", "search", "startsWith", "insert", "search"]
  - inputs = [[], ["apple"], ["apple"], ["app"], ["app"], ["app"], ["app"]]
- è¾“å‡º
  - [null, null, true, false, true, null, true]
- è§£é‡Š

```java
Trie trie = new Trie();
trie.insert("apple");
trie.search("apple");   // è¿”å› True
trie.search("app");     // è¿”å› False
trie.startsWith("app"); // è¿”å› True
trie.insert("app");
trie.search("app");     // è¿”å› True
```

### æç¤ºï¼š

- 1 <= word.length, prefix.length <= 2000
- word å’Œ prefix ä»…ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ
- insertã€search å’Œ startsWith è°ƒç”¨æ¬¡æ•° æ€»è®¡ ä¸è¶…è¿‡ 3 \* 10^4 æ¬¡

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•å®šä¹‰å“ªäº›ç±», åŒ…å«å“ªäº›å­—æ®µ?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- è¿™é“é¢˜å°±æ˜¯å…¸å‹çš„ Trie çš„å®ç°, å¯ä»¥å‚è€ƒä¸‹å›¾:
  - ![Trie](https://bkimg.cdn.bcebos.com/pic/8cb1cb1349540923dd5444ffe40ec609b3de9d82e3ae?x-bce-process=image/watermark,image_d2F0ZXIvYmFpa2U4MA==,g_7,xp_5,yp_5/format,f_auto)
- ä»å›¾ä¸­å¯ä»¥çœ‹å‡º, æ¯ä¸ªéå¶èŠ‚ç‚¹æŒ‡å‘å…¶å­èŠ‚ç‚¹çš„è¾¹ä¸Šéƒ½æœ‰ä¸€ä¸ªå­—ç¬¦
- å¦å¤–æœ‰çš„èŠ‚ç‚¹æ ‡è®°ä¸ºçº¢è‰², ä»£è¡¨ä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹å½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„å•è¯, è€Œä¸æ˜¯å‰ç¼€
- æ ¹æ®è¿™äº›ä¿¡æ¯, æˆ‘ä»¬å¯ä»¥è®¾è®¡å‡ºæ‰€éœ€çš„èŠ‚ç‚¹ç±» Node, å®ƒç”¨äºå­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯
  - Node ç±»é‡Œé¢éœ€è¦åŒ…å«ä¸€ä¸ª{å­—ç¬¦->å­èŠ‚ç‚¹}çš„å­—å…¸, æ¥æ¨¡æ‹Ÿå›¾ä¸­å¸¦å­—ç¬¦çš„è¾¹
  - å¦å¤– Node ç±»è¿˜è¦åŒ…å«ä¸€ä¸ª boolean, ç”¨äºå­˜å‚¨å½“å‰èŠ‚ç‚¹ä½œä¸ºç»ˆç‚¹æ—¶æ˜¯å¦æ„æˆä¸€ä¸ªå®Œæ•´å•è¯, åˆå§‹åŒ–ä¸º false
- æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ Trie ç±»ä¸­ç»´æŠ¤ä¸€ä¸ªæ ¹èŠ‚ç‚¹, æ¯æ¬¡æ“ä½œéƒ½ä»æ ¹èŠ‚ç‚¹å¼€å§‹
- åœ¨æ‰§è¡Œ insert æ“ä½œæ—¶:
  - ç»´æŠ¤å½“å‰èŠ‚ç‚¹, åˆå§‹åŒ–ä¸ºæ ¹
  - ç„¶åéå†å•è¯çš„æ¯ä¸ªå­—ç¬¦, å¦‚æœå½“å‰èŠ‚ç‚¹ä¸å­˜åœ¨ä¸€ä¸ªå¯¹åº”å­—ç¬¦çš„å­èŠ‚ç‚¹æ—¶, å°±åˆ›å»ºå®ƒ
  - ç„¶åå°†å½“å‰èŠ‚ç‚¹æŒ‡å‘å¯¹åº”çš„å­èŠ‚ç‚¹, ç»§ç»­è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°éå†ç»“æŸ
  - æ­¤æ—¶æˆ‘ä»¬å°†å½“å‰èŠ‚ç‚¹çš„ boolean è®¾ç½®ä¸º true, è¡¨ç¤ºä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹å½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„å•è¯
- å¯¹äº search å’Œ startsWith æ“ä½œ, å®ƒä»¬å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯æœ€ç»ˆèŠ‚ç‚¹æ˜¯å¦å½¢æˆå•è¯, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å…±äº«çš„é€»è¾‘æå–å‡ºæ¥:
  - ç»´æŠ¤å½“å‰èŠ‚ç‚¹, åˆå§‹åŒ–ä¸ºæ ¹
  - ç„¶åéå†å¾…æŸ¥è¯¢å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦, å¦‚æœå½“å‰èŠ‚ç‚¹ä¸å­˜åœ¨ä¸€ä¸ªå¯¹åº”å­—ç¬¦çš„å­èŠ‚ç‚¹æ—¶, å°±è¿”å›ç©º
  - å¦åˆ™å°†å½“å‰èŠ‚ç‚¹æŒ‡å‘å¯¹åº”çš„å­èŠ‚ç‚¹, ç»§ç»­è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°éå†ç»“æŸ
  - æ­¤æ—¶çš„å½“å‰èŠ‚ç‚¹å°±æ˜¯æœ€ç»ˆèŠ‚ç‚¹, è¿”å›å®ƒ
- åœ¨å¾—åˆ°æœ€ç»ˆèŠ‚ç‚¹å:
  - search æ“ä½œéœ€è¦å®ƒéç©ºä¸”å¯¹åº”çš„ boolean æ˜¯ true æ—¶æ‰è¿”å› true
  - startsWith æ“ä½œåªéœ€è¦å®ƒéç©ºå°±è¿”å› true
- ä¸‹é¢ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- å¤æ‚åº¦ O(NC): å‡è®¾éœ€è¦æ“ä½œ N æ¬¡, æ¯æ¬¡æ“ä½œçš„å­—ç¬¦ä¸²å¹³å‡é•¿åº¦ä¸º C, é‚£ä¹ˆæ¯ä¸ªæ“ä½œéƒ½éœ€è¦ä»æ ¹å¼€å§‹æœ€å¤šéå† C ä¸ªèŠ‚ç‚¹, æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(C), æ‰€ä»¥æ€»ä½“æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O(NC)
- ç©ºé—´å¤æ‚åº¦ O(NC): Trie ä¸­éœ€è¦å­˜å‚¨æ‰€æœ‰å•è¯çš„å­—ç¬¦, æœ€å·®æƒ…å†µä¸‹æ²¡æœ‰é‡å¤ä½¿ç”¨çš„èŠ‚ç‚¹, ç©ºé—´å¤æ‚åº¦å°±æ˜¯ O(NC)

#### ä»£ç 

```python
class Node:
    def __init__(self):
        # {å­—ç¬¦->å­èŠ‚ç‚¹}å­—å…¸
        self.children = {}
        # boolean flagåˆ¤æ–­å½“å‰èŠ‚ç‚¹ç»“å°¾æ—¶æ˜¯å¦æ„æˆå•è¯
        self.isWord = False


class Trie:
    def __init__(self):
        """
        Initialize your data structure here.
        """
        # ä¿å­˜æ ¹èŠ‚ç‚¹
        self.root = Node()

    def insert(self, word: str) -> None:
        """
        Inserts a word into the trie.
        """
        # åˆå§‹åŒ–ä¸ºæ ¹èŠ‚ç‚¹
        cur = self.root
        for c in word:
            if c not in cur.children:
                # å­èŠ‚ç‚¹ä¸å­˜åœ¨æ—¶åˆ›å»ºå®ƒ
                cur.children[c] = Node()
            cur = cur.children[c]
        # æ ¹èŠ‚ç‚¹->æœ€ç»ˆèŠ‚ç‚¹çš„è·¯å¾„å½¢æˆäº†å®Œæ•´çš„å•è¯
        cur.isWord = True

    def find(self, word: str) -> Node:
        cur = self.root
        for c in word:
            if c not in cur.children:
                # å­èŠ‚ç‚¹ä¸å­˜åœ¨æ—¶è¿”å›ç©º
                return None
            cur = cur.children[c]
        # è¿”å›æœ€ç»ˆèŠ‚ç‚¹
        return cur

    def search(self, word: str) -> bool:
        """
        Returns if the word is in the trie.
        """
        last_node = self.find(word)
        # æœ€ç»ˆèŠ‚ç‚¹ä¸ä¸ºç©ºä¸”å½¢æˆå•è¯æ—¶æ‰è¿”å›true
        return last_node is not None and last_node.isWord

    def startsWith(self, prefix: str) -> bool:
        """
        Returns if there is any word in the trie that starts with the given prefix.
        """
        # æœ€ç»ˆèŠ‚ç‚¹ä¸ä¸ºç©ºæ—¶è¿”å›true
        return self.find(prefix) is not None
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDn](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
