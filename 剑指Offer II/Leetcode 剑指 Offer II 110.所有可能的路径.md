> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/bP4bmD/)

> ä»Šå¤©ç»§ç»­æ›´æ–° Leetcode çš„å‰‘æŒ‡ Offerï¼ˆä¸“é¡¹çªå‡»ç‰ˆï¼‰ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ `å‰‘æŒ‡offer2` å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæœ‰ n ä¸ªèŠ‚ç‚¹çš„æœ‰å‘æ— ç¯å›¾ï¼Œç”¨äºŒç»´æ•°ç»„ graph è¡¨ç¤ºï¼Œè¯·æ‰¾åˆ°æ‰€æœ‰ä» 0 åˆ° n-1 çš„è·¯å¾„å¹¶è¾“å‡ºï¼ˆä¸è¦æ±‚æŒ‰é¡ºåºï¼‰ã€‚

graph çš„ç¬¬ i ä¸ªæ•°ç»„ä¸­çš„å•å…ƒéƒ½è¡¨ç¤ºæœ‰å‘å›¾ä¸­ i å·èŠ‚ç‚¹æ‰€èƒ½åˆ°è¾¾çš„ä¸‹ä¸€äº›èŠ‚ç‚¹ï¼ˆè¯‘è€…æ³¨ï¼šæœ‰å‘å›¾æ˜¯æœ‰æ–¹å‘çš„ï¼Œå³è§„å®šäº† aâ†’b ä½ å°±ä¸èƒ½ä» bâ†’a ï¼‰ï¼Œè‹¥ä¸ºç©ºï¼Œå°±æ˜¯æ²¡æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹äº†ã€‚

### ç¤ºä¾‹ 1ï¼š

![](https://assets.leetcode.com/uploads/2020/09/28/all_1.jpg)

- è¾“å…¥ï¼šgraph = [[1,2],[3],[3],[]]
- è¾“å‡ºï¼š[[0,1,3],[0,2,3]]
- è§£é‡Šï¼šæœ‰ä¸¤æ¡è·¯å¾„ 0 -> 1 -> 3 å’Œ 0 -> 2 -> 3

### ç¤ºä¾‹ 2ï¼š

![](https://assets.leetcode.com/uploads/2020/09/28/all_2.jpg)

- è¾“å…¥ï¼šgraph = [[4,3,1],[3,2,4],[3],[4],[]]
- è¾“å‡ºï¼š[[0,4],[0,3,4],[0,1,3,4],[0,1,2,3,4],[0,1,4]]

### ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼šgraph = [[1],[]]
- è¾“å‡ºï¼š[[0,1]]

### ç¤ºä¾‹ 4ï¼š

- è¾“å…¥ï¼šgraph = [[1,2,3],[2],[3],[]]
- è¾“å‡ºï¼š[[0,1,2,3],[0,2,3],[0,3]]

### ç¤ºä¾‹ 5ï¼š

- è¾“å…¥ï¼šgraph = [[1,3],[2],[3],[]]
- è¾“å‡ºï¼š[[0,1,2,3],[0,3]]

### æç¤ºï¼š

- n == graph.length
- 2 <= n <= 15
- 0 <= graph[i][j] < n
- graph[i][j] != i
- ä¿è¯è¾“å…¥ä¸ºæœ‰å‘æ— ç¯å›¾ (GAD)

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•åˆ©ç”¨é¢˜ç›®ç»™å®šçš„æ¡ä»¶(æœ‰å‘æ— ç¯å›¾)?

## è§£å†³æ–¹æ¡ˆ

- åˆ†æé¢˜ç›®, è¦æ±‚ 0 åˆ° n-1 çš„æœ‰æ•ˆè·¯å¾„, æˆ‘ä»¬å¯ä»¥ä» 0 å¼€å§‹, å°è¯•å…¶æŒ‡å‘çš„æ¯ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸‹æ¬¡éå†çš„èŠ‚ç‚¹, å¹¶ä¿å­˜å¯¹åº”è·¯å¾„, ä¾æ­¤ç±»æ¨, ç›´åˆ°è¾¾åˆ° n-1 ä¸ºæ­¢
- è¿™å°±æ˜¯å…¸å‹é€’å½’å›æº¯çš„æ€è·¯, å…·ä½“æ­¥éª¤å¦‚ä¸‹:
  1. è®°å½•å½“å‰èŠ‚ç‚¹ç¼–å·å’Œè·¯å¾„, åˆå§‹æ—¶å½“å‰èŠ‚ç‚¹ä¸º 0, ä¸”è·¯å¾„åªåŒ…å«å®ƒ
  2. éå†å½“å‰èŠ‚ç‚¹æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹, å°†å®ƒä»¥åŠè¿½åŠ å®ƒä¹‹åçš„æ–°è·¯å¾„ä½œä¸ºæ–°çš„å‚æ•°è¿›è¡Œé€’å½’è°ƒç”¨
  3. å¦‚æœå½“å‰èŠ‚ç‚¹æ˜¯ n-1, åˆ™è¯´æ˜æ‰¾åˆ°ä¸€æ¡æœ‰æ•ˆè·¯å¾„, å°†å…¶åŠ å…¥æœ€ç»ˆç»“æœåˆ—è¡¨, ç„¶åç›´æ¥è¿”å›ä¸å†é€’å½’
- æ³¨æ„ç»å…¸çš„å›æº¯éœ€è¦ä½¿ç”¨ visit é›†åˆæ¥é¿å…é‡å¤è®¿é—®åŒä¸€èŠ‚ç‚¹, ä½†ç”±äºé¢˜ç›®é™å®šäº†è¾“å…¥æ˜¯æœ‰å‘æ— ç¯å›¾, ä¹Ÿå°±æ„å‘³ç€åŒä¸€æ¡è·¯å¾„ä¸å¯èƒ½é‡å¤è®¿é—®åŒä¸€èŠ‚ç‚¹, æ‰€ä»¥è¿™é‡Œå°±æ— éœ€ä½¿ç”¨ visit é›†åˆäº†
- ä¸‹é¢çš„ä»£ç å¯¹å¿…è¦æ­¥éª¤æœ‰è¯¦ç»†çš„è§£é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N*2^N)`: N æ˜¯èŠ‚ç‚¹æ€»æ•°, æœ€å·®æƒ…å†µä¸‹æ¯ä¸ªèŠ‚ç‚¹éƒ½æŒ‡å‘æ‰€æœ‰å¤§äºå®ƒçš„èŠ‚ç‚¹, æ­¤æ—¶æœ‰æ•ˆè·¯å¾„çš„ä¸ªæ•°å°±æ˜¯`2^N`, è€Œæ¯æ¬¡é€’å½’è°ƒç”¨çš„æ—¶é—´å¤æ‚åº¦æ˜¯`O(N)`, æ‰€ä»¥æ€»æ—¶é—´å¤æ‚åº¦å°±æ˜¯`O(N*2^N)`
- ç©ºé—´å¤æ‚åº¦ `O(N)`: é€’å½’æ ˆçš„æ¶ˆè€—, æœ€åæƒ…å†µä¸‹æ ˆä¸­éœ€è¦ä¿å­˜æ‰€æœ‰ N ä¸ªèŠ‚ç‚¹

#### ä»£ç 

```python
class Solution:
    def allPathsSourceTarget(self, graph: List[List[int]]) -> List[List[int]]:
        ### DFS+å›æº¯
        res = []

        def dfs(cur, path):
            if cur == len(graph) - 1:
                # å½“å‰èŠ‚ç‚¹æ˜¯n-1, æ‰¾åˆ°äº†æœ‰æ•ˆè·¯å¾„, å°†å…¶åŠ å…¥æœ€ç»ˆç»“æœ
                res.append(path)
                return
            for nex in graph[cur]:
                # éå†å½“å‰èŠ‚ç‚¹æŒ‡å‘çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹, å¹¶å°†å…¶åŠ å…¥è·¯å¾„ä¸­
                dfs(nex, path + [nex])

        # ä»èŠ‚ç‚¹0å¼€å§‹éå†, æ­¤æ—¶è·¯å¾„åªåŒ…å«0
        dfs(0, [0])
        return res
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
