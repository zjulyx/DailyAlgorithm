> é¢˜ç›®éš¾åº¦: å›°éš¾

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/intersection-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸¤æ¡çº¿æ®µï¼ˆè¡¨ç¤ºä¸ºèµ·ç‚¹ start = {X1, Y1}å’Œç»ˆç‚¹ end = {X2, Y2}ï¼‰ï¼Œå¦‚æœå®ƒä»¬æœ‰äº¤ç‚¹ï¼Œè¯·è®¡ç®—å…¶äº¤ç‚¹ï¼Œæ²¡æœ‰äº¤ç‚¹åˆ™è¿”å›ç©ºå€¼ã€‚

è¦æ±‚æµ®ç‚¹å‹è¯¯å·®ä¸è¶…è¿‡ 10^-6ã€‚è‹¥æœ‰å¤šä¸ªäº¤ç‚¹ï¼ˆçº¿æ®µé‡å ï¼‰åˆ™è¿”å› X å€¼æœ€å°çš„ç‚¹ï¼ŒX åæ ‡ç›¸åŒåˆ™è¿”å› Y å€¼æœ€å°çš„ç‚¹ã€‚

### ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼š
  - line1 = {0, 0}, {1, 0}
  - line2 = {1, 1}, {0, -1}
- è¾“å‡ºï¼š {0.5, 0}

### ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼š
  - line1 = {0, 0}, {3, 3}
  - line2 = {1, 1}, {2, 2}
- è¾“å‡ºï¼š {1, 1}

### ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼š
  - line1 = {0, 0}, {1, 1}
  - line2 = {1, 0}, {2, 1}
- è¾“å‡ºï¼š {}ï¼Œä¸¤æ¡çº¿æ®µæ²¡æœ‰äº¤ç‚¹

### æç¤ºï¼š

- åæ ‡ç»å¯¹å€¼ä¸ä¼šè¶…è¿‡ 2^7
- è¾“å…¥çš„åæ ‡å‡æ˜¯æœ‰æ•ˆçš„äºŒç»´åæ ‡

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•ç®€åŒ–é—®é¢˜?
2. å¯ä»¥åˆ©ç”¨å“ªäº›æ•°å­¦/å‡ ä½•çŸ¥è¯†?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, é¦–å…ˆæˆ‘ä»¬å¯ä»¥æƒ³åˆ°çš„æ˜¯æ±‚å¯¹åº”ç›´çº¿çš„äº¤ç‚¹, ç„¶åæ£€æŸ¥äº¤ç‚¹æ˜¯å¦è½åœ¨çº¿æ®µä¸Šå³å¯
- æ ¹æ®çº¿æ®µä¸¤ä¸ªç«¯ç‚¹, æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¯¹åº”ç›´çº¿çš„æ–œæˆªå¼, è¿™é‡Œç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯å¹³è¡Œäº y è½´çš„æƒ…å†µ, æ­¤æ—¶æ–œç‡ä¸å­˜åœ¨
- ç„¶ååˆ†æä¸¤ç›´çº¿çš„å…³ç³», è¿™é‡Œå¯ä»¥åˆ†ä¸º**å¹³è¡Œä¸å…±çº¿**/**å…±çº¿**/**ç›¸äº¤**ä¸‰ç§æƒ…å†µ:
  1. å¹³è¡Œä¸å…±çº¿æ—¶æ˜¾ç„¶æ²¡æœ‰äº¤ç‚¹
  2. å…±çº¿æ—¶éœ€è¦è¿”å› x/y å€¼æœ€å°çš„äº¤ç‚¹, æ˜¾ç„¶è¿™ä¸ªç‚¹ä¸€å®šå±äºä¸¤æ¡çº¿æ®µçš„å››ä¸ªç«¯ç‚¹ä¹‹ä¸€, æˆ‘ä»¬åªéœ€è¦éå†è¿™å››ä¸ªç«¯ç‚¹, æ£€æŸ¥å…¶æ˜¯å¦åŒæ—¶ä½äºä¸¤ä¸ªçº¿æ®µå†…, ç„¶åæœ€å°çš„æ»¡è¶³æ¡ä»¶çš„ç‚¹å³å¯
  3. ç›¸äº¤æ—¶åªæœ‰å”¯ä¸€ä¸€ä¸ªäº¤ç‚¹, æˆ‘ä»¬å¯ä»¥è”ç«‹ä¸¤ä¸ªæ–œæˆªå¼å¾—åˆ°å¯¹åº”äº¤ç‚¹, ç„¶åæ£€æŸ¥å…¶æ˜¯å¦åŒæ—¶ä½äºä¸¤ä¸ªçº¿æ®µå†…å³å¯
- ä¸‹é¢ä»£ç å°±å¯¹åº”äº†ä¸Šé¢çš„æ•´ä¸ªè¿‡ç¨‹, ä¸”æ¯ä¸€æ­¥æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(1)`: åªéœ€è¦è¿›è¡Œå¸¸æ•°æ¬¡è®¡ç®—
- ç©ºé—´å¤æ‚åº¦ `O(1)`: åªä½¿ç”¨äº†å‡ ä¸ªå¸¸æ•°ç©ºé—´å˜é‡

#### ä»£ç 

```python
class Solution:
    def intersection(self, start1: List[int], end1: List[int], start2: List[int], end2: List[int]) -> List[float]:
        # è®¡ç®—çº¿æ®µå¯¹åº”ç›´çº¿çš„æ–œæˆªå¼+åˆ†å››ç§æƒ…å†µ+æœ‰æ•ˆäº¤ç‚¹åˆ—è¡¨+æ³¨æ„æµ®ç‚¹æ•°è¯¯å·®
        # epè¡¨ç¤ºé¢˜ç›®è¦æ±‚çš„æµ®ç‚¹æ•°ç²¾åº¦è¯¯å·®
        ep = 1e-6

        def getKB(start, end):
            # ç»™å®šçº¿æ®µ(start, end), å¾—åˆ°å…¶å¯¹åº”ç›´çº¿çš„æ–œç‡kå’Œæˆªè·b
            x1, y1 = start
            x2, y2 = end
            if x1 == x2:
                # å¹³è¡Œäºyè½´çš„æƒ…å†µ, æ–œç‡æ˜¯inf
                return float("inf"), x1
            return (y1 - y2) / (x1 - x2), (x1 * y2 - x2 * y1) / (x1 - x2)

        def equal(a, b):
            # æ³¨æ„æµ®ç‚¹æ•°è®¡ç®—æœ‰ç²¾åº¦è¯¯å·®, æ‰€ä»¥éœ€è¦é¢å¤–equalå‡½æ•°
            # ç”±äºaå’Œbå¯èƒ½æ˜¯inf, è€Œinfçš„å·®çš„ç»å¯¹å€¼ä¸æ»¡è¶³å°äºç­‰äº1e-6, æ‰€ä»¥éœ€è¦é¢å¤–ç­‰äºæ¯”è¾ƒ
            return a == b or abs(a - b) <= ep

        def isInside(x, y, start, end):
            # æ£€æŸ¥ç»™å®šç‚¹(x,y)æ˜¯å¦åœ¨çº¿æ®µ(start, end)å†…
            x1, y1 = start
            x2, y2 = end
            # æ³¨æ„è¿™é‡Œçš„æ¯”è¾ƒä¹Ÿéœ€è¦è€ƒè™‘æµ®ç‚¹æ•°ç²¾åº¦è¯¯å·®, åšæ³•å°±æ˜¯ä¸‹é™å‡å»è¯¯å·®, ä¸Šé™åŠ ä¸Šè¯¯å·®
            return (x1 - ep <= x <= x2 + ep or x2 - ep <= x <= x1 + ep) and (y1 - ep <= y <= y2 + ep or y2 - ep <= y <= y1 + ep)

        # å…ˆå¾—åˆ°ä¸¤æ¡çº¿æ®µå¯¹åº”ç›´çº¿çš„æ–œç‡å’Œæˆªè·
        k1, b1 = getKB(start1, end1)
        k2, b2 = getKB(start2, end2)
        # jointsè®°å½•å¯èƒ½çš„æœ‰æ•ˆäº¤ç‚¹
        joints = []
        if equal(k1, k2):
            # ä¸¤çº¿æ®µå¹³è¡Œ
            if equal(b1, b2):
                # ä¸¤çº¿æ®µä½äºåŒä¸€ç›´çº¿ä¸Š, æ£€æŸ¥å…¶æ˜¯å¦é‡å 
                # å¦‚æœé‡å çš„è¯, éœ€è¦æ±‚å‡ºäº¤ç‚¹ä¸­åæ ‡æœ€å°çš„, é‚£ä¹ˆè¯¥ç‚¹ä¸€å®šæ˜¯é‡å éƒ¨åˆ†çš„ç«¯ç‚¹, å› ä¸ºä¸­é—´éƒ¨åˆ†çš„ç‚¹çš„åæ ‡ä¸€å®šä»‹äºä¸¤ç«¯ç‚¹ä¹‹é—´
                # è€Œé‡å éƒ¨åˆ†çš„ç«¯ç‚¹æ˜¾ç„¶å±äºä¸¤çº¿æ®µçš„ç«¯ç‚¹, æ‰€ä»¥é—®é¢˜è½¬æ¢æˆéå†2ä¸ªçº¿æ®µçš„4ä¸ªç«¯ç‚¹, æ‰¾åŒæ—¶åœ¨ä¸¤çº¿æ®µå†…ä¸”åæ ‡æœ€å°çš„
                joints = [start1, end1, start2, end2]
            else:
                # ä¸¤çº¿æ®µå¹³è¡Œä½†æ˜¯ä¸åœ¨åŒä¸€ç›´çº¿ä¸Š, ä¸€å®šæ— äº¤ç‚¹
                joints = []
        elif k1 == float("inf"):
            # æ­¤æ—¶çº¿æ®µ1æ˜¯x=b1
            # ç»“åˆçº¿æ®µ2, äº¤ç‚¹è‡ªç„¶æ˜¯(b1, k2 * b1 + b2)
            joints = [(b1, k2 * b1 + b2)]
        elif k2 == float("inf"):
            # æ­¤æ—¶çº¿æ®µ2æ˜¯x=b2
            # ç»“åˆçº¿æ®µ1, äº¤ç‚¹è‡ªç„¶æ˜¯(b2, k1 * b2 + b1)
            joints = [(b2, k1 * b2 + b1)]
        else:
            # ä¸¤ç›´çº¿ä¸å¹³è¡Œ, ä¸”éƒ½ä¸å¹³è¡Œäºyè½´
            # è”ç«‹ä¸¤ä¸ªy=kx+bæ–¹ç¨‹æ±‚å‡ºä¸¤ç›´çº¿çš„äº¤ç‚¹
            joints = [((b2 - b1) / (k1 - k2), (b2 * k1 - b1 * k2) / (k1 - k2))]
        # éå†å¯èƒ½çš„æœ‰æ•ˆäº¤ç‚¹, æ‰¾æœ€å°åæ ‡ä½œä¸ºæœ€ç»ˆç»“æœ
        res = []
        for x, y in joints:
            if isInside(x, y, start1, end1) and isInside(x, y, start2, end2):
                # å½“å‰ç«¯ç‚¹åŒæ—¶åœ¨ä¸¤çº¿æ®µå†…, å±äºæœ‰æ•ˆäº¤ç‚¹
                # æ¥ä¸‹æ¥æ£€æŸ¥å…¶åæ ‡æ˜¯å¦æœ€å°, æ˜¯çš„è¯æ›´æ–°æœ€ç»ˆç»“æœ
                if not res or x < res[0] or x == res[0] and y < res[1]:
                    res = [x, y]
        return res
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
