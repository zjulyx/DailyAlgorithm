> é¢˜ç›®éš¾åº¦: å›°éš¾

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/volume-of-histogram-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªç›´æ–¹å›¾(ä¹Ÿç§°æŸ±çŠ¶å›¾)ï¼Œå‡è®¾æœ‰äººä»ä¸Šé¢æºæºä¸æ–­åœ°å€’æ°´ï¼Œæœ€åç›´æ–¹å›¾èƒ½å­˜å¤šå°‘æ°´é‡?ç›´æ–¹å›¾çš„å®½åº¦ä¸º 1ã€‚

![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/10/22/rainwatertrap.png)

ä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„ç›´æ–¹å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºæ°´ï¼‰ã€‚Â  æ„Ÿè°¢ Marcos è´¡çŒ®æ­¤å›¾ã€‚

### ç¤ºä¾‹:

- è¾“å…¥: [0,1,0,2,1,0,1,3,2,1,2,1]
- è¾“å‡º: 6

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•å°†é—®é¢˜ç®€åŒ–?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- è¿™é“é¢˜ä¹ä¸€çœ‹æ— ä»ä¸‹æ‰‹, å¦‚ä½•ç›´æ¥æ±‚å‡ºæ€»çš„è“„æ°´é‡å‘¢?
- è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°†é¢˜ç›®è¿›è¡Œä¸€äº›ç®€åŒ–, å°±æ˜¯å•ç‹¬æ±‚å‡ºå®½åº¦ä¸º 1 çš„æ¯ä¸ªæŸ±å­çš„è“„æ°´é‡, ç„¶åæ±‡æ€»èµ·æ¥, è¿™æ ·å°±èƒ½å¾—åˆ°æ€»çš„è“„æ°´é‡
- é‚£å¦‚ä½•æ±‚å•ä¸ªæŸ±å­çš„è“„æ°´é‡å‘¢? æœ€å¼€å§‹æˆ‘ä»¬å¯èƒ½æƒ³åˆ°åˆ©ç”¨ç›¸é‚»çš„æŸ±å­, æ±‚å‡ºå®ƒä»¬ä¸­è¾ƒä½çš„é«˜åº¦, ç„¶åè®¡ç®—ä¸å½“å‰æŸ±å­çš„é«˜åº¦å·®ä½œä¸ºè“„æ°´é‡, ä½†è¿™ä¼¼ä¹è¿˜ä¸å¤Ÿ
- ä¾‹å¦‚ä¸Šä¾‹æœ€ä¸­é—´çš„æŸ±å­ (...,1,0,1,...çš„ 0), å®ƒä¸¤ä¾§æŸ±å­çš„é«˜åº¦éƒ½æ˜¯ 1, æœ€ç»ˆå´èƒ½å­˜é«˜åº¦ä¸º 2 çš„æ°´
- è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢? é‡æ–°è§‚å¯Ÿä¾‹å­, æˆ‘ä»¬å¯ä»¥å‘ç°, æœ€ä¸­é—´çš„æŸ±å­ 0 çš„è“„æ°´é‡ä¸æ˜¯åªç”±å®ƒçš„é‚»å±…å†³å®š, è€Œæ˜¯ç”±å®ƒå·¦å³ä¸¤ä¾§çš„æœ€é«˜æŸ±å­æ‰€å†³å®š
- å®ƒå·¦ä¾§çš„æœ€é«˜æŸ±å­é«˜åº¦ä¸º 2, å³ä¾§æ˜¯ 3
- æ ¹æ®æœ¨æ¡¶åŸç†, æœ€çŸ­æ¿å†³å®šäº†æ¡¶çš„é«˜åº¦, æ‰€ä»¥æŸ±å­ 0 æ‰€åœ¨çš„**æ¡¶**çš„é«˜åº¦å°±æ˜¯ 2
- é‚£ä¹ˆå®ƒçš„è“„æ°´é‡å°±æ˜¯æ¡¶é«˜åº¦å‡å»å®ƒè‡ªèº«çš„é«˜åº¦, `2-0 = 0`
- ä»¥æ­¤ç±»æ¨, å…¶ä»–æŸ±å­çš„è“„æ°´é‡ä¹Ÿå¯ä»¥é€šè¿‡åŒæ ·æ–¹å¼è®¡ç®—å¾—åˆ°, æœ€åç´¯åŠ èµ·æ¥å³ä¸ºæœ€ç»ˆç»“æœ
- æœ‰äº†ä¸Šé¢çš„åˆ†æ, æˆ‘ä»¬å°±å¾ˆå¥½å®ç°ä»£ç äº†:
  - é¦–å…ˆç»´æŠ¤ä¸€ä¸ªé•¿åº¦ä¸º n çš„åˆ—è¡¨, å­˜å‚¨å½“å‰ä¸‹æ ‡å·¦ä¾§çš„æœ€é«˜é«˜åº¦
  - ç„¶åä»å·¦å‘å³éå†, ç»´æŠ¤å½“å‰å·¦ä¾§æœ€é«˜é«˜åº¦, å¹¶æ›´æ–°åˆ°è¯¥åˆ—è¡¨ä¸­
  - æœ€åå†ä»å³å‘å·¦éå†, åŒæ ·å¾—åˆ°å³ä¾§æœ€é«˜é«˜åº¦
  - è¿™æ ·**å¦‚æœå½“å‰æŸ±å­çš„é«˜åº¦å°äºå…¶å·¦å³æœ€é«˜é«˜åº¦çš„è¾ƒå°å€¼æ—¶**, å°±è¯´æ˜è¯¥æŸ±å­èƒ½å¤Ÿè“„æ°´, å…¶é«˜åº¦å·®å°±æ˜¯è“„æ°´é‡
- ä¸‹é¢ä»£ç æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N)`: åªéœ€è¦é¡ºåºå’Œé€†åºå„éå† 1 æ¬¡
- ç©ºé—´å¤æ‚åº¦ `O(N)`: ç»´æŠ¤äº†é•¿åº¦ä¸º N çš„å·¦ä¾§æœ€é«˜é«˜åº¦åˆ—è¡¨

#### ä»£ç 

```python
class Solution:
    def trap(self, height: List[int]) -> int:
        # ç»´æŠ¤å½“å‰æŸ±å­çš„å·¦ä¾§æœ€é«˜é«˜åº¦
        lmxs = []
        lmx = 0
        for h in height:
            # æ­£åºéå†, è®°å½•å·¦ä¾§æœ€é«˜é«˜åº¦
            lmxs.append(lmx)
            # æ³¨æ„å·¦ä¾§æœ€é«˜é«˜åº¦ä¸èƒ½æ˜¯æŸ±å­æœ¬èº«, æ‰€ä»¥å…ˆè¿½åŠ å†æ›´æ–°
            lmx = max(lmx, h)
        rmx = 0
        res = 0
        for i in range(len(height))[::-1]:
            # é€†åºéå†, è®°å½•å³ä¾§æœ€é«˜é«˜åº¦
            # æ³¨æ„è¿™é‡Œæ— éœ€åˆ—è¡¨, ç›´æ¥æ›´æ–°å½“å‰æœ€å¤§å€¼å³å¯
            h = height[i] # å½“å‰æŸ±å­é«˜åº¦
            bh = min(lmxs[i], rmx) # æ¡¶é«˜åº¦
            if bh > h:
                # æ¡¶é«˜åº¦å¤§äºå½“å‰æŸ±å­é«˜åº¦, åˆ™å…¶é«˜åº¦å·®å°±æ˜¯è“„æ°´é‡
                res += bh - h
            # å³ä¾§æœ€é«˜é«˜åº¦åŒæ ·ä¸èƒ½æ˜¯æŸ±å­æœ¬èº«
            rmx = max(rmx, h)
        return res
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
