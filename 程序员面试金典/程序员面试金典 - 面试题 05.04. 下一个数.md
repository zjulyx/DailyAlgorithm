> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/closed-number-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ä¸‹ä¸€ä¸ªæ•°ã€‚ç»™å®šä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ‰¾å‡ºä¸å…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­ 1 çš„ä¸ªæ•°ç›¸åŒä¸”å¤§å°æœ€æ¥è¿‘çš„é‚£ä¸¤ä¸ªæ•°ï¼ˆä¸€ä¸ªç•¥å¤§ï¼Œä¸€ä¸ªç•¥å°ï¼‰ã€‚

### ç¤ºä¾‹ 1:

- è¾“å…¥ï¼šnum = 2ï¼ˆæˆ–è€… 0b10ï¼‰
- è¾“å‡ºï¼š[4, 1] æˆ–è€…ï¼ˆ[0b100, 0b1]ï¼‰

### ç¤ºä¾‹ 2:

- è¾“å…¥ï¼šnum = 1
- è¾“å‡ºï¼š[2, -1]

### æç¤º:

- num çš„èŒƒå›´åœ¨[1, 2147483647]ä¹‹é—´ï¼›
- å¦‚æœæ‰¾ä¸åˆ°å‰ä¸€ä¸ªæˆ–è€…åä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„æ­£æ•°ï¼Œé‚£ä¹ˆè¾“å‡º -1ã€‚

## é¢˜ç›®æ€è€ƒ

1. ä¸åŸæ•°æœ€æ¥è¿‘ä¸” 1 çš„ä¸ªæ•°ç›¸åŒçš„æ•°æœ‰ä»€ä¹ˆç‰¹ç‚¹å’Œè§„å¾‹?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- æ ¹æ®é¢˜ç›®æè¿°, å¾ˆè‡ªç„¶æƒ³åˆ°å¯ä»¥åˆ†åˆ«æ±‚ç•¥å¤§å’Œç•¥å°çš„æ•°
- **æ±‚ç•¥å¤§æ•°:**
  - ä¾‹å¦‚ 11001100 => 11010001
  - ç›´è§‚æƒ³æ³•æ˜¯, æˆ‘ä»¬å¯ä»¥ä»å³å‘å·¦éå†, æŠŠæœ€å³è¾¹çš„ 1 (ä»å³æ•°ç¬¬ 3 ä¸ªæ•°)å¡«å……åˆ°æœ€æ¥è¿‘ä¸”åœ¨å…¶å·¦è¾¹çš„ 0 (ä»å³æ•°ç¬¬ 5 ä¸ªæ•°)é‚£é‡Œ, ç„¶åéå†è¿‡ç¨‹ä¸­é‡åˆ°çš„ 1 éƒ½ç»™æ”¾åˆ°æ–°çš„æ•°çš„æœ€ä½ä½ä¸Š, æ­£å¦‚ä¸Šé¢çš„è½¬æ¢é‚£æ ·
  - è¿™æ ·ä¿è¯äº†æ–°çš„æ•°ä¸åŸæ•°å­—çš„ 1 çš„ä¸ªæ•°ç›¸åŒ, ä¸”æ˜¯å¤§äºåŸæ•°å­—çš„æœ€æ¥è¿‘çš„æ•°, è¿™æ˜¯å› ä¸ºä¸¤è€…ä¹‹é—´çš„æ•°å­—éƒ½ä¼šå°†å³ä¾§çš„æŸäº› 0 å˜æˆ 1, ä¸æ»¡è¶³ 1 ä¸ªæ•°ç›¸åŒè¿™ä¸€æ¡ä»¶
  - å…·ä½“ä»£ç å®ç°å‚è€ƒä¸‹é¢çš„ findLarger å‡½æ•°, æ¯ä¸€æ­¥éƒ½æœ‰è¯¦ç»†æ³¨é‡Š
- **æ±‚ç•¥å°æ•°:**
  - ä¾‹å¦‚ 110011 => 101110
  - ç›´è§‚æƒ³æ³•æ˜¯, æˆ‘ä»¬å¯ä»¥ä»å³å‘å·¦éå†, æŠŠ**å³è¾¹å­˜åœ¨ 0 çš„**æœ€å³è¾¹çš„ 1 (ä»å³æ•°ç¬¬ 5 ä¸ªæ•°)ä¸å®ƒå³è¾¹çš„ 0 (ä»å³æ•°ç¬¬ 4 ä¸ªæ•°)äº¤æ¢ä½ç½®, ç„¶åéå†è¿‡ç¨‹ä¸­é‡åˆ°çš„ 1 (æœ€å³è¾¹çš„ä¸¤ä¸ª 1)éƒ½ç»™æ”¾åˆ°æ–°çš„ 1 çš„å³è¾¹, æ­£å¦‚ä¸Šé¢çš„è½¬æ¢é‚£æ ·
  - è¿™æ ·ä¿è¯äº†æ–°çš„æ•°ä¸åŸæ•°å­—çš„ 1 çš„ä¸ªæ•°ç›¸åŒ, ä¸”æ˜¯å°äºåŸæ•°å­—çš„æœ€æ¥è¿‘çš„æ•°, è¿™æ˜¯å› ä¸ºä¸¤è€…ä¹‹é—´çš„æ•°å­—éƒ½ä¼šå°†å³ä¾§çš„æŸäº› 1 å˜æˆ 0, ä¸æ»¡è¶³ 1 ä¸ªæ•°ç›¸åŒè¿™ä¸€æ¡ä»¶
  - å…·ä½“ä»£ç å®ç°å‚è€ƒä¸‹é¢çš„ findSmaller å‡½æ•°, æ¯ä¸€æ­¥éƒ½æœ‰è¯¦ç»†æ³¨é‡Š

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(logN): åªéœ€éå†ä¸¤æ¬¡ num çš„æ¯ä¸€ä½
- ç©ºé—´å¤æ‚åº¦ O(1): åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡

#### ä»£ç 

##### Python 3

```python
class Solution:
    def findClosedNumbers(self, num: int) -> List[int]:
        # æ‰¾è§„å¾‹+ä½è¿ç®—
        mn, mx = 1, 2147483647

        def findLarger(n):
            # ä»æœ€ä½ä½å¼€å§‹æ‰¾ç¬¬1ä¸ª1
            # ç„¶åç»§ç»­å‘é«˜ä½æ‰¾, è®°å½•1çš„ä¸ªæ•°ones, ç›´åˆ°å†é‡åˆ°0æˆ–åˆ°æœ€é«˜ä½
            #   1. å¦‚æœè¾¾åˆ°æœ€é«˜ä½, åˆ™è¯´æ˜æ‰¾ä¸åˆ°æ›´å¤§çš„æ•°, è¿”å›-1
            #   2. å¦åˆ™å°†é‡åˆ°çš„0å˜æˆ1, ç„¶åä¹‹å‰éå†è¿‡çš„ä½ä½ç”¨000...111(ones-1ä¸ª1, å› ä¸ºæ”¹å˜çš„ä½å·²ç»å°†1ä¸ª0è½¬æˆ1äº†, æ‰€ä»¥è¿™é‡Œonesè¦å‡1)ä»£æ›¿
            # è¿™æ ·ä¿è¯äº†å¾—åˆ°çš„æ•°ä¸numçš„1çš„ä¸ªæ•°ç›¸åŒ, ä¸”æ˜¯å¤§äºå½“å‰numçš„æœ€æ¥è¿‘çš„æ•°
            rightBits = 0  # éå†çš„ä½ä½ä½æ•°, ç”¨äºåé¢çš„å·¦ç§»æ¢å¤
            # ä»ä½ä½å¼€å§‹éå†, ç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ª1
            while n and n & 1 == 0:
                n >>= 1
                rightBits += 1
            ones = 0  # éå†çš„1çš„ä¸ªæ•°
            # ç»§ç»­éå†, ç›´åˆ°å†æ¬¡é‡åˆ°0
            while n and n & 1:
                n >>= 1
                rightBits += 1
                ones += 1
            # å°†å½“å‰æœ€ä½ä½çš„0å˜æˆ1
            n += 1
            # å°†å³è¾¹éƒ¨åˆ†æ¸…0, å¹¶å¡«å……ä¸Š000...111 (ones-1ä¸ª1)
            n = (n << rightBits) | ((1 << (ones - 1)) - 1)
            # å¦‚æœå¾—åˆ°çš„æ•°å­—åœ¨32ä½æ­£æ•°èŒƒå›´å†…, è¿”å›è‡ªèº«, å¦åˆ™è¿”å›-1, è¡¨ç¤ºè¶…å‡ºä¸Šé™
            return n if mn <= n <= mx else -1

        def findSmaller(n):
            # ä»æœ€ä½ä½å¼€å§‹æ‰¾ç¬¬1ä¸ª0, å¹¶è®°å½•æ­¤è¿‡ç¨‹1çš„ä¸ªæ•°ones (å¦‚æœæ²¡æ‰¾åˆ°0, åˆ™ä¸å¯èƒ½å­˜åœ¨æ›´å°çš„ä¸numçš„1çš„ä¸ªæ•°ç›¸åŒçš„æ•°, ç›´æ¥è¿”å›-1)
            # ç„¶åç»§ç»­å‘é«˜ä½æ‰¾, ç›´åˆ°å†é‡åˆ°1
            # å°†è¿™ä¸ª1å˜æˆ0, ç„¶åä¹‹å‰éå†è¿‡çš„ä½ä½ç”¨111...000(ones+1ä¸ª1, å› ä¸ºæ”¹å˜çš„ä½å·²ç»å°†1ä¸ª1è½¬æˆ0äº†, æ‰€ä»¥è¿™é‡Œonesè¦åŠ 1)ä»£æ›¿
            # è¿™æ ·ä¿è¯äº†å¾—åˆ°çš„æ•°ä¸numçš„1çš„ä¸ªæ•°ç›¸åŒ, ä¸”æ˜¯å°äºå½“å‰numçš„æœ€æ¥è¿‘çš„æ•°
            rightBits = 0  # éå†çš„ä½ä½ä½æ•°, ç”¨äºåé¢çš„å·¦ç§»æ¢å¤
            ones = 0
            # ä»ä½ä½å¼€å§‹éå†, ç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ª0
            while n and n & 1:
                n >>= 1
                rightBits += 1
                ones += 1
            if n == 0:
                # è¯´æ˜æ²¡æ‰¾åˆ°0, ä¸å¯èƒ½å­˜åœ¨æ›´å°çš„ä¸numçš„1çš„ä¸ªæ•°ç›¸åŒçš„æ•°, ç›´æ¥è¿”å›-1
                return -1
            # ç»§ç»­éå†, ç›´åˆ°å†æ¬¡é‡åˆ°1
            while n and n & 1 == 0:
                n >>= 1
                rightBits += 1
            # å°†å½“å‰æœ€ä½ä½çš„1å˜æˆ0
            n -= 1
            # å°†å³è¾¹éƒ¨åˆ†æ¸…0, å¹¶å¡«å……ä¸Š111...000 (ones+1ä¸ª1)
            # 111...000å¯ä»¥é€šè¿‡å…ˆå¾—åˆ°111, ç„¶åå·¦ç§»å‰©ä½™ä½æ•°(å³rightBits - ones - 1)å¾—åˆ°
            n = (n << rightBits) | (((1 << (ones + 1)) - 1) <<
                                    (rightBits - ones - 1))
            # å¦‚æœå¾—åˆ°çš„æ•°å­—åœ¨32ä½æ­£æ•°èŒƒå›´å†…, è¿”å›è‡ªèº«, å¦åˆ™è¿”å›-1, è¡¨ç¤ºè¶…å‡ºä¸Šé™
            return n if mn <= n <= mx else -1

        return [findLarger(num), findSmaller(num)]
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
