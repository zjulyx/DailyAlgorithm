> 题目难度: 中等

> [原题链接](https://leetcode-cn.com/problems/sub-sort-lcci/)

> 今天继续更新程序员面试金典系列, 大家在公众号 **算法精选** 里回复 **面试金典** 就能看到该系列当前连载的所有文章了, 记得关注哦~

## 题目描述

给定一个整数数组，编写一个函数，找出索引 m 和 n，只要将索引区间[m,n]的元素排好序，整个数组就是有序的。注意：n-m 尽量最小，也就是说，找出符合条件的最短序列。函数返回值为[m,n]，若不存在这样的 m 和 n（例如整个数组是有序的），请返回[-1,-1]。

### 示例：

- 输入： [1,2,4,7,10,11,7,12,6,7,16,18,19]
- 输出： [3,9]

### 提示：

- 0 <= len(array) <= 1000000

## 题目思考

1. 无序部分有什么性质?

## 解决方案

#### 思路

- 分析题目, 要想使得排序`[m,n]`区间后整个数组就有序, 那么`[0,m-1]`和`[n+1,len-1]`区间一定都是有序的
- 这样我们就把原始数组分为了三部分:
  1. 第一部分: `[0,m-1]`, 自身有序, 且其任意数字一定小于等于后面部分的任意数字
  2. 第二部分: `[m,n]`, 自身无序, 且其任意数字都介于前后两部分的任意数字之间
  3. 第三部分: `[n+1,len-1]`, 自身有序, 且其任意数字一定大于等于前面部分的任意数字
- 我们可以分两次遍历原数组, 一次顺序, 一次逆序:
  1. 由于第三部分的任何值都>=前两部分的最大值, 所以顺序遍历时, 最后一个<最大值的下标即为中间段的右边界
  2. 由于第一部分的任何值都<=后两部分的最小值, 所以逆序遍历时, 最后一个>最小值的下标即为中间段的左边界
- 举个例子, 对于数组`[1,2,5,4,3,6,7]`, 可以分为三部分: `[1,2]`, `[5,4,3]`, `[6,7]`, 5 是逆序遍历时最后一个>后面最小值的值, 而 3 是顺序遍历时最后一个<前面最大值的值, 也即待排序区间的左右边界
- 另外注意将左右边界初始化为-1, 对应原数组本身就有序的情况
- 下面代码就对应了上面的整个过程, 且每一步有详细的注释, 方便大家理解

#### 复杂度

- 时间复杂度 `O(N)`: 需要遍历两遍数组
- 空间复杂度 `O(1)`: 只使用了常数空间的变量

#### 代码

```python
class Solution:
    def subSort(self, array: List[int]) -> List[int]:
        # 两次遍历找中间部分的左右边界
        n = len(array)
        l, r = -1, -1
        mn, mx = float("inf"), -float("inf")
        for i in range(n):
            # 从左向右遍历, 最后一个<最大值的下标即为中间部分的右边界
            if array[i] >= mx:
                # 当前i位于第三部分
                mx = array[i]
            else:
                # 更新无序区间右边界
                r = i
        for i in range(n)[::-1]:
            # 从右向左遍历, 最后一个>最小值的下标即为中间部分的左边界
            if array[i] <= mn:
                # 当前i位于第一段
                mn = array[i]
            else:
                # 更新无序区间左边界
                l = i
        return [l, r]
```

---

> 大家可以在下面这些地方找到我~😊

> [我的 GitHub](https://github.com/zjulyx)

> [我的 Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [我的 CSDN](https://me.csdn.net/zjulyx1993)

> [我的知乎专栏](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [我的头条号](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [我的牛客网博客](https://blog.nowcoder.net/zjulyx)

> 我的公众号: [算法精选](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), 欢迎大家扫码关注~😊

![算法精选 - 微信扫一扫关注我](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
