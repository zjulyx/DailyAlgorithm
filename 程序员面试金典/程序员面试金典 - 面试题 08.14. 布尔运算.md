> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/boolean-evaluation-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼å’Œä¸€ä¸ªæœŸæœ›çš„å¸ƒå°”ç»“æœ resultï¼Œå¸ƒå°”è¡¨è¾¾å¼ç”± 0 (false)ã€1 (true)ã€& (AND)ã€ | (OR) å’Œ ^ (XOR) ç¬¦å·ç»„æˆã€‚å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç®—å‡ºæœ‰å‡ ç§å¯ä½¿è¯¥è¡¨è¾¾å¼å¾—å‡º result å€¼çš„æ‹¬å·æ–¹æ³•ã€‚

### ç¤ºä¾‹ 1:

- è¾“å…¥: s = "1^0|0|1", result = 0
- è¾“å‡º: 2
- è§£é‡Š: ä¸¤ç§å¯èƒ½çš„æ‹¬å·æ–¹æ³•æ˜¯
  - 1^(0|(0|1))
  - 1^((0|0)|1)

### ç¤ºä¾‹ 2:

- è¾“å…¥: s = "0&0&0&1^1|0", result = 1
- è¾“å‡º: 10

### æç¤ºï¼š

- è¿ç®—ç¬¦çš„æ•°é‡ä¸è¶…è¿‡ 19 ä¸ª

## é¢˜ç›®æ€è€ƒ

1. å¢åŠ æ‹¬å·ç­‰ä»·äºä»€ä¹ˆ?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„ä½ç½®åŠ ä¸Šæœ‰æ•ˆçš„æ‹¬å·, ä»è€Œæ”¹å˜è¿ç®—é¡ºåº
- æ¢ä¸ªè§’åº¦æ€è€ƒ, è¿™ä¹Ÿç­‰ä»·äºæˆ‘ä»¬æ”¹å˜äº†è¡¨è¾¾å¼ä¸­è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§, è¿™æ ·æ€»ä¼šæœ‰ä¸€ä¸ªè¿ç®—ç¬¦æ˜¯åœ¨æœ€åæ‰è¢«è®¡ç®—çš„
- æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åªå…³æ³¨æœ€åä¸€æ¬¡åšè¿ç®—çš„è¿ç®—ç¬¦, å…ˆå¾—åˆ°å…¶å·¦å³éƒ¨åˆ†çš„è®¡ç®—ç»“æœæ–¹æ³•æ•°, ç„¶åæ ¹æ®å½“å‰è¿ç®—ç¬¦è®¡ç®—æ€»æ–¹æ³•æ•°å³å¯:
  - è¿ç®—ç¬¦æ˜¯&, åˆ™åªæœ‰ä¸¤ä¾§ç»“æœåŒæ—¶æ˜¯ 1 æ—¶æ‰ä¼šå¾—åˆ° 1, å…¶ä½™æƒ…å†µéƒ½æ˜¯ 0
  - è¿ç®—ç¬¦æ˜¯|, åˆ™åªæœ‰ä¸¤ä¾§ç»“æœåŒæ—¶æ˜¯ 0 æ—¶æ‰ä¼šå¾—åˆ° 0, å…¶ä½™æƒ…å†µéƒ½æ˜¯ 1
  - è¿ç®—ç¬¦æ˜¯^, åˆ™å½“ä¸¤ä¾§ç»“æœç›¸åŒæ—¶ä¼šå¾—åˆ° 0, ä¸åŒæ—¶ä¼šå¾—åˆ° 1
- ä»¥ä¸Šå°±æ˜¯å…¸å‹çš„åˆ†æ²»æ€æƒ³, å…·ä½“å®ç°æ–¹é¢, æˆ‘ä»¬å¯ä»¥ä¼ å…¥å½“å‰åŒºé—´èµ·ç‚¹å’Œç»ˆç‚¹, ç„¶åéå†åŒºé—´å†…çš„è¿ç®—ç¬¦, ä¾æ¬¡é€’å½’è°ƒç”¨å­å‡½æ•°, è®¡ç®—å…¶å·¦å³ä¸¤éƒ¨åˆ†çš„ç»“æœ, å¹¶æ ¹æ®ä¸Šè¿°ä¸‰ç§æƒ…å†µè®¡ç®—å¹¶ç´¯åŠ åˆ°æœ€ç»ˆç»“æœä¸­
- å¦å¤–æ³¨æ„åˆ°åŒºé—´çš„è®¡ç®—ç»“æœå¯èƒ½è¢«ä½¿ç”¨å¤šæ¬¡, ä½†å…¶ç»“æœæœ¬èº«ä¸å˜, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é‡‡ç”¨è®°å¿†åŒ–æœç´¢çš„æ€æƒ³, å°†å…¶ç»“æœç¼“å­˜èµ·æ¥, ä»è€Œé¿å…é‡å¤è®¡ç®— (python å¯¹åº”çš„å°±æ˜¯ lru_cache, ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå­—å…¸æ¥ç¼“å­˜)
- ä¸‹é¢çš„ä»£ç å°±å¯¹åº”äº†ä¸Šé¢çš„æ•´ä¸ªè¿‡ç¨‹, å¹¶ä¸”æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N^3)`: è®°å¿†åŒ–æœç´¢å…±è®¡ç®— N\*N ä¸ªåŒºé—´, ç„¶åå†…éƒ¨è®¡ç®—è¿‡ç¨‹ä¸­ä¼šéå†å½“å‰åŒºé—´çš„æ‰€æœ‰è¿ç®—ç¬¦ (N), æ‰€ä»¥æ€»æ—¶é—´æ˜¯ N\*N\*N
- ç©ºé—´å¤æ‚åº¦ `O(N^2)`: é¢å¤–å­˜å‚¨æ¯ä¸ªåŒºé—´çš„è®¡ç®—ç»“æœ, åŒºé—´ä¸ªæ•°æ˜¯ N\*N

#### ä»£ç 

```python
class Solution:
    def countEval(self, s: str, result: int) -> int:
        # è®°å¿†åŒ–æœç´¢+é€’å½’åˆ†æ²»+ä¼ å…¥åŒºé—´
        # count(b,e)è¿”å›å½“å‰åŒºé—´[b,e]çš„æ‰€æœ‰è®¡ç®—ç»“æœä¸º0æˆ–1çš„æ–¹æ³•æ•°
        # å¯¹äºæ¯ä¸ªæ“ä½œç¬¦, åˆ†åˆ«è®¡ç®—å…¶å·¦å³è¡¨è¾¾å¼çš„0å’Œ1çš„æ•°ç›®, ç„¶åæ ¹æ®æ“ä½œç¬¦æœ¬èº«å¾—åˆ°å½“å‰æ“ä½œç¬¦çš„å¯¹åº”çš„0å’Œ1çš„æ•°ç›®
        @functools.lru_cache(None)
        def count(b, e):
            cnts = [0] * 2
            if b >= e:
                # é€’å½’å‡ºå£, åªæœ‰ä¸€ä¸ªæ•°å­—æˆ–æ²¡æœ‰æ•°å­—
                if b == e:
                    # æœ‰ä¸€ä¸ªæ•°å­—æ—¶, è¦å°†å…¶å¯¹åº”çš„æ–¹æ³•æ•°åŠ 1
                    cnts[int(s[b])] += 1
                return cnts
            for i in range(b + 1, e, 2):
                # æ³¨æ„ä»b+1å¼€å§‹éå†, ä¸”é—´è·ä¸º2, è¿™æ ·èƒ½ä¿è¯éå†æ‰€æœ‰ç¬¦å· (bå’Œeéƒ½æ˜¯æ•°å­—)
                # å½“å‰å­—ç¬¦ä¸æ˜¯æ•°å­—, å¯ä»¥å°†å®ƒä½œä¸ºæœ€åä¸€ä¸ªè¿ç®—ç¬¦, è®¡ç®—å‡ºå·¦å³ä¸¤ä¾§çš„0å’Œ1çš„ä¸ªæ•°åå†æœ€ç»ˆè®¡ç®—
                # lc0æ˜¯å·¦ä¾§éƒ¨åˆ†è®¡ç®—ç»“æœæ˜¯0çš„æ–¹æ³•æ•°, lc1æ˜¯è®¡ç®—ç»“æœæ˜¯1çš„æ–¹æ³•æ•°
                lc0, lc1 = count(b, i - 1)
                # rc0å’Œrc1åŒä¸Š, å¯¹åº”å³ä¾§éƒ¨åˆ†è®¡ç®—ç»“æœæ˜¯0æˆ–1çš„æ–¹æ³•æ•°
                rc0, rc1 = count(i + 1, e)
                if s[i] == "&":
                    # æœ€åè¿ç®—ç¬¦æ˜¯&, åˆ™åªæœ‰ä¸¤ä¾§ç»“æœåŒæ—¶æ˜¯1æ—¶æ‰ä¼šå¾—åˆ°1, å…¶ä½™æƒ…å†µéƒ½æ˜¯0
                    # å°†å·¦å³éƒ¨åˆ†å¯¹åº”ç»“æœçš„æ–¹æ³•æ•°ç›¸ä¹˜, å¹¶ç´¯åŠ åˆ°æœ€ç»ˆç»“æœä¸­
                    cnts[0] += lc0 * rc0 + lc0 * rc1 + lc1 * rc0
                    cnts[1] += lc1 * rc1
                elif s[i] == "|":
                    # æœ€åè¿ç®—ç¬¦æ˜¯|, åˆ™åªæœ‰ä¸¤ä¾§ç»“æœåŒæ—¶æ˜¯0æ—¶æ‰ä¼šå¾—åˆ°0, å…¶ä½™æƒ…å†µéƒ½æ˜¯1
                    cnts[0] += lc0 * rc0
                    cnts[1] += lc1 * rc1 + lc0 * rc1 + lc1 * rc0
                elif s[i] == "^":
                    # æœ€åè¿ç®—ç¬¦æ˜¯^, åˆ™å½“ä¸¤ä¾§ç»“æœç›¸åŒæ—¶ä¼šå¾—åˆ°0, ä¸åŒæ—¶ä¼šå¾—åˆ°1
                    cnts[0] += lc0 * rc0 + lc1 * rc1
                    cnts[1] += lc0 * rc1 + lc1 * rc0
            return cnts

        return count(0, len(s) - 1)[result]
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
