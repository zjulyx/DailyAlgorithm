> é¢˜ç›®éš¾åº¦: å›°éš¾

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/continuous-median-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

éšæœºäº§ç”Ÿæ•°å­—å¹¶ä¼ é€’ç»™ä¸€ä¸ªæ–¹æ³•ã€‚ä½ èƒ½å¦å®Œæˆè¿™ä¸ªæ–¹æ³•ï¼Œåœ¨æ¯æ¬¡äº§ç”Ÿæ–°å€¼æ—¶ï¼Œå¯»æ‰¾å½“å‰æ‰€æœ‰å€¼çš„ä¸­é—´å€¼ï¼ˆä¸­ä½æ•°ï¼‰å¹¶ä¿å­˜ã€‚

ä¸­ä½æ•°æ˜¯æœ‰åºåˆ—è¡¨ä¸­é—´çš„æ•°ã€‚å¦‚æœåˆ—è¡¨é•¿åº¦æ˜¯å¶æ•°ï¼Œä¸­ä½æ•°åˆ™æ˜¯ä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚

ä¾‹å¦‚ï¼Œ

[2,3,4] çš„ä¸­ä½æ•°æ˜¯ 3

[2,3] çš„ä¸­ä½æ•°æ˜¯ (2 + 3) / 2 = 2.5

è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼š

- void addNum(int num) - ä»æ•°æ®æµä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°åˆ°æ•°æ®ç»“æ„ä¸­ã€‚
- double findMedian() - è¿”å›ç›®å‰æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚

### ç¤ºä¾‹ï¼š

- addNum(1)
- addNum(2)
- findMedian() -> 1.5
- addNum(3)
- findMedian() -> 2

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•å°½å¯èƒ½ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, ä¸€ä¸ªå¾ˆå®¹æ˜“æƒ³åˆ°çš„æ–¹æ¡ˆå°±æ˜¯æ‰‹åŠ¨ç»´æŠ¤æœ‰åºæ•°ç»„, ç„¶åæ’å…¥æ—¶äºŒåˆ†æŸ¥æ‰¾æ’å…¥ä½ç½®, æŸ¥è¯¢æ—¶ä½¿ç”¨ä¸­é—´ä¸‹æ ‡,
- ä¸è¿‡è¿™æ ·è™½ç„¶æŸ¥è¯¢å¤æ‚åº¦æ˜¯ O(1), ä½†æ’å…¥å¤æ‚åº¦è¾¾åˆ°äº† O(N), æ•ˆç‡è¾ƒä½, æœ‰æ²¡æœ‰æ›´ä¼˜çš„æ–¹æ¡ˆå‘¢?
- æ ¹æ®ä¸­ä½æ•°æ€§è´¨, å®ƒè¦ä¹ˆæ˜¯å¶æ•°é•¿åº¦æ•°ç»„çš„ä¸¤ä¸ªä¸­é—´å€¼çš„å¹³å‡æ•°, è¦ä¹ˆæ˜¯å¥‡æ•°é•¿åº¦æ•°ç»„çš„æœ€ä¸­é—´çš„å€¼
- æ³¨æ„åˆ°ä¸­é—´å€¼å·¦è¾¹çš„éƒ¨åˆ†ä¸€å®šæ˜¯å°äºä¸­é—´å€¼çš„, è€Œå³è¾¹çš„éƒ¨åˆ†ä¸€å®šæ˜¯å¤§äºä¸­é—´å€¼çš„, æ˜¯æœ‰ä¸€å®šçš„æœ‰åºæ€§çš„
- æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹, æ„é€ ä¸¤ä¸ªå †:
  - å·¦è¾¹æ˜¯ä¸€ä¸ªå¤§é¡¶å †, å­˜æ”¾æ‰€æœ‰å°äºç­‰äºä¸­é—´å€¼çš„æ•°(å¥‡æ•°é•¿åº¦çš„è¯, å †é¡¶å°±æ˜¯ä¸­é—´å€¼)
  - å³è¾¹æ˜¯ä¸€ä¸ªå°é¡¶å †, å­˜æ”¾æ‰€æœ‰å¤§äºç­‰äºä¸­é—´å€¼çš„æ•°(å› ä¸ºå¯èƒ½æœ‰å¾ˆå¤šé‡å¤å…ƒç´ )
- **æŸ¥è¯¢ä¸­ä½æ•°**
  - å½“å‰å…ƒç´ ä¸ªæ•°ä¸ºå¥‡æ•°æ—¶, ç›´æ¥è¿”å›å·¦å †é¡¶
  - å½“å‰å…ƒç´ ä¸ªæ•°ä¸ºå¶æ•°æ—¶, è¿”å›å·¦å †é¡¶å’Œå³å †é¡¶çš„å¹³å‡å€¼
- **æ’å…¥æ–°å…ƒç´ **
  - å¦‚æœå½“å‰å·¦å †å’Œå³å †ä¸ªæ•°ç›¸åŒ, é‚£ä¹ˆå·¦å †éœ€è¦å¢åŠ ä¸€ä¸ªå…ƒç´ 
    - å…·ä½“æ˜¯å¢åŠ æ–°å…ƒç´ è¿˜æ˜¯å³å †é¡¶, åˆ™è¦çœ‹å½“å‰ num å’Œå³å †é¡¶çš„å¤§å°
    - å½“å‰ num æ›´å°çš„è¯ç›´æ¥æ’å…¥å·¦è¾¹å³å¯
    - å¦åˆ™å°±è¦å…ˆæŠŠå³å †é¡¶å…ˆæŒªåˆ°å·¦å †, ç„¶åå³å †å†æ’å…¥æ–°å…ƒç´ 
  - å¦‚æœå½“å‰å·¦å †æ¯”å³å †å¤š 1, é‚£ä¹ˆå³å †éœ€è¦å¢åŠ ä¸€ä¸ªå…ƒç´ 
    - å…·ä½“æ˜¯å¢åŠ æ–°å…ƒç´ è¿˜æ˜¯å·¦å †é¡¶, åˆ™è¦çœ‹å½“å‰ num å’Œå·¦å †é¡¶çš„å¤§å°
    - å½“å‰ num æ›´å¤§çš„è¯ç›´æ¥æ’å…¥å³è¾¹å³å¯
    - å¦åˆ™å°±è¦å…ˆæŠŠå·¦å †é¡¶å…ˆæŒªåˆ°å³å †, ç„¶åå·¦å †å†æ’å…¥æ–°å…ƒç´ 
- ä¸‹é¢ä»£ç æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(logN)`: æŸ¥è¯¢å’Œæ’å…¥éƒ½åªéœ€è¦å¸¸æ•°æ¬¡å †æ“ä½œ, å¤æ‚åº¦ä¸º O(logN)
- ç©ºé—´å¤æ‚åº¦ `O(N)`: ä¸¤ä¸ªå †å…±éœ€è¦å­˜ N ä¸ªå…ƒç´ 

#### ä»£ç 

```python
import heapq

class MedianFinder:
    def __init__(self):
        """
        initialize your data structure here.
        """
        # ä½¿ç”¨ä¸¤ä¸ªå †, å·¦è¾¹å¤§é¡¶å †, å³è¾¹å°é¡¶å †
        # æ³¨æ„pythonå†…ç½®çš„heapqæ˜¯å°é¡¶å †
        # æ‰€ä»¥å¤§é¡¶å †çš„è¯éœ€è¦å°†å…¶å€¼å–ç›¸åæ•°å†æ’å…¥, ä¹Ÿä¸è¦å¿˜äº†popçš„æ—¶å€™ä¹Ÿè¦å†å–åå›æ¥
        self.left = []
        self.right = []

    def addNum(self, num: int) -> None:
        if len(self.left) == len(self.right):
            # å·¦å †éœ€è¦å¢åŠ ä¸€ä¸ªå…ƒç´ 
            if not self.left or num <= self.right[0]:
                # å·¦å †ä¸å­˜åœ¨, æˆ–è€…æ–°å…ƒç´ ä¸å¤§äºå³å †é¡¶, æ’åˆ°å·¦è¾¹å¤§é¡¶å †
                heapq.heappush(self.left, -num)
            else:
                # å¦åˆ™å…ˆæŠŠå³å †é¡¶æ’åˆ°å·¦è¾¹, ç„¶åå³å †å†æ’å…¥æ–°å…ƒç´ 
                heapq.heappush(self.left, -heapq.heappop(self.right))
                heapq.heappush(self.right, num)
        else:
            # å³å †éœ€è¦å¢åŠ ä¸€ä¸ªå…ƒç´ 
            # æ ¹æ®æ’å…¥é€»è¾‘, æ­¤æ—¶å·¦å †è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ , å¯ä»¥ç›´æ¥æ‹¿åˆ°å·¦å †é¡¶
            if num >= -self.left[0]:
                # æ–°å…ƒç´ ä¸å°äºå·¦å †é¡¶, ç›´æ¥æ’åˆ°å³è¾¹å°é¡¶å †å³å¯
                heapq.heappush(self.right, num)
            else:
                # å¦åˆ™å…ˆæŠŠå·¦å †é¡¶æ’åˆ°å³è¾¹, ç„¶åå·¦å †å†æ’å…¥æ–°å…ƒç´ 
                heapq.heappush(self.right, -heapq.heappop(self.left))
                heapq.heappush(self.left, -num)

    def findMedian(self) -> float:
        if len(self.left) == len(self.right):
            # å¶æ•°ä¸ªå…ƒç´ , å–ä¸¤ä¸ªå †é¡¶çš„å¹³å‡å€¼
            return (-self.left[0] + self.right[0]) / 2
        else:
            # å¥‡æ•°ä¸ªå…ƒç´ , å·¦å †ä¸ªæ•°è‡³å°‘ä¸º1, å–å·¦å †é¡¶
            return -self.left[0]
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
