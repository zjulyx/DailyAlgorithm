> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/sort-of-stacks-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

æ ˆæ’åºã€‚ ç¼–å†™ç¨‹åºï¼Œå¯¹æ ˆè¿›è¡Œæ’åºä½¿æœ€å°å…ƒç´ ä½äºæ ˆé¡¶ã€‚æœ€å¤šåªèƒ½ä½¿ç”¨ä¸€ä¸ªå…¶ä»–çš„ä¸´æ—¶æ ˆå­˜æ”¾æ•°æ®ï¼Œä½†ä¸å¾—å°†å…ƒç´ å¤åˆ¶åˆ°åˆ«çš„æ•°æ®ç»“æ„ï¼ˆå¦‚æ•°ç»„ï¼‰ä¸­ã€‚è¯¥æ ˆæ”¯æŒå¦‚ä¸‹æ“ä½œï¼špushã€popã€peek å’Œ isEmptyã€‚å½“æ ˆä¸ºç©ºæ—¶ï¼ŒpeekÂ  è¿”å› -1ã€‚

### ç¤ºä¾‹ 1:

- è¾“å…¥ï¼š
  ["SortedStack", "push", "push", "peek", "pop", "peek"]
  [[], [1], [2], [], [], []]
- è¾“å‡ºï¼š
  [null,null,null,1,null,2]

### ç¤ºä¾‹ 2:

- è¾“å…¥ï¼š
  ["SortedStack", "pop", "pop", "push", "pop", "isEmpty"]
  [[], [], [], [1], [], []]
- è¾“å‡ºï¼š
  [null,null,null,null,null,true]

### è¯´æ˜:

æ ˆä¸­çš„å…ƒç´ æ•°ç›®åœ¨[0, 5000]èŒƒå›´å†…ã€‚

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•åˆ©ç”¨è¾…åŠ©æ ˆæ¥åšåˆ°æœ‰åº, å¦‚ä½•ä¼˜åŒ–?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1

#### æ€è·¯

- æ ¹æ®é¢˜ç›®æè¿°, æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ’å…¥æ’åºçš„æ€è·¯ç›´æ¥æ¨¡æ‹Ÿæ•´ä¸ªè¿‡ç¨‹
- push çš„æ—¶å€™ä½¿ç”¨è¾…åŠ©æ ˆæ¥ä¿è¯ val æ’å…¥åˆ°åˆé€‚çš„ä½ç½®, ä¸»æ ˆä¿æŒæ ˆåº•åˆ°æ ˆé¡¶é€’å‡çš„é¡ºåº
- è¿™æ · pop å’Œ push çš„æ—¶å€™å°±å¯ä»¥ç›´æ¥æ‹¿åˆ°æ ˆé¡¶, å®ƒå°±æ˜¯æœ€å°å€¼

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦
  - peek å’Œ pop æ˜¾ç„¶æ˜¯ O(1)
  - push éœ€è¦ O(N)
- ç©ºé—´å¤æ‚åº¦
  - ä½¿ç”¨äº†ä¸¤ä¸ªæ ˆå­˜ N ä¸ªå…ƒç´ 

#### ä»£ç 

```python
class SortedStack:
    # æ–¹æ³•1: æ¨¡æ‹Ÿ, æ’å…¥æ’åºæ€è·¯
    # pushçš„æ—¶å€™ä½¿ç”¨è¾…åŠ©æ ˆæ¥ä¿è¯valæ’å…¥åˆ°åˆé€‚çš„ä½ç½®, ä¸»æ ˆä¿æŒæ ˆåº•åˆ°æ ˆé¡¶é€’å‡çš„é¡ºåº
    def __init__(self):
        self.stack = []

    def push(self, val: int) -> None:
        temp = []
        while self.stack and self.stack[-1] < val:
            # å°†å½“å‰æ ˆä¸­å°äºvalçš„éƒ¨åˆ†å…ˆä¸´æ—¶å­˜åˆ°è¾…åŠ©æ ˆä¸­
            temp.append(self.stack.pop())
        # æ‰¾åˆ°åˆé€‚ä½ç½®äº†, å°†å½“å‰valè¿½åŠ åˆ°æ ˆé¡¶
        self.stack.append(val)
        while temp:
            # å†å°†è¾…åŠ©æ ˆçš„å…ƒç´ å€’å›æ¥, ä¿è¯ä»æœ‰åº
            self.stack.append(temp.pop())

    def pop(self) -> None:
        if self.isEmpty():
            return
        # ä¸»æ ˆæœ‰åº, æ‰€ä»¥ç›´æ¥popæ ˆé¡¶å³å¯
        self.stack.pop()

    def peek(self) -> int:
        if self.isEmpty():
            return -1
        # ä¸»æ ˆæœ‰åº, æ‰€ä»¥æ ˆé¡¶å³ä¸ºæ‰€æ±‚
        return self.stack[-1]

    def isEmpty(self) -> bool:
        return not self.stack
```

### æ–¹æ¡ˆ 2

#### æ€è·¯

- æ–¹æ¡ˆ 1 åœ¨æ¯æ¬¡ push æ—¶éƒ½éœ€è¦ä»è¾…åŠ©æ ˆå’Œä¸»æ ˆä¸­æ¥å›å€’æ•°æ®, ç‰¹åˆ«æ˜¯è¿ç»­ push å¤šä¸ªè¾ƒå¤§å€¼æ—¶, æ•ˆç‡å¾ˆä½, å› ä¸ºæ¯æ¬¡éƒ½éœ€è¦å°†è¾ƒå¤§å€¼åˆ°æ ˆé¡¶çš„éƒ¨åˆ†å€’å…¥è¾…åŠ©æ ˆ, æœ€åå†å€’å›æ¥, å¦‚ä½•ä¼˜åŒ–è¿™éƒ¨åˆ†æ“ä½œå‘¢?
- æˆ‘ä»¬å¯ä»¥æŒä¹…åŒ–å­˜å‚¨è¾…åŠ©æ ˆ, é¿å…è¿ç»­ push å¤šä¸ªå€¼æ—¶çš„æ¥å›å€’å…¥
- è¾…åŠ©æ ˆä»æ ˆåº•åˆ°æ ˆé¡¶å•è°ƒé€’å¢, è€Œä¸»æ ˆä»æ ˆåº•åˆ°æ ˆé¡¶å•è°ƒé€’å‡, ä¸”è¾…åŠ©æ ˆå…ƒç´ éƒ½å°äºä¸»æ ˆå…ƒç´ 
- è¿™æ · push çš„æ—¶å€™åªéœ€è¦æ ¹æ®ä¸¤ä¸ªæ ˆæ ˆé¡¶çš„å€¼, æ¥å›å€’æœ‰é™æ¬¡åå°±æ‰¾åˆ°äº†åˆé€‚çš„æ’å…¥ä½ç½®, æœ€å…³é”®çš„æ˜¯è¿ç»­ push å¤šä¸ªå€¼çš„æ—¶å€™, ä¹Ÿä¸éœ€è¦æ¯æ¬¡éƒ½å°†è¯¥å€¼åˆ°æœ€å°å€¼ä¹‹é—´çš„éƒ¨åˆ†å€’å…¥åˆ°è¾…åŠ©æ ˆå†å€’å›æ¥
- è€Œ pop/peek çš„æ—¶å€™åˆ™å¿…é¡»è¦å°†è¾…åŠ©æ ˆçš„å…ƒç´ å€’å…¥ä¸»æ ˆä¸­, ä½¿å¾—ä¸»æ ˆæ ˆé¡¶æ˜¯æœ€å°å€¼. è¿™æ ·ä¹Ÿä¸ä¼šé™ä½è¿ç»­ pop/peek çš„æ€§èƒ½: å› ä¸ºç¬¬ä¸€æ¬¡ pop/peek åçš„ä¸»æ ˆå°±æœ‰åºäº†, ä¹‹åçš„ pop/peek ç›´æ¥æ‹¿æ ˆé¡¶å³å¯, ä¸éœ€è¦å†æ¬¡å€’å…¥

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦
  - peek å’Œ pop è™½ç„¶æœ‰å¾ªç¯, ä½†å‡æ‘Šä¸‹æ¥ä»æ˜¯ O(1), å› ä¸ºè¿ç»­çš„ peek/pop åªæœ‰ç¬¬ä¸€æ¬¡æ“ä½œéœ€è¦å¾ªç¯
  - push éœ€è¦ O(N), ä½†å¯¹è¿ç»­çš„ push æœ‰æ‰€ä¼˜åŒ–
- ç©ºé—´å¤æ‚åº¦
  - ä½¿ç”¨äº†ä¸¤ä¸ªæ ˆå­˜ N ä¸ªå…ƒç´ 

#### ä»£ç 

```python
class SortedStack:
    # æ–¹æ³•2: æŒä¹…åŒ–å­˜å‚¨è¾…åŠ©æ ˆ, é¿å…è¿ç»­pushå¤šä¸ªå€¼æ—¶çš„æ¥å›å€’å…¥
    def __init__(self):
        self.stack = []
        self.temp = []

    def push(self, val: int) -> None:
        while self.stack and self.stack[-1] < val:
            # ä¸»æ ˆæ ˆé¡¶å°äºval, éœ€è¦å°†ä¸»æ ˆæ ˆé¡¶å…ƒç´ å€’å…¥è¾…åŠ©æ ˆä¸­
            self.temp.append(self.stack.pop())
        while self.temp and self.temp[-1] > val:
            # è¾…åŠ©æ ˆæ ˆé¡¶å¤§äºval, éœ€è¦å°†è¾…åŠ©æ ˆæ ˆé¡¶å…ƒç´ å€’å…¥ä¸»æ ˆä¸­
            self.stack.append(self.temp.pop())
        # æ‰¾åˆ°åˆé€‚ä½ç½®äº†, æ’å…¥ä¸»æ ˆæ ˆé¡¶
        self.stack.append(val)

    def pop(self) -> None:
        if self.isEmpty():
            return
        while self.temp:
            # å°†å½“å‰è¾…åŠ©æ ˆå…ƒç´ å€’å…¥ä¸»æ ˆä¸­
            self.stack.append(self.temp.pop())
        # æ­¤æ—¶ä¸»æ ˆæœ‰åº, æ‰€ä»¥ç›´æ¥popæ ˆé¡¶å³å¯
        self.stack.pop()

    def peek(self) -> int:
        if self.isEmpty():
            return -1
        while self.temp:
            # å°†å½“å‰è¾…åŠ©æ ˆå…ƒç´ å€’å…¥ä¸»æ ˆä¸­
            self.stack.append(self.temp.pop())
        # æ­¤æ—¶ä¸»æ ˆæœ‰åº, æ‰€ä»¥æ ˆé¡¶å³ä¸ºæ‰€æ±‚
        return self.stack[-1]

    def isEmpty(self) -> bool:
        return not self.stack and not self.temp
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: ç®—æ³•ç²¾é€‰, æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://mmbiz.qpic.cn/mmbiz_jpg/1KjZicMlYPMgZWmoL4eYcs6UcfmvsetDWME2YJyaCp9oT9z3U573FWENBNhyOByxYI0epew6O37hiaOhdh90QeJg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)
