> é¢˜ç›®éš¾åº¦: ç®€å•

> [åŸé¢˜é“¾æ¥](https://leetcode.cn/problems/the-masseuse-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

- ä¸€ä¸ªæœ‰åçš„æŒ‰æ‘©å¸ˆä¼šæ”¶åˆ°æºæºä¸æ–­çš„é¢„çº¦è¯·æ±‚ï¼Œæ¯ä¸ªé¢„çº¦éƒ½å¯ä»¥é€‰æ‹©æ¥æˆ–ä¸æ¥ã€‚åœ¨æ¯æ¬¡é¢„çº¦æœåŠ¡ä¹‹é—´è¦æœ‰ä¼‘æ¯æ—¶é—´ï¼Œå› æ­¤å¥¹ä¸èƒ½æ¥å—ç›¸é‚»çš„é¢„çº¦ã€‚ç»™å®šä¸€ä¸ªé¢„çº¦è¯·æ±‚åºåˆ—ï¼Œæ›¿æŒ‰æ‘©å¸ˆæ‰¾åˆ°æœ€ä¼˜çš„é¢„çº¦é›†åˆï¼ˆæ€»é¢„çº¦æ—¶é—´æœ€é•¿ï¼‰ï¼Œè¿”å›æ€»çš„åˆ†é’Ÿæ•°ã€‚

- æ³¨æ„ï¼šæœ¬é¢˜ç›¸å¯¹åŸé¢˜ç¨ä½œæ”¹åŠ¨

### ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼š [1,2,3,1]
- è¾“å‡ºï¼š 4
- è§£é‡Šï¼š é€‰æ‹© 1 å·é¢„çº¦å’Œ 3 å·é¢„çº¦ï¼Œæ€»æ—¶é•¿ = 1 + 3 = 4ã€‚

### ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼š [2,7,9,3,1]
- è¾“å‡ºï¼š 12
- è§£é‡Šï¼š é€‰æ‹© 1 å·é¢„çº¦ã€ 3 å·é¢„çº¦å’Œ 5 å·é¢„çº¦ï¼Œæ€»æ—¶é•¿ = 2 + 9 + 1 = 12ã€‚

### ç¤ºä¾‹ 3ï¼š

- è¾“å…¥ï¼š [2,1,4,5,3,1,1,3]
- è¾“å‡ºï¼š 12
- è§£é‡Šï¼š é€‰æ‹© 1 å·é¢„çº¦ã€ 3 å·é¢„çº¦ã€ 5 å·é¢„çº¦å’Œ 8 å·é¢„çº¦ï¼Œæ€»æ—¶é•¿ = 2 + 4 + 3 + 3 = 12ã€‚

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•æ ¹æ®å‰ä¸€ä¸ªé¢„çº¦æƒ…å†µå¾—åˆ°å½“å‰é¢„çº¦æƒ…å†µ?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, å¯¹äºå½“å‰é¢„çº¦è€Œè¨€, æœ‰ä¸¤ç§é€‰æ‹©: 1. æ¥å—è¯¥é¢„çº¦, ä½†éœ€è¦ä¸æ¥ä¸Šä¸€é¢„çº¦; 2. ä¸æ¥è¯¥é¢„çº¦, é‚£ä¹ˆæ¥ä¸æ¥ä¸Šä¸€é¢„çº¦éƒ½å¯ä»¥
- ä¹Ÿå°±æ˜¯ç›¸é‚»é¢„çº¦ä¹‹é—´çš„å…³ç³»éå¸¸æ˜ç¡®, å¯ä»¥å°è¯•åŠ¨æ€è§„åˆ’çš„æ€è·¯
- å®šä¹‰` dp[i][0]` ä¸ºä¸æ¥å—å½“å‰é¢„çº¦æƒ…å†µä¸‹çš„æœ€å¤§é¢„çº¦æ—¶é•¿, è€Œ` dp[i][1]` æ˜¯æ¥å—å½“å‰é¢„çº¦æƒ…å†µä¸‹çš„æœ€å¤§é¢„çº¦æ—¶é•¿
- åˆ™æ ¹æ®ä¸Šè¿°åˆ†æ, æœ‰å¦‚ä¸‹è½¬ç§»æ–¹ç¨‹:
  - `dp[i][0]=max(dp[i-1][0], dp[i-1][1])`
  - `dp[i][1]=dp[i-1][0]+nums[i]`
- æ˜¾ç„¶åˆå§‹åŒ–ä¸º `dp[0][0]=0`, è€Œ `dp[0][1]=nums[0]`
- æœ€ç»ˆç»“æœå°±æ˜¯`max(dp[n-1][0], dp[n-1][1])`
- å¦å¤–, æ³¨æ„åˆ°è¿™é‡ŒæŸä¸ªä¸‹æ ‡çš„ dp å€¼åªä¸å‰ä¸€ä¸‹æ ‡æœ‰å…³, æ‰€ä»¥å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–
- åªä½¿ç”¨ä¸¤ä¸ªå˜é‡ dp0 å’Œ dp1, ç„¶åæ¯æ¬¡è½¬ç§»æ—¶å¥—ç”¨ä¸Šè¿°å…¬å¼å³å¯, è¿™æ ·åªéœ€è¦ O(1) ç©ºé—´
- ä¸‹é¢ä»£ç æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N)`: éœ€è¦éå†æ•´ä¸ªæ•°ç»„ä¸€é
- ç©ºé—´å¤æ‚åº¦ `O(1)`: ä¼˜åŒ–ååªéœ€è¦å‡ ä¸ªå¸¸æ•°ç©ºé—´çš„å˜é‡

#### ä»£ç 

```python
class Solution:
    def massage(self, nums: List[int]) -> int:
        # åŒå˜é‡dp
        if not nums:
            # æ²¡æœ‰é¢„çº¦, è¿”å›0
            return 0
        # dp0è¡¨ç¤ºä¸æ¥å½“å‰é¢„çº¦çš„æœ€é•¿æ—¶é—´, dp1è¡¨ç¤ºæ¥å½“å‰é¢„çº¦çš„æœ€é•¿æ—¶é—´
        # åˆå§‹åŒ–dp1ä¸ºnums[0]
        dp0, dp1 = 0, nums[0]
        for x in nums[1:]:
            # ä»ä¸‹æ ‡1å¼€å§‹éå†
            # ä¸æ¥å½“å‰é¢„çº¦æ—¶, dp0æ›´æ–°ä¸ºå‰ä¸€dp0å’Œdp1çš„è¾ƒå¤§å€¼
            # æ¥å½“å‰é¢„çº¦æ—¶, dp1åªèƒ½æ›´æ–°ä¸ºå‰ä¸€dp0åŠ ä¸Šå½“å‰æ—¶é—´, å› ä¸ºä¸èƒ½æ¥å—ç›¸é‚»é¢„çº¦
            dp0, dp1 = max(dp1, dp0), dp0 + x
        # æœ€ç»ˆç»“æœå°±æ˜¯dp0å’Œdp1çš„è¾ƒå¤§å€¼
        return max(dp0, dp1)
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
