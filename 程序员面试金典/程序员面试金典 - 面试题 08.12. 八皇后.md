> é¢˜ç›®éš¾åº¦: å›°éš¾

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/eight-queens-lcci/)

> ä»Šå¤©ç»§ç»­æ›´æ–°ç¨‹åºå‘˜é¢è¯•é‡‘å…¸ç³»åˆ—, å¤§å®¶åœ¨å…¬ä¼—å· **ç®—æ³•ç²¾é€‰** é‡Œå›å¤ **é¢è¯•é‡‘å…¸** å°±èƒ½çœ‹åˆ°è¯¥ç³»åˆ—å½“å‰è¿è½½çš„æ‰€æœ‰æ–‡ç« äº†, è®°å¾—å…³æ³¨å“¦~

## é¢˜ç›®æè¿°

è®¾è®¡ä¸€ç§ç®—æ³•ï¼Œæ‰“å° N çš‡ååœ¨ N Ã— N æ£‹ç›˜ä¸Šçš„å„ç§æ‘†æ³•ï¼Œå…¶ä¸­æ¯ä¸ªçš‡åéƒ½ä¸åŒè¡Œã€ä¸åŒåˆ—ï¼Œä¹Ÿä¸åœ¨å¯¹è§’çº¿ä¸Šã€‚è¿™é‡Œçš„â€œå¯¹è§’çº¿â€æŒ‡çš„æ˜¯æ‰€æœ‰çš„å¯¹è§’çº¿ï¼Œä¸åªæ˜¯å¹³åˆ†æ•´ä¸ªæ£‹ç›˜çš„é‚£ä¸¤æ¡å¯¹è§’çº¿ã€‚

æ³¨æ„ï¼šæœ¬é¢˜ç›¸å¯¹åŸé¢˜åšäº†æ‰©å±•

### ç¤ºä¾‹:

- è¾“å…¥ï¼š4
- è¾“å‡ºï¼š[[".Q..","...Q","Q...","..Q."],["..Q.","Q...","...Q",".Q.."]]
- è§£é‡Š: 4 çš‡åé—®é¢˜å­˜åœ¨å¦‚ä¸‹ä¸¤ä¸ªä¸åŒçš„è§£æ³•ã€‚

```
[
Â [".Q..", Â // è§£æ³• 1
Â  "...Q",
Â  "Q...",
Â  "..Q."],

Â ["..Q.", Â // è§£æ³• 2
Â  "Q...",
Â  "...Q",
Â  ".Q.."]
]
```

## é¢˜ç›®æ€è€ƒ

1. å¦‚ä½•åˆ©ç”¨å·²ç»è®¡ç®—å‡ºçš„ç»“æœ?

## è§£å†³æ–¹æ¡ˆ

#### æ€è·¯

- åˆ†æé¢˜ç›®, æœ‰æ•ˆçš„æ‘†æ”¾éœ€è¦æ»¡è¶³å››ä¸ªæ¡ä»¶:
  1. ä»»æ„ä¸¤ä¸ªçš‡åéƒ½ä¸åœ¨åŒä¸€è¡Œ;
  2. ä»»æ„ä¸¤ä¸ªçš‡åéƒ½ä¸åœ¨åŒä¸€åˆ—;
  3. ä»»æ„ä¸¤ä¸ªçš‡åéƒ½ä¸åœ¨åŒä¸€æ­£å‘å¯¹è§’çº¿ä¸Š (ä¾‹å¦‚(0,1)å’Œ(1,2)æ˜¯åœ¨åŒä¸€æ­£å¯¹è§’çº¿);
  4. ä»»æ„ä¸¤ä¸ªçš‡åéƒ½ä¸åœ¨åŒä¸€åå‘å¯¹è§’çº¿ä¸Š (ä¾‹å¦‚(0,1)å’Œ(1,0)æ˜¯åœ¨åŒä¸€åå¯¹è§’çº¿);
- æˆ‘ä»¬å¯ä»¥é€è¡Œç»Ÿè®¡, æ¯ä¸€è¡Œä¿è¯åªæ”¾ç½®ä¸€ä¸ªçš‡å, è¿™æ ·è‡ªåŠ¨æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶; è€Œå¯¹äºå‰©ä¸‹ 3 ä¸ªæ¡ä»¶, æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªé›†åˆ, è®°å½•å½“å‰å·²ç»ä½¿ç”¨çš„åˆ—/æ­£å¯¹è§’çº¿/åå¯¹è§’çº¿
- å…¶ä¸­åˆ—é›†åˆç›´æ¥å­˜å‚¨åˆ—å·å³å¯; è€Œå¯¹äºæ­£å¯¹è§’çº¿/åå¯¹è§’çº¿é›†åˆ, é€šè¿‡è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°: å‡è®¾æœ‰ä¸¤ä¸ªåæ ‡(r1,c1)å’Œ(r2,c2), å½“`r1-c1==r2-c2`æ—¶, å®ƒä»¬åœ¨åŒä¸€æ­£å¯¹è§’çº¿ä¸Š, è€Œå½“`r1+c1==r2+c2`æ—¶, å®ƒä»¬åœ¨åŒä¸€åå¯¹è§’çº¿ä¸Š, ä¹Ÿå³æ­£å¯¹è§’çº¿é›†åˆå­˜å‚¨`r-c`, åå¯¹è§’çº¿é›†åˆå­˜å‚¨`r+c`
- æå®šäº†éœ€è¦çš„æ•°æ®ç»“æ„, æ¥ä¸‹æ¥å°±æ˜¯å…·ä½“å®ç°äº†, è¿™é‡Œç”¨çš„æ˜¯å…¸å‹çš„é€’å½’å›æº¯æ€è·¯:
  1. å¯¹äºæ¯ä¸€è¡Œ r, æˆ‘ä»¬éƒ½éå†æ‰€æœ‰åˆ— c, æ£€æŸ¥å½“å‰åæ ‡(r,c)æ˜¯å¦åœ¨ä¸Šè¿°ä¸‰ä¸ªé›†åˆä¸­
  2. è¯¥åæ ‡åŒæ—¶ä¸åœ¨ä¸‰ä¸ªé›†åˆçš„è¯, è¯´æ˜æ»¡è¶³æ‰€æœ‰æ¡ä»¶, å¯ä»¥æŠŠçš‡åæ”¾åœ¨è¿™é‡Œ
  3. ç„¶åè¿½åŠ è¯¥è¡Œå­—ç¬¦ä¸², å¹¶æ›´æ–°ç›¸åº”é›†åˆ, ç»§ç»­é€’å½’è°ƒç”¨, å¤„ç†ä¸‹ä¸€è¡Œ
- ä¸‹é¢çš„ä»£ç ä¸­æœ‰è¯¦ç»†çš„æ³¨é‡Š, æ–¹ä¾¿å¤§å®¶ç†è§£

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ `O(N!)`: ç¬¬ä¸€è¡Œæœ‰ N ç§é€‰æ‹©, ç¬¬äºŒè¡Œæœ‰ N-1 ç§é€‰æ‹©, ä¾æ­¤ç±»æ¨, å…±éœ€è€ƒè™‘ `N!` ç§æƒ…å†µ
- ç©ºé—´å¤æ‚åº¦ `O(N)`: æ— è®ºæ˜¯é€’å½’æ ˆ, è¿˜æ˜¯ä¸‰ä¸ªé›†åˆ, æœ€å¤šéƒ½åªæœ‰ N ä¸ªå…ƒç´ 

#### ä»£ç 

```python
class Solution:
    def solveNQueens(self, n: int) -> List[List[str]]:
        # å›æº¯+ä¸‰é›†åˆ
        res = []

        # ä½¿ç”¨ä¸‰ä¸ªé›†åˆåˆ†åˆ«è®°å½•å½“å‰ç”¨è¿‡çš„åˆ—/å¯¹è§’çº¿/åå¯¹è§’çº¿
        def solve(r, board, cols, diags, rdiags):
            if r == n:
                # éå†å®Œæ‰€æœ‰è¡Œäº†, æ‰¾åˆ°ä¸€ä¸ªæœ‰æ•ˆè§£, å°†å…¶åŠ å…¥æœ€ç»ˆç»“æœä¸­
                res.append(board)
                return
            for c in range(n):
                # æ³¨æ„å¯¹è§’çº¿æ˜¯è®°å½•r-c, åå¯¹è§’çº¿æ˜¯è®°å½•r+c!!!!
                if c not in cols and r - c not in diags and r + c not in rdiags:
                    # å½“å‰ç‚¹æ»¡è¶³ä¸å’Œå·²æœ‰ç‚¹åœ¨åŒä¸€åˆ—/å¯¹è§’çº¿/åå¯¹è§’çº¿ä¸Š, å¯ä»¥å°†çš‡åæ”¾åœ¨è¿™é‡Œ
                    # è¿½åŠ è¯¥è¡Œå­—ç¬¦ä¸²å¹¶æ›´æ–°ç›¸åº”é›†åˆ, ç»§ç»­é€’å½’è°ƒç”¨
                    solve(r + 1, board + ["." * c + "Q" + "." * (n - c - 1)], cols | {c}, diags | {r - c}, rdiags | {r + c})

        solve(0, [], set(), set(), set())
        return res
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„ GitHub](https://github.com/zjulyx)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„å¤´æ¡å·](https://www.toutiao.com/c/user/1090304683804520/#mid=1671643017345028)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: [ç®—æ³•ç²¾é€‰](https://mp.weixin.qq.com/s?__biz=MzA5MDk1MjI5MA==&mid=2247484158&idx=1&sn=90176bac32cf7af40e4074c721fd8a95&chksm=900285f3a7750ce5a068c9c9773781461819633f2fd60533732637ec9520c908371ebc218d49&scene=178&cur_album_id=1386231241346859009#rd), æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![ç®—æ³•ç²¾é€‰ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://pic1.zhimg.com/80/v2-7c988a7b35886df51596ef23616764ac_1440w.jpg)
