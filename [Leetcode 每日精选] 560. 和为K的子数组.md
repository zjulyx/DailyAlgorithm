> é¢˜ç›®éš¾åº¦: ä¸­ç­‰

> [åŸé¢˜é“¾æ¥](https://leetcode-cn.com/problems/subarray-sum-equals-k/)

> æ„Ÿè§‰ä»Šå¤©å®˜æ–¹çš„æ¯æ—¥ä¸€é¢˜ä¸é”™, é¢˜ç›®æ²¡æœ‰åƒå‰ä¸¤å¤©çš„åŸºç¡€å±‚åºéå†/åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—é‚£æ ·çƒ‚å¤§è¡—, é¢˜ç›®æè¿°ä¹Ÿå¾ˆç®€æ˜æ˜“æ‡‚, æ‰€ä»¥ä»Šå¤©ä¹Ÿæ¥åšè¿™é“å§ ğŸ˜†

## é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•° kï¼Œä½ éœ€è¦æ‰¾åˆ°è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚

- æ•°ç»„çš„é•¿åº¦ä¸º [1, 20,000]ã€‚
- æ•°ç»„ä¸­å…ƒç´ çš„èŒƒå›´æ˜¯ [-1000, 1000] ï¼Œä¸”æ•´æ•° k çš„èŒƒå›´æ˜¯ [-1e7, 1e7]ã€‚

## é¢˜ç›®æ ·ä¾‹

### ç¤ºä¾‹ 1

#### è¾“å…¥

nums = [1,1,1], k = 2

#### è¾“å‡º

2

#### è§£é‡Š

[1,1] ä¸ [1,1] ä¸ºä¸¤ç§ä¸åŒçš„æƒ…å†µã€‚

## é¢˜ç›®æ€è€ƒ

1. æ ¹æ®æ•°æ®è§„æ¨¡, å¦‚æœç®—æ³•æ˜¯ O(N^3)å¤æ‚åº¦è‚¯å®šè¶…æ—¶, O(N^2)çš„ä¹Ÿå¤Ÿå‘›, æœ‰æ²¡æœ‰æ›´ä¼˜çš„åšæ³•å‘¢?
2. æ ¹æ®**è¿ç»­å­æ•°ç»„ä¹‹å’Œ**, ä½ æœ‰æ²¡æœ‰è”æƒ³åˆ°ä»€ä¹ˆé¢„å¤„ç†æ‰‹æ®µ?

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1

#### æ€è·¯

- å¾ˆå®¹æ˜“æƒ³åˆ°å¯ä»¥å›ºå®šè¿ç»­å­æ•°ç»„çš„èµ·ç‚¹, ç„¶åéå†ä¹‹åçš„å…ƒç´ , ä½¿ç”¨ä¸€ä¸ªå˜é‡ sum è¡¨ç¤ºä»èµ·ç‚¹åˆ°å½“å‰ä¸‹æ ‡çš„å’Œ, å¦‚æœå’Œä¸º k çš„è¯å°±æŠŠç»“æœåŠ  1
- **æ³¨æ„: å› ä¸ºè¿™ä¸ªæ–¹æ³•å¤æ‚åº¦è¿˜æ˜¯æœ‰ç‚¹é«˜, å¯¼è‡´æœ‰äº›è¯­è¨€ä¼š TLE, æ‰€ä»¥åªæŠŠå®ƒä½œä¸ºæ¨å¯¼ä¸‹é¢æ›´ä¼˜æ–¹æ¡ˆçš„åŸºç¡€...**

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(N^2): æ€»å…± N ä¸ªèµ·ç‚¹, ç„¶åæ¯ä¸ªèµ·ç‚¹å¼€å§‹è¦éå† N ä¸ªå…ƒç´ , æ‰€ä»¥æ˜¯ O(N^2)
- ç©ºé—´å¤æ‚åº¦ O(1): åªä½¿ç”¨äº†å‡ ä¸ªå˜é‡

#### ä»£ç 

##### Python 3

```python
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        res = 0
        for start in range(len(nums)):
            cursum = 0
            for end in range(start, len(nums)):
                cursum += nums[end]
                if cursum == k:
                    res += 1
        return res
```

##### C++

```cpp
class Solution
{
public:
    int subarraySum(vector<int> &nums, int k)
    {
        int res = 0;
        for (int start = 0; start < nums.size(); ++start)
        {
            int cursum = 0;
            for (int end = start; end < nums.size(); ++end)
            {
                cursum += nums[end];
                if (cursum == k)
                {
                    res += 1;
                }
            }
        }
        return res;
    }
};
```

### æ–¹æ¡ˆ 2

#### æ€è·¯

- å›é¡¾æ–¹æ¡ˆ 1, æˆ‘ä»¬å¯¹äºæ¯ä¸ªèµ·ç‚¹éƒ½éå†äº†ä¸€éä»å®ƒå¼€å§‹çš„å‰ç¼€å’Œ, ä½†æ˜¯è¿™äº›å‰ç¼€å’Œå®Œå…¨å¯ä»¥é€šè¿‡ä» 0 å¼€å§‹çš„ä¸¤ä¸ªå‰ç¼€å’Œç›¸å‡æ‰€å¾—: ä¾‹å¦‚è¦æ±‚[2,3]çš„å’Œ, å¯ä»¥ç”¨[0,3]çš„å’Œå‡å»[0,1]çš„å’Œå³å¯å¾—åˆ°
- è¿™æ ·åªéœ€è¦éå†ä¸€éæ•°ç»„, å­˜ä¸‹æ‰€æœ‰çš„å‰ç¼€å’Œ, å°±èƒ½å¾—åˆ°ä»»æ„è¿ç»­åŒºé—´çš„å’Œäº†
- æ‰€ä»¥å…·ä½“æ€è·¯å¦‚ä¸‹
  1. ä½¿ç”¨ä¸€ä¸ªå˜é‡è®°å½•å½“å‰å‰ç¼€å’Œ
  2. ä½¿ç”¨ä¸€ä¸ªè®¡æ•°å­—å…¸ç»Ÿè®¡å½“å‰å‰ç¼€å’Œçš„å‡ºç°æ¬¡æ•°
  3. ç„¶åéå†åˆ°æ¯ä¸ªå…ƒç´ æ—¶, çœ‹çœ‹å½“å‰å‰ç¼€å’Œ cursum å‡å» k æ˜¯å¦åœ¨å­—å…¸ä¸­, åœ¨çš„è¯æœ€ç»ˆç»“æœå°±åŠ ä¸Šå‡ºç°çš„æ¬¡æ•° cnt å³å¯. ä¸¾ä¸ªä¾‹å­, å‡è®¾[0,1]çš„å’Œæ˜¯ cursum-k, [0,3]çš„å’Œæ˜¯ cursum, é‚£ä¹ˆ[2,3]çš„å’Œå°±æ˜¯ k, æ˜¯ä¸€ä¸ªæ»¡è¶³è¦æ±‚çš„è¿ç»­å­æ•°ç»„
  4. æœ€åä¸è¦å¿˜äº†åŠ ä¸Šæœ¬èº«å‰ç¼€å’Œå°±æ˜¯ k çš„åŒºé—´æ•°ç›®
- è¿˜æœ‰è¦æ³¨æ„ä¸€ç‚¹æ˜¯ä¸èƒ½å…ˆæ›´æ–°äº†è®¡æ•°å­—å…¸, å†ç´¯åŠ ç»“æœ, å› ä¸º k æœ‰å¯èƒ½æ˜¯ 0, è¿™æ—¶å¦‚æœå…ˆæ›´æ–°çš„è¯å°±ä¼šé”™è¯¯åœ°æŠŠæ¯ä¸ªå‰ç¼€å’Œçš„æ¬¡æ•°åŠ åˆ°æœ€ç»ˆç»“æœé‡Œ, æ˜¾ç„¶ç»“æœå°±ä¸å¯¹äº†..

#### å¤æ‚åº¦

- æ—¶é—´å¤æ‚åº¦ O(N): åªéœ€è¦éå†ä¸€é
- ç©ºé—´å¤æ‚åº¦ O(N): ä½¿ç”¨äº†ä¸€ä¸ªå‰ç¼€å’Œè®¡æ•°å­—å…¸

#### ä»£ç 

##### Python 3

```python
import collections

class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        sumdicts = collections.defaultdict(int)
        cursum = 0
        res = 0
        for n in nums:
            cursum += n
            if cursum - k in sumdicts:
                res += sumdicts[cursum - k]
            sumdicts[cursum] += 1
        res += sumdicts[k]
        return res
```

##### C++

```cpp
class Solution
{
public:
    int subarraySum(vector<int> &nums, int k)
    {
        unordered_map<int, int> sumdicts;
        int cursum = 0;
        int res = 0;
        for (int n : nums)
        {
            cursum += n;
            if (sumdicts.count(cursum - k))
            {
                res += sumdicts[cursum - k];
            }
            ++sumdicts[cursum];
        }
        res += sumdicts[k];
        return res;
    }
};
```

---

> å¤§å®¶å¯ä»¥åœ¨ä¸‹é¢è¿™äº›åœ°æ–¹æ‰¾åˆ°æˆ‘~ğŸ˜Š

> [æˆ‘çš„çŸ¥ä¹ä¸“æ ](https://zhuanlan.zhihu.com/c_1242508721932464128)

> [æˆ‘çš„ CSDN](https://me.csdn.net/zjulyx1993)

> [æˆ‘çš„ç®€ä¹¦](https://www.jianshu.com/u/3a17f1fdfd67)

> [æˆ‘çš„ Leetcode](https://leetcode-cn.com/u/suibianfahui/)

> [æˆ‘çš„ç‰›å®¢ç½‘åšå®¢](https://blog.nowcoder.net/zjulyx)

> æˆ‘çš„å…¬ä¼—å·: æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜, æ¬¢è¿å¤§å®¶æ‰«ç å…³æ³¨~ğŸ˜Š

![æ¯æ—¥ç²¾é€‰ç®—æ³•é¢˜ - å¾®ä¿¡æ‰«ä¸€æ‰«å…³æ³¨æˆ‘](https://mmbiz.qpic.cn/mmbiz_jpg/1KjZicMlYPMgZWmoL4eYcs6UcfmvsetDWME2YJyaCp9oT9z3U573FWENBNhyOByxYI0epew6O37hiaOhdh90QeJg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)
